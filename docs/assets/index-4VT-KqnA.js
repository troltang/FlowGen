(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bh={exports:{}},el={},Hh={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=Symbol.for("react.element"),Jv=Symbol.for("react.portal"),Yv=Symbol.for("react.fragment"),Wv=Symbol.for("react.strict_mode"),Kv=Symbol.for("react.profiler"),Xv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),Zv=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),eE=Symbol.for("react.memo"),tE=Symbol.for("react.lazy"),cd=Symbol.iterator;function nE(e){return e===null||typeof e!="object"?null:(e=cd&&e[cd]||e["@@iterator"],typeof e=="function"?e:null)}var Gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bh=Object.assign,zh={};function lr(e,t,n){this.props=e,this.context=t,this.refs=zh,this.updater=n||Gh}lr.prototype.isReactComponent={};lr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $h(){}$h.prototype=lr.prototype;function Lu(e,t,n){this.props=e,this.context=t,this.refs=zh,this.updater=n||Gh}var Uu=Lu.prototype=new $h;Uu.constructor=Lu;Bh(Uu,lr.prototype);Uu.isPureReactComponent=!0;var dd=Array.isArray,qh=Object.prototype.hasOwnProperty,Vu={current:null},Oh={key:!0,ref:!0,__self:!0,__source:!0};function Jh(e,t,n){var o,r={},i=null,s=null;if(t!=null)for(o in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)qh.call(t,o)&&!Oh.hasOwnProperty(o)&&(r[o]=t[o]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)r[o]===void 0&&(r[o]=l[o]);return{$$typeof:yi,type:e,key:i,ref:s,props:r,_owner:Vu.current}}function oE(e,t){return{$$typeof:yi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bu(e){return typeof e=="object"&&e!==null&&e.$$typeof===yi}function rE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fd=/\/+/g;function Pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rE(""+e.key):t.toString(36)}function Qi(e,t,n,o,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case yi:case Jv:s=!0}}if(s)return s=e,r=r(s),e=o===""?"."+Pl(s,0):o,dd(r)?(n="",e!=null&&(n=e.replace(fd,"$&/")+"/"),Qi(r,t,n,"",function(c){return c})):r!=null&&(bu(r)&&(r=oE(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(fd,"$&/")+"/")+e)),t.push(r)),1;if(s=0,o=o===""?".":o+":",dd(e))for(var l=0;l<e.length;l++){i=e[l];var u=o+Pl(i,l);s+=Qi(i,t,n,u,r)}else if(u=nE(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=o+Pl(i,l++),s+=Qi(i,t,n,u,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ti(e,t,n){if(e==null)return e;var o=[],r=0;return Qi(e,o,"","",function(i){return t.call(n,i,r++)}),o}function iE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},Zi={transition:null},sE={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Zi,ReactCurrentOwner:Vu};function Yh(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ti,forEach:function(e,t,n){Ti(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ti(e,function(){t++}),t},toArray:function(e){return Ti(e,function(t){return t})||[]},only:function(e){if(!bu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=lr;le.Fragment=Yv;le.Profiler=Kv;le.PureComponent=Lu;le.StrictMode=Wv;le.Suspense=jv;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sE;le.act=Yh;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Bh({},e.props),r=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Vu.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)qh.call(t,u)&&!Oh.hasOwnProperty(u)&&(o[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:yi,type:e.type,key:r,ref:i,props:o,_owner:s}};le.createContext=function(e){return e={$$typeof:Qv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Xv,_context:e},e.Consumer=e};le.createElement=Jh;le.createFactory=function(e){var t=Jh.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:Zv,render:e}};le.isValidElement=bu;le.lazy=function(e){return{$$typeof:tE,_payload:{_status:-1,_result:e},_init:iE}};le.memo=function(e,t){return{$$typeof:eE,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Zi.transition;Zi.transition={};try{e()}finally{Zi.transition=t}};le.unstable_act=Yh;le.useCallback=function(e,t){return Ke.current.useCallback(e,t)};le.useContext=function(e){return Ke.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};le.useEffect=function(e,t){return Ke.current.useEffect(e,t)};le.useId=function(){return Ke.current.useId()};le.useImperativeHandle=function(e,t,n){return Ke.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return Ke.current.useMemo(e,t)};le.useReducer=function(e,t,n){return Ke.current.useReducer(e,t,n)};le.useRef=function(e){return Ke.current.useRef(e)};le.useState=function(e){return Ke.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return Ke.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return Ke.current.useTransition()};le.version="18.3.1";Hh.exports=le;var R=Hh.exports;const b=Vh(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE=R,aE=Symbol.for("react.element"),uE=Symbol.for("react.fragment"),cE=Object.prototype.hasOwnProperty,dE=lE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fE={key:!0,ref:!0,__self:!0,__source:!0};function Wh(e,t,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)cE.call(t,o)&&!fE.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:aE,type:e,key:i,ref:s,props:r,_owner:dE.current}}el.Fragment=uE;el.jsx=Wh;el.jsxs=Wh;bh.exports=el;var S=bh.exports,ha={},Kh={exports:{}},ft={},Xh={exports:{}},Qh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,A){var L=D.length;D.push(A);e:for(;0<L;){var H=L-1>>>1,$=D[H];if(0<r($,A))D[H]=A,D[L]=$,L=H;else break e}}function n(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var A=D[0],L=D.pop();if(L!==A){D[0]=L;e:for(var H=0,$=D.length,K=$>>>1;H<K;){var Y=2*(H+1)-1,q=D[Y],J=Y+1,X=D[J];if(0>r(q,L))J<$&&0>r(X,q)?(D[H]=X,D[J]=L,H=J):(D[H]=q,D[Y]=L,H=Y);else if(J<$&&0>r(X,L))D[H]=X,D[J]=L,H=J;else break e}}return A}function r(D,A){var L=D.sortIndex-A.sortIndex;return L!==0?L:D.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,p=null,h=3,m=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(D){for(var A=n(c);A!==null;){if(A.callback===null)o(c);else if(A.startTime<=D)o(c),A.sortIndex=A.expirationTime,t(u,A);else break;A=n(c)}}function _(D){if(x=!1,E(D),!v)if(n(u)!==null)v=!0,k(w);else{var A=n(c);A!==null&&B(_,A.startTime-D)}}function w(D,A){v=!1,x&&(x=!1,g(M),M=-1),m=!0;var L=h;try{for(E(A),p=n(u);p!==null&&(!(p.expirationTime>A)||D&&!V());){var H=p.callback;if(typeof H=="function"){p.callback=null,h=p.priorityLevel;var $=H(p.expirationTime<=A);A=e.unstable_now(),typeof $=="function"?p.callback=$:p===n(u)&&o(u),E(A)}else o(u);p=n(u)}if(p!==null)var K=!0;else{var Y=n(c);Y!==null&&B(_,Y.startTime-A),K=!1}return K}finally{p=null,h=L,m=!1}}var T=!1,I=null,M=-1,P=5,F=-1;function V(){return!(e.unstable_now()-F<P)}function G(){if(I!==null){var D=e.unstable_now();F=D;var A=!0;try{A=I(!0,D)}finally{A?z():(T=!1,I=null)}}else T=!1}var z;if(typeof y=="function")z=function(){y(G)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,U=N.port2;N.port1.onmessage=G,z=function(){U.postMessage(null)}}else z=function(){C(G,0)};function k(D){I=D,T||(T=!0,z())}function B(D,A){M=C(function(){D(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,k(w))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var L=h;h=A;try{return D()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,A){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=h;h=D;try{return A()}finally{h=L}},e.unstable_scheduleCallback=function(D,A,L){var H=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,D={id:f++,callback:A,priorityLevel:D,startTime:L,expirationTime:$,sortIndex:-1},L>H?(D.sortIndex=L,t(c,D),n(u)===null&&D===n(c)&&(x?(g(M),M=-1):x=!0,B(_,L-H))):(D.sortIndex=$,t(u,D),v||m||(v=!0,k(w))),D},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(D){var A=h;return function(){var L=h;h=A;try{return D.apply(this,arguments)}finally{h=L}}}})(Qh);Xh.exports=Qh;var pE=Xh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=R,ct=pE;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zh=new Set,Yr={};function mo(e,t){Qo(e,t),Qo(e+"Capture",t)}function Qo(e,t){for(Yr[e]=t,e=0;e<t.length;e++)Zh.add(t[e])}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=Object.prototype.hasOwnProperty,mE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pd={},hd={};function gE(e){return ma.call(hd,e)?!0:ma.call(pd,e)?!1:mE.test(e)?hd[e]=!0:(pd[e]=!0,!1)}function yE(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vE(e,t,n,o){if(t===null||typeof t>"u"||yE(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,o,r,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hu=/[\-:]([a-z])/g;function Gu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hu,Gu);Ve[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hu,Gu);Ve[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hu,Gu);Ve[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bu(e,t,n,o){var r=Ve.hasOwnProperty(t)?Ve[t]:null;(r!==null?r.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vE(t,n,r,o)&&(n=null),o||r===null?gE(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,o=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var fn=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ni=Symbol.for("react.element"),wo=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),zu=Symbol.for("react.strict_mode"),ga=Symbol.for("react.profiler"),jh=Symbol.for("react.provider"),em=Symbol.for("react.context"),$u=Symbol.for("react.forward_ref"),ya=Symbol.for("react.suspense"),va=Symbol.for("react.suspense_list"),qu=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),tm=Symbol.for("react.offscreen"),md=Symbol.iterator;function gr(e){return e===null||typeof e!="object"?null:(e=md&&e[md]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,kl;function Mr(e){if(kl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kl=t&&t[1]||""}return`
`+kl+e}var Dl=!1;function Fl(e,t){if(!e||Dl)return"";Dl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,l=i.length-1;1<=s&&0<=l&&r[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==i[l]){var u=`
`+r[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{Dl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mr(e):""}function EE(e){switch(e.tag){case 5:return Mr(e.type);case 16:return Mr("Lazy");case 13:return Mr("Suspense");case 19:return Mr("SuspenseList");case 0:case 2:case 15:return e=Fl(e.type,!1),e;case 11:return e=Fl(e.type.render,!1),e;case 1:return e=Fl(e.type,!0),e;default:return""}}function Ea(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Co:return"Fragment";case wo:return"Portal";case ga:return"Profiler";case zu:return"StrictMode";case ya:return"Suspense";case va:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case em:return(e.displayName||"Context")+".Consumer";case jh:return(e._context.displayName||"Context")+".Provider";case $u:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qu:return t=e.displayName||null,t!==null?t:Ea(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return Ea(e(t))}catch{}}return null}function xE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ea(t);case 8:return t===zu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SE(e){var t=nm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){e._valueTracker||(e._valueTracker=SE(e))}function om(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=nm(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xa(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gd(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=bn(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rm(e,t){t=t.checked,t!=null&&Bu(e,"checked",t,!1)}function Sa(e,t){rm(e,t);var n=bn(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_a(e,t.type,n):t.hasOwnProperty("defaultValue")&&_a(e,t.type,bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _a(e,t,n){(t!=="number"||ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pr=Array.isArray;function Vo(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Pr(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bn(n)}}function im(e,t){var n=bn(t.value),o=bn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function Ed(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ca(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ai,lm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_E=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){_E.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function am(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function um(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=am(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}var wE=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(e,t){if(t){if(wE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Na(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=null;function Ou(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,bo=null,Ho=null;function xd(e){if(e=xi(e)){if(typeof Aa!="function")throw Error(O(280));var t=e.stateNode;t&&(t=il(t),Aa(e.stateNode,e.type,t))}}function cm(e){bo?Ho?Ho.push(e):Ho=[e]:bo=e}function dm(){if(bo){var e=bo,t=Ho;if(Ho=bo=null,xd(e),t)for(e=0;e<t.length;e++)xd(t[e])}}function fm(e,t){return e(t)}function pm(){}var Ll=!1;function hm(e,t,n){if(Ll)return e(t,n);Ll=!0;try{return fm(e,t,n)}finally{Ll=!1,(bo!==null||Ho!==null)&&(pm(),dm())}}function Kr(e,t){var n=e.stateNode;if(n===null)return null;var o=il(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Ra=!1;if(rn)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){Ra=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{Ra=!1}function CE(e,t,n,o,r,i,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var br=!1,gs=null,ys=!1,Ma=null,TE={onError:function(e){br=!0,gs=e}};function NE(e,t,n,o,r,i,s,l,u){br=!1,gs=null,CE.apply(TE,arguments)}function IE(e,t,n,o,r,i,s,l,u){if(NE.apply(this,arguments),br){if(br){var c=gs;br=!1,gs=null}else throw Error(O(198));ys||(ys=!0,Ma=c)}}function go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sd(e){if(go(e)!==e)throw Error(O(188))}function AE(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Sd(r),e;if(i===o)return Sd(r),t;i=i.sibling}throw Error(O(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,o=i;break}if(l===o){s=!0,o=r,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,o=r;break}if(l===o){s=!0,o=i,n=r;break}l=l.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==o)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function gm(e){return e=AE(e),e!==null?ym(e):null}function ym(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ym(e);if(t!==null)return t;e=e.sibling}return null}var vm=ct.unstable_scheduleCallback,_d=ct.unstable_cancelCallback,RE=ct.unstable_shouldYield,ME=ct.unstable_requestPaint,Ie=ct.unstable_now,PE=ct.unstable_getCurrentPriorityLevel,Ju=ct.unstable_ImmediatePriority,Em=ct.unstable_UserBlockingPriority,vs=ct.unstable_NormalPriority,kE=ct.unstable_LowPriority,xm=ct.unstable_IdlePriority,tl=null,Ot=null;function DE(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(tl,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:UE,FE=Math.log,LE=Math.LN2;function UE(e){return e>>>=0,e===0?32:31-(FE(e)/LE|0)|0}var Ri=64,Mi=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Es(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?o=kr(l):(i&=s,i!==0&&(o=kr(i)))}else s=n&~r,s!==0?o=kr(s):i!==0&&(o=kr(i));if(o===0)return 0;if(t!==0&&t!==o&&!(t&r)&&(r=o&-o,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-kt(t),r=1<<n,o|=e[n],t&=~r;return o}function VE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bE(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-kt(i),l=1<<s,u=r[s];u===-1?(!(l&n)||l&o)&&(r[s]=VE(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Pa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sm(){var e=Ri;return Ri<<=1,!(Ri&4194240)&&(Ri=64),e}function Ul(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=n}function HE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-kt(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}function Yu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-kt(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var fe=0;function _m(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wm,Wu,Cm,Tm,Nm,ka=!1,Pi=[],An=null,Rn=null,Mn=null,Xr=new Map,Qr=new Map,wn=[],GE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wd(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(t.pointerId)}}function vr(e,t,n,o,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},t!==null&&(t=xi(t),t!==null&&Wu(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function BE(e,t,n,o,r){switch(t){case"focusin":return An=vr(An,e,t,n,o,r),!0;case"dragenter":return Rn=vr(Rn,e,t,n,o,r),!0;case"mouseover":return Mn=vr(Mn,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return Xr.set(i,vr(Xr.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,Qr.set(i,vr(Qr.get(i)||null,e,t,n,o,r)),!0}return!1}function Im(e){var t=jn(e.target);if(t!==null){var n=go(t);if(n!==null){if(t=n.tag,t===13){if(t=mm(n),t!==null){e.blockedOn=t,Nm(e.priority,function(){Cm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Ia=o,n.target.dispatchEvent(o),Ia=null}else return t=xi(n),t!==null&&Wu(t),e.blockedOn=n,!1;t.shift()}return!0}function Cd(e,t,n){ji(e)&&n.delete(t)}function zE(){ka=!1,An!==null&&ji(An)&&(An=null),Rn!==null&&ji(Rn)&&(Rn=null),Mn!==null&&ji(Mn)&&(Mn=null),Xr.forEach(Cd),Qr.forEach(Cd)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,ka||(ka=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,zE)))}function Zr(e){function t(r){return Er(r,e)}if(0<Pi.length){Er(Pi[0],e);for(var n=1;n<Pi.length;n++){var o=Pi[n];o.blockedOn===e&&(o.blockedOn=null)}}for(An!==null&&Er(An,e),Rn!==null&&Er(Rn,e),Mn!==null&&Er(Mn,e),Xr.forEach(t),Qr.forEach(t),n=0;n<wn.length;n++)o=wn[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<wn.length&&(n=wn[0],n.blockedOn===null);)Im(n),n.blockedOn===null&&wn.shift()}var Go=fn.ReactCurrentBatchConfig,xs=!0;function $E(e,t,n,o){var r=fe,i=Go.transition;Go.transition=null;try{fe=1,Ku(e,t,n,o)}finally{fe=r,Go.transition=i}}function qE(e,t,n,o){var r=fe,i=Go.transition;Go.transition=null;try{fe=4,Ku(e,t,n,o)}finally{fe=r,Go.transition=i}}function Ku(e,t,n,o){if(xs){var r=Da(e,t,n,o);if(r===null)Jl(e,t,o,Ss,n),wd(e,o);else if(BE(r,e,t,n,o))o.stopPropagation();else if(wd(e,o),t&4&&-1<GE.indexOf(e)){for(;r!==null;){var i=xi(r);if(i!==null&&wm(i),i=Da(e,t,n,o),i===null&&Jl(e,t,o,Ss,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Jl(e,t,o,null,n)}}var Ss=null;function Da(e,t,n,o){if(Ss=null,e=Ou(o),e=jn(e),e!==null)if(t=go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ss=e,null}function Am(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PE()){case Ju:return 1;case Em:return 4;case vs:case kE:return 16;case xm:return 536870912;default:return 16}default:return 16}}var Nn=null,Xu=null,es=null;function Rm(){if(es)return es;var e,t=Xu,n=t.length,o,r="value"in Nn?Nn.value:Nn.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(o=1;o<=s&&t[n-o]===r[i-o];o++);return es=r.slice(e,1<o?1-o:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ki(){return!0}function Td(){return!1}function pt(e){function t(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ki:Td,this.isPropagationStopped=Td,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),t}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=pt(ar),Ei=_e({},ar,{view:0,detail:0}),OE=pt(Ei),Vl,bl,xr,nl=_e({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xr&&(xr&&e.type==="mousemove"?(Vl=e.screenX-xr.screenX,bl=e.screenY-xr.screenY):bl=Vl=0,xr=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:bl}}),Nd=pt(nl),JE=_e({},nl,{dataTransfer:0}),YE=pt(JE),WE=_e({},Ei,{relatedTarget:0}),Hl=pt(WE),KE=_e({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),XE=pt(KE),QE=_e({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZE=pt(QE),jE=_e({},ar,{data:0}),Id=pt(jE),ex={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nx[e])?!!t[e]:!1}function Zu(){return ox}var rx=_e({},Ei,{key:function(e){if(e.key){var t=ex[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ts(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(e){return e.type==="keypress"?ts(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ts(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=pt(rx),sx=_e({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ad=pt(sx),lx=_e({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),ax=pt(lx),ux=_e({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),cx=pt(ux),dx=_e({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fx=pt(dx),px=[9,13,27,32],ju=rn&&"CompositionEvent"in window,Hr=null;rn&&"documentMode"in document&&(Hr=document.documentMode);var hx=rn&&"TextEvent"in window&&!Hr,Mm=rn&&(!ju||Hr&&8<Hr&&11>=Hr),Rd=" ",Md=!1;function Pm(e,t){switch(e){case"keyup":return px.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var To=!1;function mx(e,t){switch(e){case"compositionend":return km(t);case"keypress":return t.which!==32?null:(Md=!0,Rd);case"textInput":return e=t.data,e===Rd&&Md?null:e;default:return null}}function gx(e,t){if(To)return e==="compositionend"||!ju&&Pm(e,t)?(e=Rm(),es=Xu=Nn=null,To=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mm&&t.locale!=="ko"?null:t.data;default:return null}}var yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yx[e.type]:t==="textarea"}function Dm(e,t,n,o){cm(o),t=_s(t,"onChange"),0<t.length&&(n=new Qu("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Gr=null,jr=null;function vx(e){qm(e,0)}function ol(e){var t=Ao(e);if(om(t))return e}function Ex(e,t){if(e==="change")return t}var Fm=!1;if(rn){var Gl;if(rn){var Bl="oninput"in document;if(!Bl){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),Bl=typeof kd.oninput=="function"}Gl=Bl}else Gl=!1;Fm=Gl&&(!document.documentMode||9<document.documentMode)}function Dd(){Gr&&(Gr.detachEvent("onpropertychange",Lm),jr=Gr=null)}function Lm(e){if(e.propertyName==="value"&&ol(jr)){var t=[];Dm(t,jr,e,Ou(e)),hm(vx,t)}}function xx(e,t,n){e==="focusin"?(Dd(),Gr=t,jr=n,Gr.attachEvent("onpropertychange",Lm)):e==="focusout"&&Dd()}function Sx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ol(jr)}function _x(e,t){if(e==="click")return ol(t)}function wx(e,t){if(e==="input"||e==="change")return ol(t)}function Cx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Cx;function ei(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!ma.call(t,r)||!Ft(e[r],t[r]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ld(e,t){var n=Fd(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fd(n)}}function Um(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Um(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vm(){for(var e=window,t=ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ms(e.document)}return t}function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tx(e){var t=Vm(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Um(n.ownerDocument.documentElement,n)){if(o!==null&&ec(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=Ld(n,i);var s=Ld(n,o);r&&s&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nx=rn&&"documentMode"in document&&11>=document.documentMode,No=null,Fa=null,Br=null,La=!1;function Ud(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;La||No==null||No!==ms(o)||(o=No,"selectionStart"in o&&ec(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Br&&ei(Br,o)||(Br=o,o=_s(Fa,"onSelect"),0<o.length&&(t=new Qu("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=No)))}function Di(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Io={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionend:Di("Transition","TransitionEnd")},zl={},bm={};rn&&(bm=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function rl(e){if(zl[e])return zl[e];if(!Io[e])return e;var t=Io[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bm)return zl[e]=t[n];return e}var Hm=rl("animationend"),Gm=rl("animationiteration"),Bm=rl("animationstart"),zm=rl("transitionend"),$m=new Map,Vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){$m.set(e,t),mo(t,[e])}for(var $l=0;$l<Vd.length;$l++){var ql=Vd[$l],Ix=ql.toLowerCase(),Ax=ql[0].toUpperCase()+ql.slice(1);Bn(Ix,"on"+Ax)}Bn(Hm,"onAnimationEnd");Bn(Gm,"onAnimationIteration");Bn(Bm,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(zm,"onTransitionEnd");Qo("onMouseEnter",["mouseout","mouseover"]);Qo("onMouseLeave",["mouseout","mouseover"]);Qo("onPointerEnter",["pointerout","pointerover"]);Qo("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function bd(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,IE(o,t,void 0,e),e.currentTarget=null}function qm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var s=o.length-1;0<=s;s--){var l=o[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&r.isPropagationStopped())break e;bd(r,l,c),i=u}else for(s=0;s<o.length;s++){if(l=o[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&r.isPropagationStopped())break e;bd(r,l,c),i=u}}}if(ys)throw e=Ma,ys=!1,Ma=null,e}function ge(e,t){var n=t[Ga];n===void 0&&(n=t[Ga]=new Set);var o=e+"__bubble";n.has(o)||(Om(t,e,2,!1),n.add(o))}function Ol(e,t,n){var o=0;t&&(o|=4),Om(n,e,o,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function ti(e){if(!e[Fi]){e[Fi]=!0,Zh.forEach(function(n){n!=="selectionchange"&&(Rx.has(n)||Ol(n,!1,e),Ol(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fi]||(t[Fi]=!0,Ol("selectionchange",!1,t))}}function Om(e,t,n,o){switch(Am(t)){case 1:var r=$E;break;case 4:r=qE;break;default:r=Ku}n=r.bind(null,t,n,e),r=void 0,!Ra||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Jl(e,t,n,o,r){var i=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var l=o.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;l!==null;){if(s=jn(l),s===null)return;if(u=s.tag,u===5||u===6){o=i=s;continue e}l=l.parentNode}}o=o.return}hm(function(){var c=i,f=Ou(n),p=[];e:{var h=$m.get(e);if(h!==void 0){var m=Qu,v=e;switch(e){case"keypress":if(ts(n)===0)break e;case"keydown":case"keyup":m=ix;break;case"focusin":v="focus",m=Hl;break;case"focusout":v="blur",m=Hl;break;case"beforeblur":case"afterblur":m=Hl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ax;break;case Hm:case Gm:case Bm:m=XE;break;case zm:m=cx;break;case"scroll":m=OE;break;case"wheel":m=fx;break;case"copy":case"cut":case"paste":m=ZE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ad}var x=(t&4)!==0,C=!x&&e==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var y=c,E;y!==null;){E=y;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,g!==null&&(_=Kr(y,g),_!=null&&x.push(ni(y,_,E)))),C)break;y=y.return}0<x.length&&(h=new m(h,v,null,n,f),p.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Ia&&(v=n.relatedTarget||n.fromElement)&&(jn(v)||v[sn]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?jn(v):null,v!==null&&(C=go(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=Nd,_="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=Ad,_="onPointerLeave",g="onPointerEnter",y="pointer"),C=m==null?h:Ao(m),E=v==null?h:Ao(v),h=new x(_,y+"leave",m,n,f),h.target=C,h.relatedTarget=E,_=null,jn(f)===c&&(x=new x(g,y+"enter",v,n,f),x.target=E,x.relatedTarget=C,_=x),C=_,m&&v)t:{for(x=m,g=v,y=0,E=x;E;E=vo(E))y++;for(E=0,_=g;_;_=vo(_))E++;for(;0<y-E;)x=vo(x),y--;for(;0<E-y;)g=vo(g),E--;for(;y--;){if(x===g||g!==null&&x===g.alternate)break t;x=vo(x),g=vo(g)}x=null}else x=null;m!==null&&Hd(p,h,m,x,!1),v!==null&&C!==null&&Hd(p,C,v,x,!0)}}e:{if(h=c?Ao(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var w=Ex;else if(Pd(h))if(Fm)w=wx;else{w=Sx;var T=xx}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=_x);if(w&&(w=w(e,c))){Dm(p,w,n,f);break e}T&&T(e,h,c),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&_a(h,"number",h.value)}switch(T=c?Ao(c):window,e){case"focusin":(Pd(T)||T.contentEditable==="true")&&(No=T,Fa=c,Br=null);break;case"focusout":Br=Fa=No=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,Ud(p,n,f);break;case"selectionchange":if(Nx)break;case"keydown":case"keyup":Ud(p,n,f)}var I;if(ju)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else To?Pm(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Mm&&n.locale!=="ko"&&(To||M!=="onCompositionStart"?M==="onCompositionEnd"&&To&&(I=Rm()):(Nn=f,Xu="value"in Nn?Nn.value:Nn.textContent,To=!0)),T=_s(c,M),0<T.length&&(M=new Id(M,e,null,n,f),p.push({event:M,listeners:T}),I?M.data=I:(I=km(n),I!==null&&(M.data=I)))),(I=hx?mx(e,n):gx(e,n))&&(c=_s(c,"onBeforeInput"),0<c.length&&(f=new Id("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=I))}qm(p,t)})}function ni(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _s(e,t){for(var n=t+"Capture",o=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Kr(e,n),i!=null&&o.unshift(ni(e,i,r)),i=Kr(e,t),i!=null&&o.push(ni(e,i,r))),e=e.return}return o}function vo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hd(e,t,n,o,r){for(var i=t._reactName,s=[];n!==null&&n!==o;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===o)break;l.tag===5&&c!==null&&(l=c,r?(u=Kr(n,i),u!=null&&s.unshift(ni(n,u,l))):r||(u=Kr(n,i),u!=null&&s.push(ni(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Mx=/\r\n?/g,Px=/\u0000|\uFFFD/g;function Gd(e){return(typeof e=="string"?e:""+e).replace(Mx,`
`).replace(Px,"")}function Li(e,t,n){if(t=Gd(t),Gd(e)!==t&&n)throw Error(O(425))}function ws(){}var Ua=null,Va=null;function ba(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,kx=typeof clearTimeout=="function"?clearTimeout:void 0,Bd=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Bd<"u"?function(e){return Bd.resolve(null).then(e).catch(Fx)}:Ha;function Fx(e){setTimeout(function(){throw e})}function Yl(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){e.removeChild(r),Zr(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);Zr(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),qt="__reactFiber$"+ur,oi="__reactProps$"+ur,sn="__reactContainer$"+ur,Ga="__reactEvents$"+ur,Lx="__reactListeners$"+ur,Ux="__reactHandles$"+ur;function jn(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sn]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zd(e);e!==null;){if(n=e[qt])return n;e=zd(e)}return t}e=n,n=e.parentNode}return null}function xi(e){return e=e[qt]||e[sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function il(e){return e[oi]||null}var Ba=[],Ro=-1;function zn(e){return{current:e}}function ve(e){0>Ro||(e.current=Ba[Ro],Ba[Ro]=null,Ro--)}function me(e,t){Ro++,Ba[Ro]=e.current,e.current=t}var Hn={},$e=zn(Hn),nt=zn(!1),lo=Hn;function Zo(e,t){var n=e.type.contextTypes;if(!n)return Hn;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ot(e){return e=e.childContextTypes,e!=null}function Cs(){ve(nt),ve($e)}function $d(e,t,n){if($e.current!==Hn)throw Error(O(168));me($e,t),me(nt,n)}function Jm(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in t))throw Error(O(108,xE(e)||"Unknown",r));return _e({},n,o)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,lo=$e.current,me($e,e),me(nt,nt.current),!0}function qd(e,t,n){var o=e.stateNode;if(!o)throw Error(O(169));n?(e=Jm(e,t,lo),o.__reactInternalMemoizedMergedChildContext=e,ve(nt),ve($e),me($e,e)):ve(nt),me(nt,n)}var jt=null,sl=!1,Wl=!1;function Ym(e){jt===null?jt=[e]:jt.push(e)}function Vx(e){sl=!0,Ym(e)}function $n(){if(!Wl&&jt!==null){Wl=!0;var e=0,t=fe;try{var n=jt;for(fe=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}jt=null,sl=!1}catch(r){throw jt!==null&&(jt=jt.slice(e+1)),vm(Ju,$n),r}finally{fe=t,Wl=!1}}return null}var Mo=[],Po=0,Ns=null,Is=0,mt=[],gt=0,ao=null,en=1,tn="";function Xn(e,t){Mo[Po++]=Is,Mo[Po++]=Ns,Ns=e,Is=t}function Wm(e,t,n){mt[gt++]=en,mt[gt++]=tn,mt[gt++]=ao,ao=e;var o=en;e=tn;var r=32-kt(o)-1;o&=~(1<<r),n+=1;var i=32-kt(t)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,en=1<<32-kt(t)+r|n<<r|o,tn=i+e}else en=1<<i|n<<r|o,tn=e}function tc(e){e.return!==null&&(Xn(e,1),Wm(e,1,0))}function nc(e){for(;e===Ns;)Ns=Mo[--Po],Mo[Po]=null,Is=Mo[--Po],Mo[Po]=null;for(;e===ao;)ao=mt[--gt],mt[gt]=null,tn=mt[--gt],mt[gt]=null,en=mt[--gt],mt[gt]=null}var ut=null,at=null,Ee=!1,Mt=null;function Km(e,t){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Od(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,at=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,at=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ao!==null?{id:en,overflow:tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ut=e,at=null,!0):!1;default:return!1}}function za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $a(e){if(Ee){var t=at;if(t){var n=t;if(!Od(e,t)){if(za(e))throw Error(O(418));t=Pn(n.nextSibling);var o=ut;t&&Od(e,t)?Km(o,n):(e.flags=e.flags&-4097|2,Ee=!1,ut=e)}}else{if(za(e))throw Error(O(418));e.flags=e.flags&-4097|2,Ee=!1,ut=e}}}function Jd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function Ui(e){if(e!==ut)return!1;if(!Ee)return Jd(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ba(e.type,e.memoizedProps)),t&&(t=at)){if(za(e))throw Xm(),Error(O(418));for(;t;)Km(e,t),t=Pn(t.nextSibling)}if(Jd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){at=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}at=null}}else at=ut?Pn(e.stateNode.nextSibling):null;return!0}function Xm(){for(var e=at;e;)e=Pn(e.nextSibling)}function jo(){at=ut=null,Ee=!1}function oc(e){Mt===null?Mt=[e]:Mt.push(e)}var bx=fn.ReactCurrentBatchConfig;function Sr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var o=n.stateNode}if(!o)throw Error(O(147,e));var r=o,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=r.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function Vi(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yd(e){var t=e._init;return t(e._payload)}function Qm(e){function t(g,y){if(e){var E=g.deletions;E===null?(g.deletions=[y],g.flags|=16):E.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function o(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Ln(g,y),g.index=0,g.sibling=null,g}function i(g,y,E){return g.index=E,e?(E=g.alternate,E!==null?(E=E.index,E<y?(g.flags|=2,y):E):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,y,E,_){return y===null||y.tag!==6?(y=ta(E,g.mode,_),y.return=g,y):(y=r(y,E),y.return=g,y)}function u(g,y,E,_){var w=E.type;return w===Co?f(g,y,E.props.children,_,E.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===En&&Yd(w)===y.type)?(_=r(y,E.props),_.ref=Sr(g,y,E),_.return=g,_):(_=as(E.type,E.key,E.props,null,g.mode,_),_.ref=Sr(g,y,E),_.return=g,_)}function c(g,y,E,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=na(E,g.mode,_),y.return=g,y):(y=r(y,E.children||[]),y.return=g,y)}function f(g,y,E,_,w){return y===null||y.tag!==7?(y=io(E,g.mode,_,w),y.return=g,y):(y=r(y,E),y.return=g,y)}function p(g,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ta(""+y,g.mode,E),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ni:return E=as(y.type,y.key,y.props,null,g.mode,E),E.ref=Sr(g,null,y),E.return=g,E;case wo:return y=na(y,g.mode,E),y.return=g,y;case En:var _=y._init;return p(g,_(y._payload),E)}if(Pr(y)||gr(y))return y=io(y,g.mode,E,null),y.return=g,y;Vi(g,y)}return null}function h(g,y,E,_){var w=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return w!==null?null:l(g,y,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ni:return E.key===w?u(g,y,E,_):null;case wo:return E.key===w?c(g,y,E,_):null;case En:return w=E._init,h(g,y,w(E._payload),_)}if(Pr(E)||gr(E))return w!==null?null:f(g,y,E,_,null);Vi(g,E)}return null}function m(g,y,E,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(E)||null,l(y,g,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ni:return g=g.get(_.key===null?E:_.key)||null,u(y,g,_,w);case wo:return g=g.get(_.key===null?E:_.key)||null,c(y,g,_,w);case En:var T=_._init;return m(g,y,E,T(_._payload),w)}if(Pr(_)||gr(_))return g=g.get(E)||null,f(y,g,_,w,null);Vi(y,_)}return null}function v(g,y,E,_){for(var w=null,T=null,I=y,M=y=0,P=null;I!==null&&M<E.length;M++){I.index>M?(P=I,I=null):P=I.sibling;var F=h(g,I,E[M],_);if(F===null){I===null&&(I=P);break}e&&I&&F.alternate===null&&t(g,I),y=i(F,y,M),T===null?w=F:T.sibling=F,T=F,I=P}if(M===E.length)return n(g,I),Ee&&Xn(g,M),w;if(I===null){for(;M<E.length;M++)I=p(g,E[M],_),I!==null&&(y=i(I,y,M),T===null?w=I:T.sibling=I,T=I);return Ee&&Xn(g,M),w}for(I=o(g,I);M<E.length;M++)P=m(I,g,M,E[M],_),P!==null&&(e&&P.alternate!==null&&I.delete(P.key===null?M:P.key),y=i(P,y,M),T===null?w=P:T.sibling=P,T=P);return e&&I.forEach(function(V){return t(g,V)}),Ee&&Xn(g,M),w}function x(g,y,E,_){var w=gr(E);if(typeof w!="function")throw Error(O(150));if(E=w.call(E),E==null)throw Error(O(151));for(var T=w=null,I=y,M=y=0,P=null,F=E.next();I!==null&&!F.done;M++,F=E.next()){I.index>M?(P=I,I=null):P=I.sibling;var V=h(g,I,F.value,_);if(V===null){I===null&&(I=P);break}e&&I&&V.alternate===null&&t(g,I),y=i(V,y,M),T===null?w=V:T.sibling=V,T=V,I=P}if(F.done)return n(g,I),Ee&&Xn(g,M),w;if(I===null){for(;!F.done;M++,F=E.next())F=p(g,F.value,_),F!==null&&(y=i(F,y,M),T===null?w=F:T.sibling=F,T=F);return Ee&&Xn(g,M),w}for(I=o(g,I);!F.done;M++,F=E.next())F=m(I,g,M,F.value,_),F!==null&&(e&&F.alternate!==null&&I.delete(F.key===null?M:F.key),y=i(F,y,M),T===null?w=F:T.sibling=F,T=F);return e&&I.forEach(function(G){return t(g,G)}),Ee&&Xn(g,M),w}function C(g,y,E,_){if(typeof E=="object"&&E!==null&&E.type===Co&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ni:e:{for(var w=E.key,T=y;T!==null;){if(T.key===w){if(w=E.type,w===Co){if(T.tag===7){n(g,T.sibling),y=r(T,E.props.children),y.return=g,g=y;break e}}else if(T.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===En&&Yd(w)===T.type){n(g,T.sibling),y=r(T,E.props),y.ref=Sr(g,T,E),y.return=g,g=y;break e}n(g,T);break}else t(g,T);T=T.sibling}E.type===Co?(y=io(E.props.children,g.mode,_,E.key),y.return=g,g=y):(_=as(E.type,E.key,E.props,null,g.mode,_),_.ref=Sr(g,y,E),_.return=g,g=_)}return s(g);case wo:e:{for(T=E.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(g,y.sibling),y=r(y,E.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=na(E,g.mode,_),y.return=g,g=y}return s(g);case En:return T=E._init,C(g,y,T(E._payload),_)}if(Pr(E))return v(g,y,E,_);if(gr(E))return x(g,y,E,_);Vi(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,E),y.return=g,g=y):(n(g,y),y=ta(E,g.mode,_),y.return=g,g=y),s(g)):n(g,y)}return C}var er=Qm(!0),Zm=Qm(!1),As=zn(null),Rs=null,ko=null,rc=null;function ic(){rc=ko=Rs=null}function sc(e){var t=As.current;ve(As),e._currentValue=t}function qa(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Bo(e,t){Rs=e,rc=ko=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(rc!==e)if(e={context:e,memoizedValue:t,next:null},ko===null){if(Rs===null)throw Error(O(308));ko=e,Rs.dependencies={lanes:0,firstContext:e}}else ko=ko.next=e;return t}var eo=null;function lc(e){eo===null?eo=[e]:eo.push(e)}function jm(e,t,n,o){var r=t.interleaved;return r===null?(n.next=n,lc(t)):(n.next=r.next,r.next=n),t.interleaved=n,ln(e,o)}function ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xn=!1;function ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,ue&2){var r=o.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),o.pending=t,ln(e,n)}return r=o.interleaved,r===null?(t.next=t,lc(o)):(t.next=r.next,r.next=t),o.interleaved=t,ln(e,n)}function ns(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Yu(e,n)}}function Wd(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,o){var r=e.updateQueue;xn=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?i=c:s.next=c,s=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var p=r.baseState;s=0,f=c=u=null,l=i;do{var h=l.lane,m=l.eventTime;if((o&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(h=t,m=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){p=v.call(m,p,h);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(m,p,h):v,h==null)break e;p=_e({},p,h);break e;case 2:xn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=m,u=p):f=f.next=m,s|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(f===null&&(u=p),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,t=r.shared.interleaved,t!==null){r=t;do s|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);co|=s,e.lanes=s,e.memoizedState=p}}function Kd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(O(191,r));r.call(o)}}}var Si={},Jt=zn(Si),ri=zn(Si),ii=zn(Si);function to(e){if(e===Si)throw Error(O(174));return e}function uc(e,t){switch(me(ii,t),me(ri,e),me(Jt,Si),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ca(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ca(t,e)}ve(Jt),me(Jt,t)}function tr(){ve(Jt),ve(ri),ve(ii)}function tg(e){to(ii.current);var t=to(Jt.current),n=Ca(t,e.type);t!==n&&(me(ri,e),me(Jt,n))}function cc(e){ri.current===e&&(ve(Jt),ve(ri))}var xe=zn(0);function Ps(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kl=[];function dc(){for(var e=0;e<Kl.length;e++)Kl[e]._workInProgressVersionPrimary=null;Kl.length=0}var os=fn.ReactCurrentDispatcher,Xl=fn.ReactCurrentBatchConfig,uo=0,Se=null,Re=null,De=null,ks=!1,zr=!1,si=0,Hx=0;function He(){throw Error(O(321))}function fc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function pc(e,t,n,o,r,i){if(uo=i,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?$x:qx,e=n(o,r),zr){i=0;do{if(zr=!1,si=0,25<=i)throw Error(O(301));i+=1,De=Re=null,t.updateQueue=null,os.current=Ox,e=n(o,r)}while(zr)}if(os.current=Ds,t=Re!==null&&Re.next!==null,uo=0,De=Re=Se=null,ks=!1,t)throw Error(O(300));return e}function hc(){var e=si!==0;return si=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Se.memoizedState=De=e:De=De.next=e,De}function Ct(){if(Re===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=De===null?Se.memoizedState:De.next;if(t!==null)De=t,Re=e;else{if(e===null)throw Error(O(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},De===null?Se.memoizedState=De=e:De=De.next=e}return De}function li(e,t){return typeof t=="function"?t(e):t}function Ql(e){var t=Ct(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var o=Re,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var l=s=null,u=null,c=i;do{var f=c.lane;if((uo&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,s=o):u=u.next=p,Se.lanes|=f,co|=f}c=c.next}while(c!==null&&c!==i);u===null?s=o:u.next=l,Ft(o,t.memoizedState)||(et=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=u,n.lastRenderedState=o}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Se.lanes|=i,co|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zl(e){var t=Ct(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=e(i,s.action),s=s.next;while(s!==r);Ft(i,t.memoizedState)||(et=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function ng(){}function og(e,t){var n=Se,o=Ct(),r=t(),i=!Ft(o.memoizedState,r);if(i&&(o.memoizedState=r,et=!0),o=o.queue,mc(sg.bind(null,n,o,e),[e]),o.getSnapshot!==t||i||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,ai(9,ig.bind(null,n,o,r,t),void 0,null),Fe===null)throw Error(O(349));uo&30||rg(n,t,r)}return r}function rg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ig(e,t,n,o){t.value=n,t.getSnapshot=o,lg(t)&&ag(e)}function sg(e,t,n){return n(function(){lg(t)&&ag(e)})}function lg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function ag(e){var t=ln(e,1);t!==null&&Dt(t,e,1,-1)}function Xd(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t.queue=e,e=e.dispatch=zx.bind(null,Se,e),[t.memoizedState,e]}function ai(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function ug(){return Ct().memoizedState}function rs(e,t,n,o){var r=zt();Se.flags|=e,r.memoizedState=ai(1|t,n,void 0,o===void 0?null:o)}function ll(e,t,n,o){var r=Ct();o=o===void 0?null:o;var i=void 0;if(Re!==null){var s=Re.memoizedState;if(i=s.destroy,o!==null&&fc(o,s.deps)){r.memoizedState=ai(t,n,i,o);return}}Se.flags|=e,r.memoizedState=ai(1|t,n,i,o)}function Qd(e,t){return rs(8390656,8,e,t)}function mc(e,t){return ll(2048,8,e,t)}function cg(e,t){return ll(4,2,e,t)}function dg(e,t){return ll(4,4,e,t)}function fg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pg(e,t,n){return n=n!=null?n.concat([e]):null,ll(4,4,fg.bind(null,t,e),n)}function gc(){}function hg(e,t){var n=Ct();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&fc(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function mg(e,t){var n=Ct();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&fc(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function gg(e,t,n){return uo&21?(Ft(n,t)||(n=Sm(),Se.lanes|=n,co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function Gx(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var o=Xl.transition;Xl.transition={};try{e(!1),t()}finally{fe=n,Xl.transition=o}}function yg(){return Ct().memoizedState}function Bx(e,t,n){var o=Fn(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},vg(e))Eg(t,n);else if(n=jm(e,t,n,o),n!==null){var r=We();Dt(n,e,o,r),xg(n,t,o)}}function zx(e,t,n){var o=Fn(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(vg(e))Eg(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(r.hasEagerState=!0,r.eagerState=l,Ft(l,s)){var u=t.interleaved;u===null?(r.next=r,lc(t)):(r.next=u.next,u.next=r),t.interleaved=r;return}}catch{}finally{}n=jm(e,t,r,o),n!==null&&(r=We(),Dt(n,e,o,r),xg(n,t,o))}}function vg(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Eg(e,t){zr=ks=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xg(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Yu(e,n)}}var Ds={readContext:wt,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},$x={readContext:wt,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Qd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rs(4194308,4,fg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rs(4194308,4,e,t)},useInsertionEffect:function(e,t){return rs(4,2,e,t)},useMemo:function(e,t){var n=zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=zt();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Bx.bind(null,Se,e),[o.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:Xd,useDebugValue:gc,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=Xd(!1),t=e[0];return e=Gx.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Se,r=zt();if(Ee){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),Fe===null)throw Error(O(349));uo&30||rg(o,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Qd(sg.bind(null,o,i,e),[e]),o.flags|=2048,ai(9,ig.bind(null,o,i,n,t),void 0,null),n},useId:function(){var e=zt(),t=Fe.identifierPrefix;if(Ee){var n=tn,o=en;n=(o&~(1<<32-kt(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=si++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Hx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qx={readContext:wt,useCallback:hg,useContext:wt,useEffect:mc,useImperativeHandle:pg,useInsertionEffect:cg,useLayoutEffect:dg,useMemo:mg,useReducer:Ql,useRef:ug,useState:function(){return Ql(li)},useDebugValue:gc,useDeferredValue:function(e){var t=Ct();return gg(t,Re.memoizedState,e)},useTransition:function(){var e=Ql(li)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:ng,useSyncExternalStore:og,useId:yg,unstable_isNewReconciler:!1},Ox={readContext:wt,useCallback:hg,useContext:wt,useEffect:mc,useImperativeHandle:pg,useInsertionEffect:cg,useLayoutEffect:dg,useMemo:mg,useReducer:Zl,useRef:ug,useState:function(){return Zl(li)},useDebugValue:gc,useDeferredValue:function(e){var t=Ct();return Re===null?t.memoizedState=e:gg(t,Re.memoizedState,e)},useTransition:function(){var e=Zl(li)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:ng,useSyncExternalStore:og,useId:yg,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Oa(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=We(),r=Fn(e),i=on(o,r);i.payload=t,n!=null&&(i.callback=n),t=kn(e,i,r),t!==null&&(Dt(t,e,r,o),ns(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=We(),r=Fn(e),i=on(o,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=kn(e,i,r),t!==null&&(Dt(t,e,r,o),ns(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),o=Fn(e),r=on(n,o);r.tag=2,t!=null&&(r.callback=t),t=kn(e,r,o),t!==null&&(Dt(t,e,o,n),ns(t,e,o))}};function Zd(e,t,n,o,r,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,i,s):t.prototype&&t.prototype.isPureReactComponent?!ei(n,o)||!ei(r,i):!0}function Sg(e,t,n){var o=!1,r=Hn,i=t.contextType;return typeof i=="object"&&i!==null?i=wt(i):(r=ot(t)?lo:$e.current,o=t.contextTypes,i=(o=o!=null)?Zo(e,r):Hn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function jd(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function Ja(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},ac(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=wt(i):(i=ot(t)?lo:$e.current,r.context=Zo(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Oa(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&al.enqueueReplaceState(r,r.state,null),Ms(e,n,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function nr(e,t){try{var n="",o=t;do n+=EE(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function jl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ya(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Jx=typeof WeakMap=="function"?WeakMap:Map;function _g(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Ls||(Ls=!0,ou=o),Ya(e,t)},n}function wg(e,t,n){n=on(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){Ya(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ya(e,t),typeof o!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function ef(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Jx;var r=new Set;o.set(t,r)}else r=o.get(t),r===void 0&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=sS.bind(null,e,t,n),t.then(e,e))}function tf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nf(e,t,n,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,kn(n,t,1))),n.lanes|=1),e)}var Yx=fn.ReactCurrentOwner,et=!1;function Ye(e,t,n,o){t.child=e===null?Zm(t,null,n,o):er(t,e.child,n,o)}function of(e,t,n,o,r){n=n.render;var i=t.ref;return Bo(t,r),o=pc(e,t,n,o,i,r),n=hc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,an(e,t,r)):(Ee&&n&&tc(t),t.flags|=1,Ye(e,t,o,r),t.child)}function rf(e,t,n,o,r){if(e===null){var i=n.type;return typeof i=="function"&&!Cc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Cg(e,t,i,o,r)):(e=as(n.type,null,o,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ei,n(s,o)&&e.ref===t.ref)return an(e,t,r)}return t.flags|=1,e=Ln(i,o),e.ref=t.ref,e.return=t,t.child=e}function Cg(e,t,n,o,r){if(e!==null){var i=e.memoizedProps;if(ei(i,o)&&e.ref===t.ref)if(et=!1,t.pendingProps=o=i,(e.lanes&r)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,an(e,t,r)}return Wa(e,t,n,o,r)}function Tg(e,t,n){var o=t.pendingProps,r=o.children,i=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Fo,lt),lt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Fo,lt),lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,me(Fo,lt),lt|=o}else i!==null?(o=i.baseLanes|n,t.memoizedState=null):o=n,me(Fo,lt),lt|=o;return Ye(e,t,r,n),t.child}function Ng(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wa(e,t,n,o,r){var i=ot(n)?lo:$e.current;return i=Zo(t,i),Bo(t,r),n=pc(e,t,n,o,i,r),o=hc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,an(e,t,r)):(Ee&&o&&tc(t),t.flags|=1,Ye(e,t,n,r),t.child)}function sf(e,t,n,o,r){if(ot(n)){var i=!0;Ts(t)}else i=!1;if(Bo(t,r),t.stateNode===null)is(e,t),Sg(t,n,o),Ja(t,n,o,r),o=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=wt(c):(c=ot(n)?lo:$e.current,c=Zo(t,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==o||u!==c)&&jd(t,s,o,c),xn=!1;var h=t.memoizedState;s.state=h,Ms(t,o,s,r),u=t.memoizedState,l!==o||h!==u||nt.current||xn?(typeof f=="function"&&(Oa(t,n,f,o),u=t.memoizedState),(l=xn||Zd(t,n,l,o,h,u,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=u),s.props=o,s.state=u,s.context=c,o=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,eg(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:At(t.type,l),s.props=c,p=t.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=wt(u):(u=ot(n)?lo:$e.current,u=Zo(t,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||h!==u)&&jd(t,s,o,u),xn=!1,h=t.memoizedState,s.state=h,Ms(t,o,s,r);var v=t.memoizedState;l!==p||h!==v||nt.current||xn?(typeof m=="function"&&(Oa(t,n,m,o),v=t.memoizedState),(c=xn||Zd(t,n,c,o,h,v,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,v,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=v),s.props=o,s.state=v,s.context=u,o=c):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return Ka(e,t,n,o,i,r)}function Ka(e,t,n,o,r,i){Ng(e,t);var s=(t.flags&128)!==0;if(!o&&!s)return r&&qd(t,n,!1),an(e,t,i);o=t.stateNode,Yx.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&s?(t.child=er(t,e.child,null,i),t.child=er(t,null,l,i)):Ye(e,t,l,i),t.memoizedState=o.state,r&&qd(t,n,!0),t.child}function Ig(e){var t=e.stateNode;t.pendingContext?$d(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$d(e,t.context,!1),uc(e,t.containerInfo)}function lf(e,t,n,o,r){return jo(),oc(r),t.flags|=256,Ye(e,t,n,o),t.child}var Xa={dehydrated:null,treeContext:null,retryLane:0};function Qa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ag(e,t,n){var o=t.pendingProps,r=xe.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),me(xe,r&1),e===null)return $a(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,i?(o=t.mode,i=t.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=dl(s,o,0,null),e=io(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Qa(n),t.memoizedState=Xa,e):yc(t,s));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Wx(e,t,s,o,l,r,n);if(i){i=o.fallback,s=t.mode,r=e.child,l=r.sibling;var u={mode:"hidden",children:o.children};return!(s&1)&&t.child!==r?(o=t.child,o.childLanes=0,o.pendingProps=u,t.deletions=null):(o=Ln(r,u),o.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Ln(l,i):(i=io(i,s,n,null),i.flags|=2),i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,s=e.child.memoizedState,s=s===null?Qa(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Xa,o}return i=e.child,e=i.sibling,o=Ln(i,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function yc(e,t){return t=dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bi(e,t,n,o){return o!==null&&oc(o),er(t,e.child,null,n),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wx(e,t,n,o,r,i,s){if(n)return t.flags&256?(t.flags&=-257,o=jl(Error(O(422))),bi(e,t,s,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=o.fallback,r=t.mode,o=dl({mode:"visible",children:o.children},r,0,null),i=io(i,r,s,null),i.flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,t.mode&1&&er(t,e.child,null,s),t.child.memoizedState=Qa(s),t.memoizedState=Xa,i);if(!(t.mode&1))return bi(e,t,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var l=o.dgst;return o=l,i=Error(O(419)),o=jl(i,o,void 0),bi(e,t,s,o)}if(l=(s&e.childLanes)!==0,et||l){if(o=Fe,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ln(e,r),Dt(o,e,r,-1))}return wc(),o=jl(Error(O(421))),bi(e,t,s,o)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=lS.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,at=Pn(r.nextSibling),ut=t,Ee=!0,Mt=null,e!==null&&(mt[gt++]=en,mt[gt++]=tn,mt[gt++]=ao,en=e.id,tn=e.overflow,ao=t),t=yc(t,o.children),t.flags|=4096,t)}function af(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),qa(e.return,t,n)}function ea(e,t,n,o,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Rg(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(Ye(e,t,o.children,n),o=xe.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&af(e,n,t);else if(e.tag===19)af(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(me(xe,o),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Ps(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ea(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ps(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ea(t,!0,n,null,i);break;case"together":ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kx(e,t,n){switch(t.tag){case 3:Ig(t),jo();break;case 5:tg(t);break;case 1:ot(t.type)&&Ts(t);break;case 4:uc(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;me(As,o._currentValue),o._currentValue=r;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(me(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?Ag(e,t,n):(me(xe,xe.current&1),e=an(e,t,n),e!==null?e.sibling:null);me(xe,xe.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Rg(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),me(xe,xe.current),o)break;return null;case 22:case 23:return t.lanes=0,Tg(e,t,n)}return an(e,t,n)}var Mg,Za,Pg,kg;Mg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Za=function(){};Pg=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,to(Jt.current);var i=null;switch(n){case"input":r=xa(e,r),o=xa(e,o),i=[];break;case"select":r=_e({},r,{value:void 0}),o=_e({},o,{value:void 0}),i=[];break;case"textarea":r=wa(e,r),o=wa(e,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ws)}Ta(n,o);var s;n=null;for(c in r)if(!o.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yr.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in o){var u=o[c];if(l=r!=null?r[c]:void 0,o.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yr.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ge("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};kg=function(e,t,n,o){n!==o&&(t.flags|=4)};function _r(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Xx(e,t,n){var o=t.pendingProps;switch(nc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return ot(t.type)&&Cs(),Ge(t),null;case 3:return o=t.stateNode,tr(),ve(nt),ve($e),dc(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ui(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(su(Mt),Mt=null))),Za(e,t),Ge(t),null;case 5:cc(t);var r=to(ii.current);if(n=t.type,e!==null&&t.stateNode!=null)Pg(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(O(166));return Ge(t),null}if(e=to(Jt.current),Ui(t)){o=t.stateNode,n=t.type;var i=t.memoizedProps;switch(o[qt]=t,o[oi]=i,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",o),ge("close",o);break;case"iframe":case"object":case"embed":ge("load",o);break;case"video":case"audio":for(r=0;r<Dr.length;r++)ge(Dr[r],o);break;case"source":ge("error",o);break;case"img":case"image":case"link":ge("error",o),ge("load",o);break;case"details":ge("toggle",o);break;case"input":gd(o,i),ge("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},ge("invalid",o);break;case"textarea":vd(o,i),ge("invalid",o)}Ta(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?o.textContent!==l&&(i.suppressHydrationWarning!==!0&&Li(o.textContent,l,e),r=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Li(o.textContent,l,e),r=["children",""+l]):Yr.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ge("scroll",o)}switch(n){case"input":Ii(o),yd(o,i,!0);break;case"textarea":Ii(o),Ed(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=ws)}o=r,t.updateQueue=o,o!==null&&(t.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),n==="select"&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[qt]=t,e[oi]=o,Mg(e,t,!1,!1),t.stateNode=e;e:{switch(s=Na(n,o),n){case"dialog":ge("cancel",e),ge("close",e),r=o;break;case"iframe":case"object":case"embed":ge("load",e),r=o;break;case"video":case"audio":for(r=0;r<Dr.length;r++)ge(Dr[r],e);r=o;break;case"source":ge("error",e),r=o;break;case"img":case"image":case"link":ge("error",e),ge("load",e),r=o;break;case"details":ge("toggle",e),r=o;break;case"input":gd(e,o),r=xa(e,o),ge("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=_e({},o,{value:void 0}),ge("invalid",e);break;case"textarea":vd(e,o),r=wa(e,o),ge("invalid",e);break;default:r=o}Ta(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?um(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lm(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wr(e,u):typeof u=="number"&&Wr(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yr.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",e):u!=null&&Bu(e,i,u,s))}switch(n){case"input":Ii(e),yd(e,o,!1);break;case"textarea":Ii(e),Ed(e);break;case"option":o.value!=null&&e.setAttribute("value",""+bn(o.value));break;case"select":e.multiple=!!o.multiple,i=o.value,i!=null?Vo(e,!!o.multiple,i,!1):o.defaultValue!=null&&Vo(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=ws)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)kg(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(O(166));if(n=to(ii.current),to(Jt.current),Ui(t)){if(o=t.stateNode,n=t.memoizedProps,o[qt]=t,(i=o.nodeValue!==n)&&(e=ut,e!==null))switch(e.tag){case 3:Li(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Li(o.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[qt]=t,t.stateNode=o}return Ge(t),null;case 13:if(ve(xe),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&at!==null&&t.mode&1&&!(t.flags&128))Xm(),jo(),t.flags|=98560,i=!1;else if(i=Ui(t),o!==null&&o.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[qt]=t}else jo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),i=!1}else Mt!==null&&(su(Mt),Mt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Me===0&&(Me=3):wc())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return tr(),Za(e,t),e===null&&ti(t.stateNode.containerInfo),Ge(t),null;case 10:return sc(t.type._context),Ge(t),null;case 17:return ot(t.type)&&Cs(),Ge(t),null;case 19:if(ve(xe),i=t.memoizedState,i===null)return Ge(t),null;if(o=(t.flags&128)!==0,s=i.rendering,s===null)if(o)_r(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ps(e),s!==null){for(t.flags|=128,_r(i,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)i=n,e=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(xe,xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ie()>or&&(t.flags|=128,o=!0,_r(i,!1),t.lanes=4194304)}else{if(!o)if(e=Ps(s),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ee)return Ge(t),null}else 2*Ie()-i.renderingStartTime>or&&n!==1073741824&&(t.flags|=128,o=!0,_r(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ie(),t.sibling=null,n=xe.current,me(xe,o?n&1|2:n&1),t):(Ge(t),null);case 22:case 23:return _c(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?lt&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Qx(e,t){switch(nc(t),t.tag){case 1:return ot(t.type)&&Cs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tr(),ve(nt),ve($e),dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cc(t),null;case 13:if(ve(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));jo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(xe),null;case 4:return tr(),null;case 10:return sc(t.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var Hi=!1,Be=!1,Zx=typeof WeakSet=="function"?WeakSet:Set,j=null;function Do(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Te(e,t,o)}else n.current=null}function ja(e,t,n){try{n()}catch(o){Te(e,t,o)}}var uf=!1;function jx(e,t){if(Ua=xs,e=Vm(),ec(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,p=e,h=null;t:for(;;){for(var m;p!==n||r!==0&&p.nodeType!==3||(l=s+r),p!==i||o!==0&&p.nodeType!==3||(u=s+o),p.nodeType===3&&(s+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===e)break t;if(h===n&&++c===r&&(l=s),h===i&&++f===o&&(u=s),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},xs=!1,j=t;j!==null;)if(t=j,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,j=e;else for(;j!==null;){t=j;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,C=v.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:At(t.type,x),C);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){Te(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,j=e;break}j=t.return}return v=uf,uf=!1,v}function $r(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&ja(t,n,i)}r=r.next}while(r!==o)}}function ul(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function eu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dg(e){var t=e.alternate;t!==null&&(e.alternate=null,Dg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[oi],delete t[Ga],delete t[Lx],delete t[Ux])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fg(e){return e.tag===5||e.tag===3||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tu(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ws));else if(o!==4&&(e=e.child,e!==null))for(tu(e,t,n),e=e.sibling;e!==null;)tu(e,t,n),e=e.sibling}function nu(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(nu(e,t,n),e=e.sibling;e!==null;)nu(e,t,n),e=e.sibling}var Le=null,Rt=!1;function yn(e,t,n){for(n=n.child;n!==null;)Lg(e,t,n),n=n.sibling}function Lg(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(tl,n)}catch{}switch(n.tag){case 5:Be||Do(n,t);case 6:var o=Le,r=Rt;Le=null,yn(e,t,n),Le=o,Rt=r,Le!==null&&(Rt?(e=Le,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Rt?(e=Le,n=n.stateNode,e.nodeType===8?Yl(e.parentNode,n):e.nodeType===1&&Yl(e,n),Zr(e)):Yl(Le,n.stateNode));break;case 4:o=Le,r=Rt,Le=n.stateNode.containerInfo,Rt=!0,yn(e,t,n),Le=o,Rt=r;break;case 0:case 11:case 14:case 15:if(!Be&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&ja(n,t,s),r=r.next}while(r!==o)}yn(e,t,n);break;case 1:if(!Be&&(Do(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(l){Te(n,t,l)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(Be=(o=Be)||n.memoizedState!==null,yn(e,t,n),Be=o):yn(e,t,n);break;default:yn(e,t,n)}}function df(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Zx),t.forEach(function(o){var r=aS.bind(null,e,o);n.has(o)||(n.add(o),o.then(r,r))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,Rt=!1;break e;case 3:Le=l.stateNode.containerInfo,Rt=!0;break e;case 4:Le=l.stateNode.containerInfo,Rt=!0;break e}l=l.return}if(Le===null)throw Error(O(160));Lg(i,s,r),Le=null,Rt=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(c){Te(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ug(t,e),t=t.sibling}function Ug(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Bt(e),o&4){try{$r(3,e,e.return),ul(3,e)}catch(x){Te(e,e.return,x)}try{$r(5,e,e.return)}catch(x){Te(e,e.return,x)}}break;case 1:It(t,e),Bt(e),o&512&&n!==null&&Do(n,n.return);break;case 5:if(It(t,e),Bt(e),o&512&&n!==null&&Do(n,n.return),e.flags&32){var r=e.stateNode;try{Wr(r,"")}catch(x){Te(e,e.return,x)}}if(o&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rm(r,i),Na(l,s);var c=Na(l,i);for(s=0;s<u.length;s+=2){var f=u[s],p=u[s+1];f==="style"?um(r,p):f==="dangerouslySetInnerHTML"?lm(r,p):f==="children"?Wr(r,p):Bu(r,f,p,c)}switch(l){case"input":Sa(r,i);break;case"textarea":im(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vo(r,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Vo(r,!!i.multiple,i.defaultValue,!0):Vo(r,!!i.multiple,i.multiple?[]:"",!1))}r[oi]=i}catch(x){Te(e,e.return,x)}}break;case 6:if(It(t,e),Bt(e),o&4){if(e.stateNode===null)throw Error(O(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(x){Te(e,e.return,x)}}break;case 3:if(It(t,e),Bt(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Zr(t.containerInfo)}catch(x){Te(e,e.return,x)}break;case 4:It(t,e),Bt(e);break;case 13:It(t,e),Bt(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(xc=Ie())),o&4&&df(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Be=(c=Be)||f,It(t,e),Be=c):It(t,e),Bt(e),o&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(j=e,f=e.child;f!==null;){for(p=j=f;j!==null;){switch(h=j,m=h.child,h.tag){case 0:case 11:case 14:case 15:$r(4,h,h.return);break;case 1:Do(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){o=h,n=h.return;try{t=o,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Te(o,n,x)}}break;case 5:Do(h,h.return);break;case 22:if(h.memoizedState!==null){pf(p);continue}}m!==null?(m.return=h,j=m):pf(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=am("display",s))}catch(x){Te(e,e.return,x)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(x){Te(e,e.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:It(t,e),Bt(e),o&4&&df(e);break;case 21:break;default:It(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Fg(n)){var o=n;break e}n=n.return}throw Error(O(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Wr(r,""),o.flags&=-33);var i=cf(e);nu(e,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,l=cf(e);tu(e,l,s);break;default:throw Error(O(161))}}catch(u){Te(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eS(e,t,n){j=e,Vg(e)}function Vg(e,t,n){for(var o=(e.mode&1)!==0;j!==null;){var r=j,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||Hi;if(!s){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Be;l=Hi;var c=Be;if(Hi=s,(Be=u)&&!c)for(j=r;j!==null;)s=j,u=s.child,s.tag===22&&s.memoizedState!==null?hf(r):u!==null?(u.return=s,j=u):hf(r);for(;i!==null;)j=i,Vg(i),i=i.sibling;j=r,Hi=l,Be=c}ff(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,j=i):ff(e)}}function ff(e){for(;j!==null;){var t=j;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||ul(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Be)if(n===null)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:At(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Kd(t,i,o);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kd(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Zr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Be||t.flags&512&&eu(t)}catch(h){Te(t,t.return,h)}}if(t===e){j=null;break}if(n=t.sibling,n!==null){n.return=t.return,j=n;break}j=t.return}}function pf(e){for(;j!==null;){var t=j;if(t===e){j=null;break}var n=t.sibling;if(n!==null){n.return=t.return,j=n;break}j=t.return}}function hf(e){for(;j!==null;){var t=j;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ul(4,t)}catch(u){Te(t,n,u)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var r=t.return;try{o.componentDidMount()}catch(u){Te(t,r,u)}}var i=t.return;try{eu(t)}catch(u){Te(t,i,u)}break;case 5:var s=t.return;try{eu(t)}catch(u){Te(t,s,u)}}}catch(u){Te(t,t.return,u)}if(t===e){j=null;break}var l=t.sibling;if(l!==null){l.return=t.return,j=l;break}j=t.return}}var tS=Math.ceil,Fs=fn.ReactCurrentDispatcher,vc=fn.ReactCurrentOwner,xt=fn.ReactCurrentBatchConfig,ue=0,Fe=null,Ae=null,Ue=0,lt=0,Fo=zn(0),Me=0,ui=null,co=0,cl=0,Ec=0,qr=null,je=null,xc=0,or=1/0,Zt=null,Ls=!1,ou=null,Dn=null,Gi=!1,In=null,Us=0,Or=0,ru=null,ss=-1,ls=0;function We(){return ue&6?Ie():ss!==-1?ss:ss=Ie()}function Fn(e){return e.mode&1?ue&2&&Ue!==0?Ue&-Ue:bx.transition!==null?(ls===0&&(ls=Sm()),ls):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Am(e.type)),e):1}function Dt(e,t,n,o){if(50<Or)throw Or=0,ru=null,Error(O(185));vi(e,n,o),(!(ue&2)||e!==Fe)&&(e===Fe&&(!(ue&2)&&(cl|=n),Me===4&&Cn(e,Ue)),rt(e,o),n===1&&ue===0&&!(t.mode&1)&&(or=Ie()+500,sl&&$n()))}function rt(e,t){var n=e.callbackNode;bE(e,t);var o=Es(e,e===Fe?Ue:0);if(o===0)n!==null&&_d(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&_d(n),t===1)e.tag===0?Vx(mf.bind(null,e)):Ym(mf.bind(null,e)),Dx(function(){!(ue&6)&&$n()}),n=null;else{switch(_m(o)){case 1:n=Ju;break;case 4:n=Em;break;case 16:n=vs;break;case 536870912:n=xm;break;default:n=vs}n=Og(n,bg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bg(e,t){if(ss=-1,ls=0,ue&6)throw Error(O(327));var n=e.callbackNode;if(zo()&&e.callbackNode!==n)return null;var o=Es(e,e===Fe?Ue:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Vs(e,o);else{t=o;var r=ue;ue|=2;var i=Gg();(Fe!==e||Ue!==t)&&(Zt=null,or=Ie()+500,ro(e,t));do try{rS();break}catch(l){Hg(e,l)}while(!0);ic(),Fs.current=i,ue=r,Ae!==null?t=0:(Fe=null,Ue=0,t=Me)}if(t!==0){if(t===2&&(r=Pa(e),r!==0&&(o=r,t=iu(e,r))),t===1)throw n=ui,ro(e,0),Cn(e,o),rt(e,Ie()),n;if(t===6)Cn(e,o);else{if(r=e.current.alternate,!(o&30)&&!nS(r)&&(t=Vs(e,o),t===2&&(i=Pa(e),i!==0&&(o=i,t=iu(e,i))),t===1))throw n=ui,ro(e,0),Cn(e,o),rt(e,Ie()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(O(345));case 2:Qn(e,je,Zt);break;case 3:if(Cn(e,o),(o&130023424)===o&&(t=xc+500-Ie(),10<t)){if(Es(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){We(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Ha(Qn.bind(null,e,je,Zt),t);break}Qn(e,je,Zt);break;case 4:if(Cn(e,o),(o&4194240)===o)break;for(t=e.eventTimes,r=-1;0<o;){var s=31-kt(o);i=1<<s,s=t[s],s>r&&(r=s),o&=~i}if(o=r,o=Ie()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*tS(o/1960))-o,10<o){e.timeoutHandle=Ha(Qn.bind(null,e,je,Zt),o);break}Qn(e,je,Zt);break;case 5:Qn(e,je,Zt);break;default:throw Error(O(329))}}}return rt(e,Ie()),e.callbackNode===n?bg.bind(null,e):null}function iu(e,t){var n=qr;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=Vs(e,t),e!==2&&(t=je,je=n,t!==null&&su(t)),e}function su(e){je===null?je=e:je.push.apply(je,e)}function nS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!Ft(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cn(e,t){for(t&=~Ec,t&=~cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kt(t),o=1<<n;e[n]=-1,t&=~o}}function mf(e){if(ue&6)throw Error(O(327));zo();var t=Es(e,0);if(!(t&1))return rt(e,Ie()),null;var n=Vs(e,t);if(e.tag!==0&&n===2){var o=Pa(e);o!==0&&(t=o,n=iu(e,o))}if(n===1)throw n=ui,ro(e,0),Cn(e,t),rt(e,Ie()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qn(e,je,Zt),rt(e,Ie()),null}function Sc(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(or=Ie()+500,sl&&$n())}}function fo(e){In!==null&&In.tag===0&&!(ue&6)&&zo();var t=ue;ue|=1;var n=xt.transition,o=fe;try{if(xt.transition=null,fe=1,e)return e()}finally{fe=o,xt.transition=n,ue=t,!(ue&6)&&$n()}}function _c(){lt=Fo.current,ve(Fo)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kx(n)),Ae!==null)for(n=Ae.return;n!==null;){var o=n;switch(nc(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Cs();break;case 3:tr(),ve(nt),ve($e),dc();break;case 5:cc(o);break;case 4:tr();break;case 13:ve(xe);break;case 19:ve(xe);break;case 10:sc(o.type._context);break;case 22:case 23:_c()}n=n.return}if(Fe=e,Ae=e=Ln(e.current,null),Ue=lt=t,Me=0,ui=null,Ec=cl=co=0,je=qr=null,eo!==null){for(t=0;t<eo.length;t++)if(n=eo[t],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}eo=null}return e}function Hg(e,t){do{var n=Ae;try{if(ic(),os.current=Ds,ks){for(var o=Se.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}ks=!1}if(uo=0,De=Re=Se=null,zr=!1,si=0,vc.current=null,n===null||n.return===null){Me=1,ui=t,Ae=null;break}e:{var i=e,s=n.return,l=n,u=t;if(t=Ue,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=tf(s);if(m!==null){m.flags&=-257,nf(m,s,l,i,t),m.mode&1&&ef(i,c,t),t=m,u=c;var v=t.updateQueue;if(v===null){var x=new Set;x.add(u),t.updateQueue=x}else v.add(u);break e}else{if(!(t&1)){ef(i,c,t),wc();break e}u=Error(O(426))}}else if(Ee&&l.mode&1){var C=tf(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),nf(C,s,l,i,t),oc(nr(u,l));break e}}i=u=nr(u,l),Me!==4&&(Me=2),qr===null?qr=[i]:qr.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=_g(i,u,t);Wd(i,g);break e;case 1:l=u;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Dn===null||!Dn.has(E)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=wg(i,l,t);Wd(i,_);break e}}i=i.return}while(i!==null)}zg(n)}catch(w){t=w,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function Gg(){var e=Fs.current;return Fs.current=Ds,e===null?Ds:e}function wc(){(Me===0||Me===3||Me===2)&&(Me=4),Fe===null||!(co&268435455)&&!(cl&268435455)||Cn(Fe,Ue)}function Vs(e,t){var n=ue;ue|=2;var o=Gg();(Fe!==e||Ue!==t)&&(Zt=null,ro(e,t));do try{oS();break}catch(r){Hg(e,r)}while(!0);if(ic(),ue=n,Fs.current=o,Ae!==null)throw Error(O(261));return Fe=null,Ue=0,Me}function oS(){for(;Ae!==null;)Bg(Ae)}function rS(){for(;Ae!==null&&!RE();)Bg(Ae)}function Bg(e){var t=qg(e.alternate,e,lt);e.memoizedProps=e.pendingProps,t===null?zg(e):Ae=t,vc.current=null}function zg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Qx(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Ae=null;return}}else if(n=Xx(n,t,lt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Me===0&&(Me=5)}function Qn(e,t,n){var o=fe,r=xt.transition;try{xt.transition=null,fe=1,iS(e,t,n,o)}finally{xt.transition=r,fe=o}return null}function iS(e,t,n,o){do zo();while(In!==null);if(ue&6)throw Error(O(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(HE(e,i),e===Fe&&(Ae=Fe=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gi||(Gi=!0,Og(vs,function(){return zo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var s=fe;fe=1;var l=ue;ue|=4,vc.current=null,jx(e,n),Ug(n,e),Tx(Va),xs=!!Ua,Va=Ua=null,e.current=n,eS(n),ME(),ue=l,fe=s,xt.transition=i}else e.current=n;if(Gi&&(Gi=!1,In=e,Us=r),i=e.pendingLanes,i===0&&(Dn=null),DE(n.stateNode),rt(e,Ie()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Ls)throw Ls=!1,e=ou,ou=null,e;return Us&1&&e.tag!==0&&zo(),i=e.pendingLanes,i&1?e===ru?Or++:(Or=0,ru=e):Or=0,$n(),null}function zo(){if(In!==null){var e=_m(Us),t=xt.transition,n=fe;try{if(xt.transition=null,fe=16>e?16:e,In===null)var o=!1;else{if(e=In,In=null,Us=0,ue&6)throw Error(O(331));var r=ue;for(ue|=4,j=e.current;j!==null;){var i=j,s=i.child;if(j.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(j=c;j!==null;){var f=j;switch(f.tag){case 0:case 11:case 15:$r(8,f,i)}var p=f.child;if(p!==null)p.return=f,j=p;else for(;j!==null;){f=j;var h=f.sibling,m=f.return;if(Dg(f),f===c){j=null;break}if(h!==null){h.return=m,j=h;break}j=m}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}j=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,j=s;else e:for(;j!==null;){if(i=j,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$r(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,j=g;break e}j=i.return}}var y=e.current;for(j=y;j!==null;){s=j;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,j=E;else e:for(s=y;j!==null;){if(l=j,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ul(9,l)}}catch(w){Te(l,l.return,w)}if(l===s){j=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,j=_;break e}j=l.return}}if(ue=r,$n(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(tl,e)}catch{}o=!0}return o}finally{fe=n,xt.transition=t}}return!1}function gf(e,t,n){t=nr(n,t),t=_g(e,t,1),e=kn(e,t,1),t=We(),e!==null&&(vi(e,1,t),rt(e,t))}function Te(e,t,n){if(e.tag===3)gf(e,e,n);else for(;t!==null;){if(t.tag===3){gf(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Dn===null||!Dn.has(o))){e=nr(n,e),e=wg(t,e,1),t=kn(t,e,1),e=We(),t!==null&&(vi(t,1,e),rt(t,e));break}}t=t.return}}function sS(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Fe===e&&(Ue&n)===n&&(Me===4||Me===3&&(Ue&130023424)===Ue&&500>Ie()-xc?ro(e,0):Ec|=n),rt(e,t)}function $g(e,t){t===0&&(e.mode&1?(t=Mi,Mi<<=1,!(Mi&130023424)&&(Mi=4194304)):t=1);var n=We();e=ln(e,t),e!==null&&(vi(e,t,n),rt(e,n))}function lS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$g(e,n)}function aS(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(O(314))}o!==null&&o.delete(t),$g(e,n)}var qg;qg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Kx(e,t,n);et=!!(e.flags&131072)}else et=!1,Ee&&t.flags&1048576&&Wm(t,Is,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;is(e,t),e=t.pendingProps;var r=Zo(t,$e.current);Bo(t,n),r=pc(null,t,o,e,r,n);var i=hc();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(o)?(i=!0,Ts(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ac(t),r.updater=al,t.stateNode=r,r._reactInternals=t,Ja(t,o,e,n),t=Ka(null,t,o,!0,i,n)):(t.tag=0,Ee&&i&&tc(t),Ye(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(is(e,t),e=t.pendingProps,r=o._init,o=r(o._payload),t.type=o,r=t.tag=cS(o),e=At(o,e),r){case 0:t=Wa(null,t,o,e,n);break e;case 1:t=sf(null,t,o,e,n);break e;case 11:t=of(null,t,o,e,n);break e;case 14:t=rf(null,t,o,At(o.type,e),n);break e}throw Error(O(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:At(o,r),Wa(e,t,o,r,n);case 1:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:At(o,r),sf(e,t,o,r,n);case 3:e:{if(Ig(t),e===null)throw Error(O(387));o=t.pendingProps,i=t.memoizedState,r=i.element,eg(e,t),Ms(t,o,null,n);var s=t.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=nr(Error(O(423)),t),t=lf(e,t,o,n,r);break e}else if(o!==r){r=nr(Error(O(424)),t),t=lf(e,t,o,n,r);break e}else for(at=Pn(t.stateNode.containerInfo.firstChild),ut=t,Ee=!0,Mt=null,n=Zm(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),o===r){t=an(e,t,n);break e}Ye(e,t,o,n)}t=t.child}return t;case 5:return tg(t),e===null&&$a(t),o=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,s=r.children,ba(o,r)?s=null:i!==null&&ba(o,i)&&(t.flags|=32),Ng(e,t),Ye(e,t,s,n),t.child;case 6:return e===null&&$a(t),null;case 13:return Ag(e,t,n);case 4:return uc(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=er(t,null,o,n):Ye(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:At(o,r),of(e,t,o,r,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,i=t.memoizedProps,s=r.value,me(As,o._currentValue),o._currentValue=s,i!==null)if(Ft(i.value,s)){if(i.children===r.children&&!nt.current){t=an(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===o){if(i.tag===1){u=on(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),qa(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(O(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qa(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ye(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,Bo(t,n),r=wt(r),o=o(r),t.flags|=1,Ye(e,t,o,n),t.child;case 14:return o=t.type,r=At(o,t.pendingProps),r=At(o.type,r),rf(e,t,o,r,n);case 15:return Cg(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:At(o,r),is(e,t),t.tag=1,ot(o)?(e=!0,Ts(t)):e=!1,Bo(t,n),Sg(t,o,r),Ja(t,o,r,n),Ka(null,t,o,!0,e,n);case 19:return Rg(e,t,n);case 22:return Tg(e,t,n)}throw Error(O(156,t.tag))};function Og(e,t){return vm(e,t)}function uS(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,n,o){return new uS(e,t,n,o)}function Cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cS(e){if(typeof e=="function")return Cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$u)return 11;if(e===qu)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function as(e,t,n,o,r,i){var s=2;if(o=e,typeof e=="function")Cc(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Co:return io(n.children,r,i,t);case zu:s=8,r|=8;break;case ga:return e=vt(12,n,t,r|2),e.elementType=ga,e.lanes=i,e;case ya:return e=vt(13,n,t,r),e.elementType=ya,e.lanes=i,e;case va:return e=vt(19,n,t,r),e.elementType=va,e.lanes=i,e;case tm:return dl(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jh:s=10;break e;case em:s=9;break e;case $u:s=11;break e;case qu:s=14;break e;case En:s=16,o=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=vt(s,n,t,r),t.elementType=e,t.type=o,t.lanes=i,t}function io(e,t,n,o){return e=vt(7,e,o,t),e.lanes=n,e}function dl(e,t,n,o){return e=vt(22,e,o,t),e.elementType=tm,e.lanes=n,e.stateNode={isHidden:!1},e}function ta(e,t,n){return e=vt(6,e,null,t),e.lanes=n,e}function na(e,t,n){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dS(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Tc(e,t,n,o,r,i,s,l,u){return e=new dS(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(i),e}function fS(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function Jg(e){if(!e)return Hn;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(ot(n))return Jm(e,n,t)}return t}function Yg(e,t,n,o,r,i,s,l,u){return e=Tc(n,o,!0,e,r,i,s,l,u),e.context=Jg(null),n=e.current,o=We(),r=Fn(n),i=on(o,r),i.callback=t??null,kn(n,i,r),e.current.lanes=r,vi(e,r,o),rt(e,o),e}function fl(e,t,n,o){var r=t.current,i=We(),s=Fn(r);return n=Jg(n),t.context===null?t.context=n:t.pendingContext=n,t=on(i,s),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=kn(r,t,s),e!==null&&(Dt(e,r,s,i),ns(e,r,s)),s}function bs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nc(e,t){yf(e,t),(e=e.alternate)&&yf(e,t)}function pS(){return null}var Wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ic(e){this._internalRoot=e}pl.prototype.render=Ic.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));fl(e,t,null,null)};pl.prototype.unmount=Ic.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fo(function(){fl(null,e,null,null)}),t[sn]=null}};function pl(e){this._internalRoot=e}pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wn.length&&t!==0&&t<wn[n].priority;n++);wn.splice(n,0,e),n===0&&Im(e)}};function Ac(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vf(){}function hS(e,t,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var c=bs(s);i.call(c)}}var s=Yg(t,o,e,0,null,!1,!1,"",vf);return e._reactRootContainer=s,e[sn]=s.current,ti(e.nodeType===8?e.parentNode:e),fo(),s}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var l=o;o=function(){var c=bs(u);l.call(c)}}var u=Tc(e,0,!1,null,null,!1,!1,"",vf);return e._reactRootContainer=u,e[sn]=u.current,ti(e.nodeType===8?e.parentNode:e),fo(function(){fl(t,u,n,o)}),u}function ml(e,t,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var l=r;r=function(){var u=bs(s);l.call(u)}}fl(t,s,e,r)}else s=hS(n,t,e,r,o);return bs(s)}wm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kr(t.pendingLanes);n!==0&&(Yu(t,n|1),rt(t,Ie()),!(ue&6)&&(or=Ie()+500,$n()))}break;case 13:fo(function(){var o=ln(e,1);if(o!==null){var r=We();Dt(o,e,1,r)}}),Nc(e,1)}};Wu=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var n=We();Dt(t,e,134217728,n)}Nc(e,134217728)}};Cm=function(e){if(e.tag===13){var t=Fn(e),n=ln(e,t);if(n!==null){var o=We();Dt(n,e,t,o)}Nc(e,t)}};Tm=function(){return fe};Nm=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Aa=function(e,t,n){switch(t){case"input":if(Sa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=il(o);if(!r)throw Error(O(90));om(o),Sa(o,r)}}}break;case"textarea":im(e,n);break;case"select":t=n.value,t!=null&&Vo(e,!!n.multiple,t,!1)}};fm=Sc;pm=fo;var mS={usingClientEntryPoint:!1,Events:[xi,Ao,il,cm,dm,Sc]},wr={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gS={bundleType:wr.bundleType,version:wr.version,rendererPackageName:wr.rendererPackageName,rendererConfig:wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gm(e),e===null?null:e.stateNode},findFiberByHostInstance:wr.findFiberByHostInstance||pS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bi.isDisabled&&Bi.supportsFiber)try{tl=Bi.inject(gS),Ot=Bi}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ac(t))throw Error(O(200));return fS(e,t,null,n)};ft.createRoot=function(e,t){if(!Ac(e))throw Error(O(299));var n=!1,o="",r=Wg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Tc(e,1,!1,null,null,n,!1,o,r),e[sn]=t.current,ti(e.nodeType===8?e.parentNode:e),new Ic(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=gm(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return fo(e)};ft.hydrate=function(e,t,n){if(!hl(t))throw Error(O(200));return ml(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Ac(e))throw Error(O(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=Wg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Yg(t,null,e,1,n??null,r,!1,i,s),e[sn]=t.current,ti(e),o)for(e=0;e<o.length;e++)n=o[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new pl(t)};ft.render=function(e,t,n){if(!hl(t))throw Error(O(200));return ml(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!hl(e))throw Error(O(40));return e._reactRootContainer?(fo(function(){ml(null,null,e,!1,function(){e._reactRootContainer=null,e[sn]=null})}),!0):!1};ft.unstable_batchedUpdates=Sc;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!hl(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return ml(e,t,n,!1,o)};ft.version="18.3.1-next-f1338f8080-20240426";function Kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kg)}catch(e){console.error(e)}}Kg(),Kh.exports=ft;var yS=Kh.exports,Ef=yS;ha.createRoot=Ef.createRoot,ha.hydrateRoot=Ef.hydrateRoot;function Oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=Oe(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Xg={exports:{}},Qg={},Zg={exports:{}},jg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rr=R;function vS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ES=typeof Object.is=="function"?Object.is:vS,xS=rr.useState,SS=rr.useEffect,_S=rr.useLayoutEffect,wS=rr.useDebugValue;function CS(e,t){var n=t(),o=xS({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return _S(function(){r.value=n,r.getSnapshot=t,oa(r)&&i({inst:r})},[e,n,t]),SS(function(){return oa(r)&&i({inst:r}),e(function(){oa(r)&&i({inst:r})})},[e]),wS(n),n}function oa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ES(e,n)}catch{return!0}}function TS(e,t){return t()}var NS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?TS:CS;jg.useSyncExternalStore=rr.useSyncExternalStore!==void 0?rr.useSyncExternalStore:NS;Zg.exports=jg;var IS=Zg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gl=R,AS=IS;function RS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MS=typeof Object.is=="function"?Object.is:RS,PS=AS.useSyncExternalStore,kS=gl.useRef,DS=gl.useEffect,FS=gl.useMemo,LS=gl.useDebugValue;Qg.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=kS(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=FS(function(){function u(m){if(!c){if(c=!0,f=m,m=o(m),r!==void 0&&s.hasValue){var v=s.value;if(r(v,m))return p=v}return p=m}if(v=p,MS(f,m))return v;var x=o(m);return r!==void 0&&r(v,x)?(f=m,v):(f=m,p=x)}var c=!1,f,p,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,o,r]);var l=PS(e,i[0],i[1]);return DS(function(){s.hasValue=!0,s.value=l},[l]),LS(l),l};Xg.exports=Qg;var US=Xg.exports;const VS=Vh(US),bS={},xf=e=>{let t;const n=new Set,o=(f,p)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const m=t;t=p??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,m))}},r=()=>t,u={setState:o,getState:r,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(bS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(o,r,u);return u},HS=e=>e?xf(e):xf,{useDebugValue:GS}=b,{useSyncExternalStoreWithSelector:BS}=VS,zS=e=>e;function e0(e,t=zS,n){const o=BS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return GS(o),o}const Sf=(e,t)=>{const n=HS(e),o=(r,i=t)=>e0(n,r,i);return Object.assign(o,n),o},$S=(e,t)=>e?Sf(e,t):Sf;function qe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var qS={value:()=>{}};function yl(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new us(n)}function us(e){this._=e}function OS(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}us.prototype=yl.prototype={constructor:us,on:function(e,t){var n=this._,o=OS(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=JS(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=_f(n[r],e.name,t);else if(t==null)for(r in n)n[r]=_f(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new us(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function JS(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function _f(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=qS,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var lu="http://www.w3.org/1999/xhtml";const wf={svg:"http://www.w3.org/2000/svg",xhtml:lu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wf.hasOwnProperty(t)?{space:wf[t],local:e}:e}function YS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lu&&t.documentElement.namespaceURI===lu?t.createElement(e):t.createElementNS(n,e)}}function WS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function t0(e){var t=vl(e);return(t.local?WS:YS)(t)}function KS(){}function Rc(e){return e==null?KS:function(){return this.querySelector(e)}}function XS(e){typeof e!="function"&&(e=Rc(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=new Array(s),u,c,f=0;f<s;++f)(u=i[f])&&(c=e.call(u,u.__data__,f,i))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new dt(o,this._parents)}function QS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ZS(){return[]}function n0(e){return e==null?ZS:function(){return this.querySelectorAll(e)}}function jS(e){return function(){return QS(e.apply(this,arguments))}}function e_(e){typeof e=="function"?e=jS(e):e=n0(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,c=0;c<l;++c)(u=s[c])&&(o.push(e.call(u,u.__data__,c,s)),r.push(u));return new dt(o,r)}function o0(e){return function(){return this.matches(e)}}function r0(e){return function(t){return t.matches(e)}}var t_=Array.prototype.find;function n_(e){return function(){return t_.call(this.children,e)}}function o_(){return this.firstElementChild}function r_(e){return this.select(e==null?o_:n_(typeof e=="function"?e:r0(e)))}var i_=Array.prototype.filter;function s_(){return Array.from(this.children)}function l_(e){return function(){return i_.call(this.children,e)}}function a_(e){return this.selectAll(e==null?s_:l_(typeof e=="function"?e:r0(e)))}function u_(e){typeof e!="function"&&(e=o0(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=[],u,c=0;c<s;++c)(u=i[c])&&e.call(u,u.__data__,c,i)&&l.push(u);return new dt(o,this._parents)}function i0(e){return new Array(e.length)}function c_(){return new dt(this._enter||this._groups.map(i0),this._parents)}function Hs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hs.prototype={constructor:Hs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function d_(e){return function(){return e}}function f_(e,t,n,o,r,i){for(var s=0,l,u=t.length,c=i.length;s<c;++s)(l=t[s])?(l.__data__=i[s],o[s]=l):n[s]=new Hs(e,i[s]);for(;s<u;++s)(l=t[s])&&(r[s]=l)}function p_(e,t,n,o,r,i,s){var l,u,c=new Map,f=t.length,p=i.length,h=new Array(f),m;for(l=0;l<f;++l)(u=t[l])&&(h[l]=m=s.call(u,u.__data__,l,t)+"",c.has(m)?r[l]=u:c.set(m,u));for(l=0;l<p;++l)m=s.call(e,i[l],l,i)+"",(u=c.get(m))?(o[l]=u,u.__data__=i[l],c.delete(m)):n[l]=new Hs(e,i[l]);for(l=0;l<f;++l)(u=t[l])&&c.get(h[l])===u&&(r[l]=u)}function h_(e){return e.__data__}function m_(e,t){if(!arguments.length)return Array.from(this,h_);var n=t?p_:f_,o=this._parents,r=this._groups;typeof e!="function"&&(e=d_(e));for(var i=r.length,s=new Array(i),l=new Array(i),u=new Array(i),c=0;c<i;++c){var f=o[c],p=r[c],h=p.length,m=g_(e.call(f,f&&f.__data__,c,o)),v=m.length,x=l[c]=new Array(v),C=s[c]=new Array(v),g=u[c]=new Array(h);n(f,p,x,C,g,m,t);for(var y=0,E=0,_,w;y<v;++y)if(_=x[y]){for(y>=E&&(E=y+1);!(w=C[E])&&++E<v;);_._next=w||null}}return s=new dt(s,o),s._enter=l,s._exit=u,s}function g_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function y_(){return new dt(this._exit||this._groups.map(i0),this._parents)}function v_(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function E_(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),l=new Array(r),u=0;u<s;++u)for(var c=n[u],f=o[u],p=c.length,h=l[u]=new Array(p),m,v=0;v<p;++v)(m=c[v]||f[v])&&(h[v]=m);for(;u<r;++u)l[u]=n[u];return new dt(l,this._parents)}function x_(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function S_(e){e||(e=__);function t(p,h){return p&&h?e(p.__data__,h.__data__):!p-!h}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],l=s.length,u=r[i]=new Array(l),c,f=0;f<l;++f)(c=s[f])&&(u[f]=c);u.sort(t)}return new dt(r,this._parents).order()}function __(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function C_(){return Array.from(this)}function T_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function N_(){let e=0;for(const t of this)++e;return e}function I_(){return!this.node()}function A_(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,l;i<s;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function R_(e){return function(){this.removeAttribute(e)}}function M_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P_(e,t){return function(){this.setAttribute(e,t)}}function k_(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function D_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function F_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function L_(e,t){var n=vl(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?M_:R_:typeof t=="function"?n.local?F_:D_:n.local?k_:P_)(n,t))}function s0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function U_(e){return function(){this.style.removeProperty(e)}}function V_(e,t,n){return function(){this.style.setProperty(e,t,n)}}function b_(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function H_(e,t,n){return arguments.length>1?this.each((t==null?U_:typeof t=="function"?b_:V_)(e,t,n??"")):ir(this.node(),e)}function ir(e,t){return e.style.getPropertyValue(t)||s0(e).getComputedStyle(e,null).getPropertyValue(t)}function G_(e){return function(){delete this[e]}}function B_(e,t){return function(){this[e]=t}}function z_(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $_(e,t){return arguments.length>1?this.each((t==null?G_:typeof t=="function"?z_:B_)(e,t)):this.node()[e]}function l0(e){return e.trim().split(/^|\s+/)}function Mc(e){return e.classList||new a0(e)}function a0(e){this._node=e,this._names=l0(e.getAttribute("class")||"")}a0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function u0(e,t){for(var n=Mc(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function c0(e,t){for(var n=Mc(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function q_(e){return function(){u0(this,e)}}function O_(e){return function(){c0(this,e)}}function J_(e,t){return function(){(t.apply(this,arguments)?u0:c0)(this,e)}}function Y_(e,t){var n=l0(e+"");if(arguments.length<2){for(var o=Mc(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?J_:t?q_:O_)(n,t))}function W_(){this.textContent=""}function K_(e){return function(){this.textContent=e}}function X_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Q_(e){return arguments.length?this.each(e==null?W_:(typeof e=="function"?X_:K_)(e)):this.node().textContent}function Z_(){this.innerHTML=""}function j_(e){return function(){this.innerHTML=e}}function ew(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tw(e){return arguments.length?this.each(e==null?Z_:(typeof e=="function"?ew:j_)(e)):this.node().innerHTML}function nw(){this.nextSibling&&this.parentNode.appendChild(this)}function ow(){return this.each(nw)}function rw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iw(){return this.each(rw)}function sw(e){var t=typeof e=="function"?e:t0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lw(){return null}function aw(e,t){var n=typeof e=="function"?e:t0(e),o=t==null?lw:typeof t=="function"?t:Rc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function uw(){var e=this.parentNode;e&&e.removeChild(this)}function cw(){return this.each(uw)}function dw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pw(e){return this.select(e?fw:dw)}function hw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mw(e){return function(t){e.call(this,t,this.__data__)}}function gw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function yw(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function vw(e,t,n){return function(){var o=this.__on,r,i=mw(t);if(o){for(var s=0,l=o.length;s<l;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Ew(e,t,n){var o=gw(e+""),r,i=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(r=0,f=l[u];r<i;++r)if((s=o[r]).type===f.type&&s.name===f.name)return f.value}return}for(l=t?vw:yw,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function d0(e,t,n){var o=s0(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xw(e,t){return function(){return d0(this,e,t)}}function Sw(e,t){return function(){return d0(this,e,t.apply(this,arguments))}}function _w(e,t){return this.each((typeof t=="function"?Sw:xw)(e,t))}function*ww(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var f0=[null];function dt(e,t){this._groups=e,this._parents=t}function _i(){return new dt([[document.documentElement]],f0)}function Cw(){return this}dt.prototype=_i.prototype={constructor:dt,select:XS,selectAll:e_,selectChild:r_,selectChildren:a_,filter:u_,data:m_,enter:c_,exit:y_,join:v_,merge:E_,selection:Cw,order:x_,sort:S_,call:w_,nodes:C_,node:T_,size:N_,empty:I_,each:A_,attr:L_,style:H_,property:$_,classed:Y_,text:Q_,html:tw,raise:ow,lower:iw,append:sw,insert:aw,remove:cw,clone:pw,datum:hw,on:Ew,dispatch:_w,[Symbol.iterator]:ww};function yt(e){return typeof e=="string"?new dt([[document.querySelector(e)]],[document.documentElement]):new dt([[e]],f0)}function Tw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $t(e,t){if(e=Tw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Nw={passive:!1},ci={capture:!0,passive:!1};function ra(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}function p0(e){var t=e.document.documentElement,n=yt(e).on("dragstart.drag",$o,ci);"onselectstart"in t?n.on("selectstart.drag",$o,ci):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function h0(e,t){var n=e.document.documentElement,o=yt(e).on("dragstart.drag",null);t&&(o.on("click.drag",$o,ci),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zi=e=>()=>e;function au(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:l,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}au.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Iw(e){return!e.ctrlKey&&!e.button}function Aw(){return this.parentNode}function Rw(e,t){return t??{x:e.x,y:e.y}}function Mw(){return navigator.maxTouchPoints||"ontouchstart"in this}function m0(){var e=Iw,t=Aw,n=Rw,o=Mw,r={},i=yl("start","drag","end"),s=0,l,u,c,f,p=0;function h(_){_.on("mousedown.drag",m).filter(o).on("touchstart.drag",C).on("touchmove.drag",g,Nw).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(_,w){if(!(f||!e.call(this,_,w))){var T=E(this,t.call(this,_,w),_,w,"mouse");T&&(yt(_.view).on("mousemove.drag",v,ci).on("mouseup.drag",x,ci),p0(_.view),ra(_),c=!1,l=_.clientX,u=_.clientY,T("start",_))}}function v(_){if($o(_),!c){var w=_.clientX-l,T=_.clientY-u;c=w*w+T*T>p}r.mouse("drag",_)}function x(_){yt(_.view).on("mousemove.drag mouseup.drag",null),h0(_.view,c),$o(_),r.mouse("end",_)}function C(_,w){if(e.call(this,_,w)){var T=_.changedTouches,I=t.call(this,_,w),M=T.length,P,F;for(P=0;P<M;++P)(F=E(this,I,_,w,T[P].identifier,T[P]))&&(ra(_),F("start",_,T[P]))}}function g(_){var w=_.changedTouches,T=w.length,I,M;for(I=0;I<T;++I)(M=r[w[I].identifier])&&($o(_),M("drag",_,w[I]))}function y(_){var w=_.changedTouches,T=w.length,I,M;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),I=0;I<T;++I)(M=r[w[I].identifier])&&(ra(_),M("end",_,w[I]))}function E(_,w,T,I,M,P){var F=i.copy(),V=$t(P||T,w),G,z,N;if((N=n.call(_,new au("beforestart",{sourceEvent:T,target:h,identifier:M,active:s,x:V[0],y:V[1],dx:0,dy:0,dispatch:F}),I))!=null)return G=N.x-V[0]||0,z=N.y-V[1]||0,function U(k,B,D){var A=V,L;switch(k){case"start":r[M]=U,L=s++;break;case"end":delete r[M],--s;case"drag":V=$t(D||B,w),L=s;break}F.call(k,_,new au(k,{sourceEvent:B,subject:N,target:h,identifier:M,active:L,x:V[0]+G,y:V[1]+z,dx:V[0]-A[0],dy:V[1]-A[1],dispatch:F}),I)}}return h.filter=function(_){return arguments.length?(e=typeof _=="function"?_:zi(!!_),h):e},h.container=function(_){return arguments.length?(t=typeof _=="function"?_:zi(_),h):t},h.subject=function(_){return arguments.length?(n=typeof _=="function"?_:zi(_),h):n},h.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:zi(!!_),h):o},h.on=function(){var _=i.on.apply(i,arguments);return _===i?h:_},h.clickDistance=function(_){return arguments.length?(p=(_=+_)*_,h):Math.sqrt(p)},h}function Pc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function g0(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function wi(){}var di=.7,Gs=1/di,qo="\\s*([+-]?\\d+)\\s*",fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pw=/^#([0-9a-f]{3,8})$/,kw=new RegExp(`^rgb\\(${qo},${qo},${qo}\\)$`),Dw=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),Fw=new RegExp(`^rgba\\(${qo},${qo},${qo},${fi}\\)$`),Lw=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${fi}\\)$`),Uw=new RegExp(`^hsl\\(${fi},${Yt},${Yt}\\)$`),Vw=new RegExp(`^hsla\\(${fi},${Yt},${Yt},${fi}\\)$`),Cf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pc(wi,pi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tf,formatHex:Tf,formatHex8:bw,formatHsl:Hw,formatRgb:Nf,toString:Nf});function Tf(){return this.rgb().formatHex()}function bw(){return this.rgb().formatHex8()}function Hw(){return y0(this).formatHsl()}function Nf(){return this.rgb().formatRgb()}function pi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?If(t):n===3?new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$i(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$i(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kw.exec(e))?new tt(t[1],t[2],t[3],1):(t=Dw.exec(e))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fw.exec(e))?$i(t[1],t[2],t[3],t[4]):(t=Lw.exec(e))?$i(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uw.exec(e))?Mf(t[1],t[2]/100,t[3]/100,1):(t=Vw.exec(e))?Mf(t[1],t[2]/100,t[3]/100,t[4]):Cf.hasOwnProperty(e)?If(Cf[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function If(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function $i(e,t,n,o){return o<=0&&(e=t=n=NaN),new tt(e,t,n,o)}function Gw(e){return e instanceof wi||(e=pi(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function uu(e,t,n,o){return arguments.length===1?Gw(e):new tt(e,t,n,o??1)}function tt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Pc(tt,uu,g0(wi,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?di:Math.pow(di,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt(so(this.r),so(this.g),so(this.b),Bs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Af,formatHex:Af,formatHex8:Bw,formatRgb:Rf,toString:Rf}));function Af(){return`#${no(this.r)}${no(this.g)}${no(this.b)}`}function Bw(){return`#${no(this.r)}${no(this.g)}${no(this.b)}${no((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rf(){const e=Bs(this.opacity);return`${e===1?"rgb(":"rgba("}${so(this.r)}, ${so(this.g)}, ${so(this.b)}${e===1?")":`, ${e})`}`}function Bs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function so(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function no(e){return e=so(e),(e<16?"0":"")+e.toString(16)}function Mf(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pt(e,t,n,o)}function y0(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);if(e instanceof wi||(e=pi(e)),!e)return new Pt;if(e instanceof Pt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,l=i-r,u=(i+r)/2;return l?(t===i?s=(n-o)/l+(n<o)*6:n===i?s=(o-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+r:2-i-r,s*=60):l=u>0&&u<1?0:s,new Pt(s,l,u,e.opacity)}function zw(e,t,n,o){return arguments.length===1?y0(e):new Pt(e,t,n,o??1)}function Pt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Pc(Pt,zw,g0(wi,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?di:Math.pow(di,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new tt(ia(e>=240?e-240:e+120,r,o),ia(e,r,o),ia(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Pt(Pf(this.h),qi(this.s),qi(this.l),Bs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bs(this.opacity);return`${e===1?"hsl(":"hsla("}${Pf(this.h)}, ${qi(this.s)*100}%, ${qi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pf(e){return e=(e||0)%360,e<0?e+360:e}function qi(e){return Math.max(0,Math.min(1,e||0))}function ia(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const v0=e=>()=>e;function $w(e,t){return function(n){return e+n*t}}function qw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Ow(e){return(e=+e)==1?E0:function(t,n){return n-t?qw(t,n,e):v0(isNaN(t)?n:t)}}function E0(e,t){var n=t-e;return n?$w(e,n):v0(isNaN(e)?t:e)}const kf=function e(t){var n=Ow(t);function o(r,i){var s=n((r=uu(r)).r,(i=uu(i)).r),l=n(r.g,i.g),u=n(r.b,i.b),c=E0(r.opacity,i.opacity);return function(f){return r.r=s(f),r.g=l(f),r.b=u(f),r.opacity=c(f),r+""}}return o.gamma=e,o}(1);function Sn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var cu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sa=new RegExp(cu.source,"g");function Jw(e){return function(){return e}}function Yw(e){return function(t){return e(t)+""}}function Ww(e,t){var n=cu.lastIndex=sa.lastIndex=0,o,r,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(o=cu.exec(e))&&(r=sa.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(o=o[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,u.push({i:s,x:Sn(o,r)})),n=sa.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?Yw(u[0].x):Jw(t):(t=u.length,function(c){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(c);return l.join("")})}var Df=180/Math.PI,du={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function x0(e,t,n,o,r,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Df,skewX:Math.atan(u)*Df,scaleX:s,scaleY:l}}var Oi;function Kw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?du:x0(t.a,t.b,t.c,t.d,t.e,t.f)}function Xw(e){return e==null||(Oi||(Oi=document.createElementNS("http://www.w3.org/2000/svg","g")),Oi.setAttribute("transform",e),!(e=Oi.transform.baseVal.consolidate()))?du:(e=e.matrix,x0(e.a,e.b,e.c,e.d,e.e,e.f))}function S0(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,f,p,h,m,v){if(c!==p||f!==h){var x=m.push("translate(",null,t,null,n);v.push({i:x-4,x:Sn(c,p)},{i:x-2,x:Sn(f,h)})}else(p||h)&&m.push("translate("+p+t+h+n)}function s(c,f,p,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:p.push(r(p)+"rotate(",null,o)-2,x:Sn(c,f)})):f&&p.push(r(p)+"rotate("+f+o)}function l(c,f,p,h){c!==f?h.push({i:p.push(r(p)+"skewX(",null,o)-2,x:Sn(c,f)}):f&&p.push(r(p)+"skewX("+f+o)}function u(c,f,p,h,m,v){if(c!==p||f!==h){var x=m.push(r(m)+"scale(",null,",",null,")");v.push({i:x-4,x:Sn(c,p)},{i:x-2,x:Sn(f,h)})}else(p!==1||h!==1)&&m.push(r(m)+"scale("+p+","+h+")")}return function(c,f){var p=[],h=[];return c=e(c),f=e(f),i(c.translateX,c.translateY,f.translateX,f.translateY,p,h),s(c.rotate,f.rotate,p,h),l(c.skewX,f.skewX,p,h),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,p,h),c=f=null,function(m){for(var v=-1,x=h.length,C;++v<x;)p[(C=h[v]).i]=C.x(m);return p.join("")}}}var Qw=S0(Kw,"px, ","px)","deg)"),Zw=S0(Xw,", ",")",")"),jw=1e-12;function Ff(e){return((e=Math.exp(e))+1/e)/2}function eC(e){return((e=Math.exp(e))-1/e)/2}function tC(e){return((e=Math.exp(2*e))-1)/(e+1)}const nC=function e(t,n,o){function r(i,s){var l=i[0],u=i[1],c=i[2],f=s[0],p=s[1],h=s[2],m=f-l,v=p-u,x=m*m+v*v,C,g;if(x<jw)g=Math.log(h/c)/t,C=function(I){return[l+I*m,u+I*v,c*Math.exp(t*I*g)]};else{var y=Math.sqrt(x),E=(h*h-c*c+o*x)/(2*c*n*y),_=(h*h-c*c-o*x)/(2*h*n*y),w=Math.log(Math.sqrt(E*E+1)-E),T=Math.log(Math.sqrt(_*_+1)-_);g=(T-w)/t,C=function(I){var M=I*g,P=Ff(w),F=c/(n*y)*(P*tC(t*M+w)-eC(w));return[l+F*m,u+F*v,c*P/Ff(t*M+w)]}}return C.duration=g*1e3*t/Math.SQRT2,C}return r.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},r}(Math.SQRT2,2,4);var sr=0,Fr=0,Cr=0,_0=1e3,zs,Lr,$s=0,po=0,El=0,hi=typeof performance=="object"&&performance.now?performance:Date,w0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kc(){return po||(w0(oC),po=hi.now()+El)}function oC(){po=0}function qs(){this._call=this._time=this._next=null}qs.prototype=C0.prototype={constructor:qs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kc():+n)+(t==null?0:+t),!this._next&&Lr!==this&&(Lr?Lr._next=this:zs=this,Lr=this),this._call=e,this._time=n,fu()},stop:function(){this._call&&(this._call=null,this._time=1/0,fu())}};function C0(e,t,n){var o=new qs;return o.restart(e,t,n),o}function rC(){kc(),++sr;for(var e=zs,t;e;)(t=po-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sr}function Lf(){po=($s=hi.now())+El,sr=Fr=0;try{rC()}finally{sr=0,sC(),po=0}}function iC(){var e=hi.now(),t=e-$s;t>_0&&(El-=t,$s=e)}function sC(){for(var e,t=zs,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zs=n);Lr=e,fu(o)}function fu(e){if(!sr){Fr&&(Fr=clearTimeout(Fr));var t=e-po;t>24?(e<1/0&&(Fr=setTimeout(Lf,e-hi.now()-El)),Cr&&(Cr=clearInterval(Cr))):(Cr||($s=hi.now(),Cr=setInterval(iC,_0)),sr=1,w0(Lf))}}function Uf(e,t,n){var o=new qs;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var lC=yl("start","end","cancel","interrupt"),aC=[],T0=0,Vf=1,pu=2,cs=3,bf=4,hu=5,ds=6;function xl(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;uC(e,n,{name:t,index:o,group:r,on:lC,tween:aC,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:T0})}function Dc(e,t){var n=Lt(e,t);if(n.state>T0)throw new Error("too late; already scheduled");return n}function Wt(e,t){var n=Lt(e,t);if(n.state>cs)throw new Error("too late; already running");return n}function Lt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uC(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=C0(i,0,n.time);function i(c){n.state=Vf,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,p,h,m;if(n.state!==Vf)return u();for(f in o)if(m=o[f],m.name===n.name){if(m.state===cs)return Uf(s);m.state===bf?(m.state=ds,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete o[f]):+f<t&&(m.state=ds,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete o[f])}if(Uf(function(){n.state===cs&&(n.state=bf,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=pu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pu){for(n.state=cs,r=new Array(h=n.tween.length),f=0,p=-1;f<h;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=m);r.length=p+1}}function l(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=hu,1),p=-1,h=r.length;++p<h;)r[p].call(e,f);n.state===hu&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ds,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function fs(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>pu&&o.state<hu,o.state=ds,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function cC(e){return this.each(function(){fs(this,e)})}function dC(e,t){var n,o;return function(){var r=Wt(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,l=o.length;s<l;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function fC(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Wt(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var l={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=l;break}u===c&&r.push(l)}i.tween=r}}function pC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Lt(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?dC:fC)(n,e,t))}function Fc(e,t,n){var o=e._id;return e.each(function(){var r=Wt(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Lt(r,o).value[t]}}function N0(e,t){var n;return(typeof t=="number"?Sn:t instanceof pi?kf:(n=pi(t))?(t=n,kf):Ww)(e,t)}function hC(e){return function(){this.removeAttribute(e)}}function mC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gC(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function yC(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function vC(e,t,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l)))}}function EC(e,t,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l)))}}function xC(e,t){var n=vl(e),o=n==="transform"?Zw:N0;return this.attrTween(e,typeof t=="function"?(n.local?EC:vC)(n,o,Fc(this,"attr."+e,t)):t==null?(n.local?mC:hC)(n):(n.local?yC:gC)(n,o,t))}function SC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _C(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wC(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&_C(e,i)),n}return r._value=t,r}function CC(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&SC(e,i)),n}return r._value=t,r}function TC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=vl(e);return this.tween(n,(o.local?wC:CC)(o,t))}function NC(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function IC(e,t){return t=+t,function(){Dc(this,e).delay=t}}function AC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NC:IC)(t,e)):Lt(this.node(),t).delay}function RC(e,t){return function(){Wt(this,e).duration=+t.apply(this,arguments)}}function MC(e,t){return t=+t,function(){Wt(this,e).duration=t}}function PC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?RC:MC)(t,e)):Lt(this.node(),t).duration}function kC(e,t){if(typeof t!="function")throw new Error;return function(){Wt(this,e).ease=t}}function DC(e){var t=this._id;return arguments.length?this.each(kC(t,e)):Lt(this.node(),t).ease}function FC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Wt(this,e).ease=n}}function LC(e){if(typeof e!="function")throw new Error;return this.each(FC(this._id,e))}function UC(e){typeof e!="function"&&(e=o0(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=[],u,c=0;c<s;++c)(u=i[c])&&e.call(u,u.__data__,c,i)&&l.push(u);return new un(o,this._parents,this._name,this._id)}function VC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),l=0;l<i;++l)for(var u=t[l],c=n[l],f=u.length,p=s[l]=new Array(f),h,m=0;m<f;++m)(h=u[m]||c[m])&&(p[m]=h);for(;l<o;++l)s[l]=t[l];return new un(s,this._parents,this._name,this._id)}function bC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function HC(e,t,n){var o,r,i=bC(t)?Dc:Wt;return function(){var s=i(this,e),l=s.on;l!==o&&(r=(o=l).copy()).on(t,n),s.on=r}}function GC(e,t){var n=this._id;return arguments.length<2?Lt(this.node(),n).on.on(e):this.each(HC(n,e,t))}function BC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zC(){return this.on("end.remove",BC(this._id))}function $C(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rc(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var l=o[s],u=l.length,c=i[s]=new Array(u),f,p,h=0;h<u;++h)(f=l[h])&&(p=e.call(f,f.__data__,h,l))&&("__data__"in f&&(p.__data__=f.__data__),c[h]=p,xl(c[h],t,n,h,c,Lt(f,n)));return new un(i,this._parents,t,n)}function qC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=n0(e));for(var o=this._groups,r=o.length,i=[],s=[],l=0;l<r;++l)for(var u=o[l],c=u.length,f,p=0;p<c;++p)if(f=u[p]){for(var h=e.call(f,f.__data__,p,u),m,v=Lt(f,n),x=0,C=h.length;x<C;++x)(m=h[x])&&xl(m,t,n,x,h,v);i.push(h),s.push(f)}return new un(i,s,t,n)}var OC=_i.prototype.constructor;function JC(){return new OC(this._groups,this._parents)}function YC(e,t){var n,o,r;return function(){var i=ir(this,e),s=(this.style.removeProperty(e),ir(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function I0(e){return function(){this.style.removeProperty(e)}}function WC(e,t,n){var o,r=n+"",i;return function(){var s=ir(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function KC(e,t,n){var o,r,i;return function(){var s=ir(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),ir(this,e))),s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l))}}function XC(e,t){var n,o,r,i="style."+t,s="end."+i,l;return function(){var u=Wt(this,e),c=u.on,f=u.value[i]==null?l||(l=I0(t)):void 0;(c!==n||r!==f)&&(o=(n=c).copy()).on(s,r=f),u.on=o}}function QC(e,t,n){var o=(e+="")=="transform"?Qw:N0;return t==null?this.styleTween(e,YC(e,o)).on("end.style."+e,I0(e)):typeof t=="function"?this.styleTween(e,KC(e,o,Fc(this,"style."+e,t))).each(XC(this._id,e)):this.styleTween(e,WC(e,o,t),n).on("end.style."+e,null)}function ZC(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function jC(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&ZC(e,s,n)),o}return i._value=t,i}function eT(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,jC(e,t,n??""))}function tT(e){return function(){this.textContent=e}}function nT(e){return function(){var t=e(this);this.textContent=t??""}}function oT(e){return this.tween("text",typeof e=="function"?nT(Fc(this,"text",e)):tT(e==null?"":e+""))}function rT(e){return function(t){this.textContent=e.call(this,t)}}function iT(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&rT(r)),t}return o._value=e,o}function sT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,iT(e))}function lT(){for(var e=this._name,t=this._id,n=A0(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,c=0;c<l;++c)if(u=s[c]){var f=Lt(u,t);xl(u,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new un(o,this._parents,e,n)}function aT(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--r===0&&i()}};n.each(function(){var c=Wt(this,o),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),c.on=t}),r===0&&i()})}var uT=0;function un(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function A0(){return++uT}var Qt=_i.prototype;un.prototype={constructor:un,select:$C,selectAll:qC,selectChild:Qt.selectChild,selectChildren:Qt.selectChildren,filter:UC,merge:VC,selection:JC,transition:lT,call:Qt.call,nodes:Qt.nodes,node:Qt.node,size:Qt.size,empty:Qt.empty,each:Qt.each,on:GC,attr:xC,attrTween:TC,style:QC,styleTween:eT,text:oT,textTween:sT,remove:zC,tween:pC,delay:AC,duration:PC,ease:DC,easeVarying:LC,end:aT,[Symbol.iterator]:Qt[Symbol.iterator]};function cT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dT={time:null,delay:0,duration:250,ease:cT};function fT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function pT(e){var t,n;e instanceof un?(t=e._id,e=e._name):(t=A0(),(n=dT).time=kc(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,c=0;c<l;++c)(u=s[c])&&xl(u,e,t,c,s,n||fT(u,t));return new un(o,this._parents,e,t)}_i.prototype.interrupt=cC;_i.prototype.transition=pT;const Ji=e=>()=>e;function hT(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function nn(e,t,n){this.k=e,this.x=t,this.y=n}nn.prototype={constructor:nn,scale:function(e){return e===1?this:new nn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new nn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Un=new nn(1,0,0);nn.prototype;function la(e){e.stopImmediatePropagation()}function Tr(e){e.preventDefault(),e.stopImmediatePropagation()}function mT(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gT(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Hf(){return this.__zoom||Un}function yT(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vT(){return navigator.maxTouchPoints||"ontouchstart"in this}function ET(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function xT(){var e=mT,t=gT,n=ET,o=yT,r=vT,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=nC,c=yl("start","zoom","end"),f,p,h,m=500,v=150,x=0,C=10;function g(N){N.property("__zoom",Hf).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(N,U,k,B){var D=N.selection?N.selection():N;D.property("__zoom",Hf),N!==D?w(N,U,k,B):D.interrupt().each(function(){T(this,arguments).event(B).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},g.scaleBy=function(N,U,k,B){g.scaleTo(N,function(){var D=this.__zoom.k,A=typeof U=="function"?U.apply(this,arguments):U;return D*A},k,B)},g.scaleTo=function(N,U,k,B){g.transform(N,function(){var D=t.apply(this,arguments),A=this.__zoom,L=k==null?_(D):typeof k=="function"?k.apply(this,arguments):k,H=A.invert(L),$=typeof U=="function"?U.apply(this,arguments):U;return n(E(y(A,$),L,H),D,s)},k,B)},g.translateBy=function(N,U,k,B){g.transform(N,function(){return n(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),s)},null,B)},g.translateTo=function(N,U,k,B,D){g.transform(N,function(){var A=t.apply(this,arguments),L=this.__zoom,H=B==null?_(A):typeof B=="function"?B.apply(this,arguments):B;return n(Un.translate(H[0],H[1]).scale(L.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof k=="function"?-k.apply(this,arguments):-k),A,s)},B,D)};function y(N,U){return U=Math.max(i[0],Math.min(i[1],U)),U===N.k?N:new nn(U,N.x,N.y)}function E(N,U,k){var B=U[0]-k[0]*N.k,D=U[1]-k[1]*N.k;return B===N.x&&D===N.y?N:new nn(N.k,B,D)}function _(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function w(N,U,k,B){N.on("start.zoom",function(){T(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(B).end()}).tween("zoom",function(){var D=this,A=arguments,L=T(D,A).event(B),H=t.apply(D,A),$=k==null?_(H):typeof k=="function"?k.apply(D,A):k,K=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),Y=D.__zoom,q=typeof U=="function"?U.apply(D,A):U,J=u(Y.invert($).concat(K/Y.k),q.invert($).concat(K/q.k));return function(X){if(X===1)X=q;else{var ee=J(X),te=K/ee[2];X=new nn(te,$[0]-ee[0]*te,$[1]-ee[1]*te)}L.zoom(null,X)}})}function T(N,U,k){return!k&&N.__zooming||new I(N,U)}function I(N,U){this.that=N,this.args=U,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,U),this.taps=0}I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,U){return this.mouse&&N!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var U=yt(this.that).datum();c.call(N,this.that,new hT(N,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:c}),U)}};function M(N,...U){if(!e.apply(this,arguments))return;var k=T(this,U).event(N),B=this.__zoom,D=Math.max(i[0],Math.min(i[1],B.k*Math.pow(2,o.apply(this,arguments)))),A=$t(N);if(k.wheel)(k.mouse[0][0]!==A[0]||k.mouse[0][1]!==A[1])&&(k.mouse[1]=B.invert(k.mouse[0]=A)),clearTimeout(k.wheel);else{if(B.k===D)return;k.mouse=[A,B.invert(A)],fs(this),k.start()}Tr(N),k.wheel=setTimeout(L,v),k.zoom("mouse",n(E(y(B,D),k.mouse[0],k.mouse[1]),k.extent,s));function L(){k.wheel=null,k.end()}}function P(N,...U){if(h||!e.apply(this,arguments))return;var k=N.currentTarget,B=T(this,U,!0).event(N),D=yt(N.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",K,!0),A=$t(N,k),L=N.clientX,H=N.clientY;p0(N.view),la(N),B.mouse=[A,this.__zoom.invert(A)],fs(this),B.start();function $(Y){if(Tr(Y),!B.moved){var q=Y.clientX-L,J=Y.clientY-H;B.moved=q*q+J*J>x}B.event(Y).zoom("mouse",n(E(B.that.__zoom,B.mouse[0]=$t(Y,k),B.mouse[1]),B.extent,s))}function K(Y){D.on("mousemove.zoom mouseup.zoom",null),h0(Y.view,B.moved),Tr(Y),B.event(Y).end()}}function F(N,...U){if(e.apply(this,arguments)){var k=this.__zoom,B=$t(N.changedTouches?N.changedTouches[0]:N,this),D=k.invert(B),A=k.k*(N.shiftKey?.5:2),L=n(E(y(k,A),B,D),t.apply(this,U),s);Tr(N),l>0?yt(this).transition().duration(l).call(w,L,B,N):yt(this).call(g.transform,L,B,N)}}function V(N,...U){if(e.apply(this,arguments)){var k=N.touches,B=k.length,D=T(this,U,N.changedTouches.length===B).event(N),A,L,H,$;for(la(N),L=0;L<B;++L)H=k[L],$=$t(H,this),$=[$,this.__zoom.invert($),H.identifier],D.touch0?!D.touch1&&D.touch0[2]!==$[2]&&(D.touch1=$,D.taps=0):(D.touch0=$,A=!0,D.taps=1+!!f);f&&(f=clearTimeout(f)),A&&(D.taps<2&&(p=$[0],f=setTimeout(function(){f=null},m)),fs(this),D.start())}}function G(N,...U){if(this.__zooming){var k=T(this,U).event(N),B=N.changedTouches,D=B.length,A,L,H,$;for(Tr(N),A=0;A<D;++A)L=B[A],H=$t(L,this),k.touch0&&k.touch0[2]===L.identifier?k.touch0[0]=H:k.touch1&&k.touch1[2]===L.identifier&&(k.touch1[0]=H);if(L=k.that.__zoom,k.touch1){var K=k.touch0[0],Y=k.touch0[1],q=k.touch1[0],J=k.touch1[1],X=(X=q[0]-K[0])*X+(X=q[1]-K[1])*X,ee=(ee=J[0]-Y[0])*ee+(ee=J[1]-Y[1])*ee;L=y(L,Math.sqrt(X/ee)),H=[(K[0]+q[0])/2,(K[1]+q[1])/2],$=[(Y[0]+J[0])/2,(Y[1]+J[1])/2]}else if(k.touch0)H=k.touch0[0],$=k.touch0[1];else return;k.zoom("touch",n(E(L,H,$),k.extent,s))}}function z(N,...U){if(this.__zooming){var k=T(this,U).event(N),B=N.changedTouches,D=B.length,A,L;for(la(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),A=0;A<D;++A)L=B[A],k.touch0&&k.touch0[2]===L.identifier?delete k.touch0:k.touch1&&k.touch1[2]===L.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(L=$t(L,this),Math.hypot(p[0]-L[0],p[1]-L[1])<C)){var H=yt(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return g.wheelDelta=function(N){return arguments.length?(o=typeof N=="function"?N:Ji(+N),g):o},g.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Ji(!!N),g):e},g.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Ji(!!N),g):r},g.extent=function(N){return arguments.length?(t=typeof N=="function"?N:Ji([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),g):t},g.scaleExtent=function(N){return arguments.length?(i[0]=+N[0],i[1]=+N[1],g):[i[0],i[1]]},g.translateExtent=function(N){return arguments.length?(s[0][0]=+N[0][0],s[1][0]=+N[1][0],s[0][1]=+N[0][1],s[1][1]=+N[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(N){return arguments.length?(n=N,g):n},g.duration=function(N){return arguments.length?(l=+N,g):l},g.interpolate=function(N){return arguments.length?(u=N,g):u},g.on=function(){var N=c.on.apply(c,arguments);return N===c?g:N},g.clickDistance=function(N){return arguments.length?(x=(N=+N)*N,g):Math.sqrt(x)},g.tapDistance=function(N){return arguments.length?(C=+N,g):C},g}const Sl=R.createContext(null),ST=Sl.Provider,cn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},R0=cn.error001();function we(e,t){const n=R.useContext(Sl);if(n===null)throw new Error(R0);return e0(n,e,t)}const ke=()=>{const e=R.useContext(Sl);if(e===null)throw new Error(R0);return R.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},_T=e=>e.userSelectionActive?"none":"all";function M0({position:e,children:t,className:n,style:o,...r}){const i=we(_T),s=`${e}`.split("-");return b.createElement("div",{className:Oe(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},t)}function wT({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:b.createElement(M0,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},b.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const CT=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:c,...f})=>{const p=R.useRef(null),[h,m]=R.useState({x:0,y:0,width:0,height:0}),v=Oe(["react-flow__edge-textwrapper",c]);return R.useEffect(()=>{if(p.current){const x=p.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:b.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:v,visibility:h.width?"visible":"hidden",...f},r&&b.createElement("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),b.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:p,style:o},n),u)};var TT=R.memo(CT);const Lc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Uc=(e={x:0,y:0},t)=>({x:Gn(e.x,t[0][0],t[1][0]),y:Gn(e.y,t[0][1],t[1][1])}),Gf=(e,t,n)=>e<t?Gn(Math.abs(e-t),1,50)/50:e>n?-Gn(Math.abs(e-n),1,50)/50:0,P0=(e,t)=>{const n=Gf(e.x,35,t.width-35)*20,o=Gf(e.y,35,t.height-35)*20;return[n,o]},k0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},NT=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Vc=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),IT=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Bf=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),mu=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},AT=e=>Et(e.width)&&Et(e.height)&&Et(e.x)&&Et(e.y),Et=e=>!isNaN(e)&&isFinite(e),Ne=Symbol.for("internals"),D0=["Enter"," ","Escape"],RT=(e,t)=>{},MT=e=>"nativeEvent"in e;function gu(e){var r,i;const t=MT(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const F0=e=>"clientX"in e,Vn=(e,t)=>{var i,s;const n=F0(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Os=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Ci=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:h,interactionWidth:m=20})=>b.createElement(b.Fragment,null,b.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:h}),m&&b.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),r&&Et(n)&&Et(o)?b.createElement(TT,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c}):null);Ci.displayName="BaseEdge";function Nr(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(i=>i.id===e);r&&n(o,{...r})}}function L0({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,l=o<t?o+s:o-s;return[i,l,r,s]}function U0({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+r*.375+s*.375+n*.125,c=t*.125+i*.375+l*.375+o*.125,f=Math.abs(u-e),p=Math.abs(c-t);return[u,c,f,p]}var ho;(function(e){e.Strict="strict",e.Loose="loose"})(ho||(ho={}));var oo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(oo||(oo={}));var mi;(function(e){e.Partial="partial",e.Full="full"})(mi||(mi={}));var Tn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Tn||(Tn={}));var Js;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Js||(Js={}));var Q;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Q||(Q={}));function zf({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===Q.Left||e===Q.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function V0({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:o,targetY:r,targetPosition:i=Q.Top}){const[s,l]=zf({pos:n,x1:e,y1:t,x2:o,y2:r}),[u,c]=zf({pos:i,x1:o,y1:r,x2:e,y2:t}),[f,p,h,m]=U0({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${o},${r}`,f,p,h,m]}const bc=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=Q.Bottom,targetPosition:i=Q.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,interactionWidth:x})=>{const[C,g,y]=V0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return b.createElement(Ci,{path:C,labelX:g,labelY:y,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,interactionWidth:x})});bc.displayName="SimpleBezierEdge";const $f={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}},PT=({source:e,sourcePosition:t=Q.Bottom,target:n})=>t===Q.Left||t===Q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},qf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kT({source:e,sourcePosition:t=Q.Bottom,target:n,targetPosition:o=Q.Top,center:r,offset:i}){const s=$f[t],l=$f[o],u={x:e.x+s.x*i,y:e.y+s.y*i},c={x:n.x+l.x*i,y:n.y+l.y*i},f=PT({source:u,sourcePosition:t,target:c}),p=f.x!==0?"x":"y",h=f[p];let m=[],v,x;const C={x:0,y:0},g={x:0,y:0},[y,E,_,w]=L0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*l[p]===-1){v=r.x??y,x=r.y??E;const I=[{x:v,y:u.y},{x:v,y:c.y}],M=[{x:u.x,y:x},{x:c.x,y:x}];s[p]===h?m=p==="x"?I:M:m=p==="x"?M:I}else{const I=[{x:u.x,y:c.y}],M=[{x:c.x,y:u.y}];if(p==="x"?m=s.x===h?M:I:m=s.y===h?I:M,t===o){const z=Math.abs(e[p]-n[p]);if(z<=i){const N=Math.min(i-1,i-z);s[p]===h?C[p]=(u[p]>e[p]?-1:1)*N:g[p]=(c[p]>n[p]?-1:1)*N}}if(t!==o){const z=p==="x"?"y":"x",N=s[p]===l[z],U=u[z]>c[z],k=u[z]<c[z];(s[p]===1&&(!N&&U||N&&k)||s[p]!==1&&(!N&&k||N&&U))&&(m=p==="x"?I:M)}const P={x:u.x+C.x,y:u.y+C.y},F={x:c.x+g.x,y:c.y+g.y},V=Math.max(Math.abs(P.x-m[0].x),Math.abs(F.x-m[0].x)),G=Math.max(Math.abs(P.y-m[0].y),Math.abs(F.y-m[0].y));V>=G?(v=(P.x+F.x)/2,x=m[0].y):(v=m[0].x,x=(P.y+F.y)/2)}return[[e,{x:u.x+C.x,y:u.y+C.y},...m,{x:c.x+g.x,y:c.y+g.y},n],v,x,_,w]}function DT(e,t,n,o){const r=Math.min(qf(e,t)/2,qf(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+r*c},${s}Q ${i},${s} ${i},${s+r*f}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+r*u}Q ${i},${s} ${i+r*l},${s}`}function yu({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:o,targetY:r,targetPosition:i=Q.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}){const[f,p,h,m,v]=kT({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:u},offset:c});return[f.reduce((C,g,y)=>{let E="";return y>0&&y<f.length-1?E=DT(f[y-1],g,f[y+1],s):E=`${y===0?"M":"L"}${g.x} ${g.y}`,C+=E,C},""),p,h,m,v]}const _l=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,sourcePosition:p=Q.Bottom,targetPosition:h=Q.Top,markerEnd:m,markerStart:v,pathOptions:x,interactionWidth:C})=>{const[g,y,E]=yu({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:o,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return b.createElement(Ci,{path:g,labelX:y,labelY:E,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:m,markerStart:v,interactionWidth:C})});_l.displayName="SmoothStepEdge";const Hc=R.memo(e=>{var t;return b.createElement(_l,{...e,pathOptions:R.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Hc.displayName="StepEdge";function FT({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,l]=L0({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,l]}const Gc=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:h,interactionWidth:m})=>{const[v,x,C]=FT({sourceX:e,sourceY:t,targetX:n,targetY:o});return b.createElement(Ci,{path:v,labelX:x,labelY:C,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:h,interactionWidth:m})});Gc.displayName="StraightEdge";function Yi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Of({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case Q.Left:return[t-Yi(t-o,i),n];case Q.Right:return[t+Yi(o-t,i),n];case Q.Top:return[t,n-Yi(n-r,i)];case Q.Bottom:return[t,n+Yi(r-n,i)]}}function b0({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:o,targetY:r,targetPosition:i=Q.Top,curvature:s=.25}){const[l,u]=Of({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[c,f]=Of({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[p,h,m,v]=U0({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:f});return[`M${e},${t} C${l},${u} ${c},${f} ${o},${r}`,p,h,m,v]}const Ys=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=Q.Bottom,targetPosition:i=Q.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,pathOptions:x,interactionWidth:C})=>{const[g,y,E]=b0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:x==null?void 0:x.curvature});return b.createElement(Ci,{path:g,labelX:y,labelY:E,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,interactionWidth:C})});Ys.displayName="BezierEdge";const Bc=R.createContext(null),LT=Bc.Provider;Bc.Consumer;const H0=()=>R.useContext(Bc),UT=e=>"id"in e&&"source"in e&&"target"in e,VT=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,vu=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,bT=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),G0=(e,t)=>{if(!e.source||!e.target)return t;let n;return UT(e)?n={...e}:n={...e,id:VT(e)},bT(n,t)?t:t.concat(n)},Eu=({x:e,y:t},[n,o,r],i,[s,l])=>{const u={x:(e-n)/r,y:(t-o)/r};return i?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},B0=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Oo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},wl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:i,y:s}=Oo(r,t).positionAbsolute;return NT(o,Vc({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return IT(n)},HT=(e,t=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),wl(e,t)),z0=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1,l=[0,0])=>{const u={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},c=[];return e.forEach(f=>{const{width:p,height:h,selectable:m=!0,hidden:v=!1}=f;if(s&&!m||v)return!1;const{positionAbsolute:x}=Oo(f,l),C={x:x.x,y:x.y,width:p||0,height:h||0},g=mu(u,C),y=typeof p>"u"||typeof h>"u"||p===null||h===null,E=i&&g>0,_=(p||0)*(h||0);(y||E||g>=_||f.dragging)&&c.push(f)}),c},$0=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},q0=(e,t,n,o,r,i=.1)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),c=Gn(u,o,r),f=e.x+e.width/2,p=e.y+e.height/2,h=t/2-f*c,m=n/2-p*c;return{x:h,y:m,zoom:c}},Zn=(e,t=0)=>e.transition().duration(t);function Jf(e,t,n,o){return(t[n]||[]).reduce((r,i)=>{var s,l;return`${e.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),r},[])}function GT(e,t,n,o,r,i){const{x:s,y:l}=Vn(e),c=t.elementsFromPoint(s,l).find(v=>v.classList.contains("react-flow__handle"));if(c){const v=c.getAttribute("data-nodeid");if(v){const x=zc(void 0,c),C=c.getAttribute("data-handleid"),g=i({nodeId:v,id:C,type:x});if(g){const y=r.find(E=>E.nodeId===v&&E.type===x&&E.id===C);return{handle:{id:C,type:x,nodeId:v,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:g}}}}let f=[],p=1/0;if(r.forEach(v=>{const x=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(x<=o){const C=i(v);x<=p&&(x<p?f=[{handle:v,validHandleResult:C}]:x===p&&f.push({handle:v,validHandleResult:C}),p=x)}}),!f.length)return{handle:null,validHandleResult:O0()};if(f.length===1)return f[0];const h=f.some(({validHandleResult:v})=>v.isValid),m=f.some(({handle:v})=>v.type==="target");return f.find(({handle:v,validHandleResult:x})=>m?v.type==="target":h?x.isValid:!0)||f[0]}const BT={source:null,target:null,sourceHandle:null,targetHandle:null},O0=()=>({handleDomNode:null,isValid:!1,connection:BT,endHandle:null});function J0(e,t,n,o,r,i,s){const l=r==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...O0(),handleDomNode:u};if(u){const f=zc(void 0,u),p=u.getAttribute("data-nodeid"),h=u.getAttribute("data-handleid"),m=u.classList.contains("connectable"),v=u.classList.contains("connectableend"),x={source:l?p:n,sourceHandle:l?h:o,target:l?n:p,targetHandle:l?o:h};c.connection=x,m&&v&&(t===ho.Strict?l&&f==="source"||!l&&f==="target":p!==n||h!==o)&&(c.endHandle={nodeId:p,handleId:h,type:f},c.isValid=i(x))}return c}function zT({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,i)=>{if(i[Ne]){const{handleBounds:s}=i[Ne];let l=[],u=[];s&&(l=Jf(i,s,"source",`${t}-${n}-${o}`),u=Jf(i,s,"target",`${t}-${n}-${o}`)),r.push(...l,...u)}return r},[])}function zc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function aa(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function $T(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Y0({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:c}){const f=k0(e.target),{connectionMode:p,domNode:h,autoPanOnConnect:m,connectionRadius:v,onConnectStart:x,panBy:C,getNodes:g,cancelConnection:y}=i();let E=0,_;const{x:w,y:T}=Vn(e),I=f==null?void 0:f.elementFromPoint(w,T),M=zc(u,I),P=h==null?void 0:h.getBoundingClientRect();if(!P||!M)return;let F,V=Vn(e,P),G=!1,z=null,N=!1,U=null;const k=zT({nodes:g(),nodeId:n,handleId:t,handleType:M}),B=()=>{if(!m)return;const[L,H]=P0(V,P);C({x:L,y:H}),E=requestAnimationFrame(B)};s({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),x==null||x(e,{nodeId:n,handleId:t,handleType:M});function D(L){const{transform:H}=i();V=Vn(L,P);const{handle:$,validHandleResult:K}=GT(L,f,Eu(V,H,!1,[1,1]),v,k,Y=>J0(Y,p,n,t,r?"target":"source",l,f));if(_=$,G||(B(),G=!0),U=K.handleDomNode,z=K.connection,N=K.isValid,s({connectionPosition:_&&N?B0({x:_.x,y:_.y},H):V,connectionStatus:$T(!!_,N),connectionEndHandle:K.endHandle}),!_&&!N&&!U)return aa(F);z.source!==z.target&&U&&(aa(F),F=U,U.classList.add("connecting","react-flow__handle-connecting"),U.classList.toggle("valid",N),U.classList.toggle("react-flow__handle-valid",N))}function A(L){var H,$;(_||U)&&z&&N&&(o==null||o(z)),($=(H=i()).onConnectEnd)==null||$.call(H,L),u&&(c==null||c(L)),aa(F),y(),cancelAnimationFrame(E),G=!1,N=!1,z=null,U=null,f.removeEventListener("mousemove",D),f.removeEventListener("mouseup",A),f.removeEventListener("touchmove",D),f.removeEventListener("touchend",A)}f.addEventListener("mousemove",D),f.addEventListener("mouseup",A),f.addEventListener("touchmove",D),f.addEventListener("touchend",A)}const Yf=()=>!0,qT=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),OT=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},W0=R.forwardRef(({type:e="source",position:t=Q.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:c,onMouseDown:f,onTouchStart:p,...h},m)=>{var P,F;const v=s||null,x=e==="target",C=ke(),g=H0(),{connectOnClick:y,noPanClassName:E}=we(qT,qe),{connecting:_,clickConnecting:w}=we(OT(g,v,e),qe);g||(F=(P=C.getState()).onError)==null||F.call(P,"010",cn.error010());const T=V=>{const{defaultEdgeOptions:G,onConnect:z,hasDefaultEdges:N}=C.getState(),U={...G,...V};if(N){const{edges:k,setEdges:B}=C.getState();B(G0(U,k))}z==null||z(U),l==null||l(U)},I=V=>{if(!g)return;const G=F0(V);r&&(G&&V.button===0||!G)&&Y0({event:V,handleId:v,nodeId:g,onConnect:T,isTarget:x,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||Yf}),G?f==null||f(V):p==null||p(V)},M=V=>{const{onClickConnectStart:G,onClickConnectEnd:z,connectionClickStartHandle:N,connectionMode:U,isValidConnection:k}=C.getState();if(!g||!N&&!r)return;if(!N){G==null||G(V,{nodeId:g,handleId:v,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:v}});return}const B=k0(V.target),D=n||k||Yf,{connection:A,isValid:L}=J0({nodeId:g,id:v,type:e},U,N.nodeId,N.handleId||null,N.type,D,B);L&&T(A),z==null||z(V),C.setState({connectionClickStartHandle:null})};return b.createElement("div",{"data-handleid":v,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${v}-${e}`,className:Oe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,c,{source:!x,target:x,connectable:o,connectablestart:r,connectableend:i,connecting:w,connectionindicator:o&&(r&&!_||i&&_)}]),onMouseDown:I,onTouchStart:I,onClick:y?M:void 0,ref:m,...h},u)});W0.displayName="Handle";var Pe=R.memo(W0);const K0=({data:e,isConnectable:t,targetPosition:n=Q.Top,sourcePosition:o=Q.Bottom})=>b.createElement(b.Fragment,null,b.createElement(Pe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,b.createElement(Pe,{type:"source",position:o,isConnectable:t}));K0.displayName="DefaultNode";var xu=R.memo(K0);const X0=({data:e,isConnectable:t,sourcePosition:n=Q.Bottom})=>b.createElement(b.Fragment,null,e==null?void 0:e.label,b.createElement(Pe,{type:"source",position:n,isConnectable:t}));X0.displayName="InputNode";var Q0=R.memo(X0);const Z0=({data:e,isConnectable:t,targetPosition:n=Q.Top})=>b.createElement(b.Fragment,null,b.createElement(Pe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Z0.displayName="OutputNode";var j0=R.memo(Z0);const $c=()=>null;$c.displayName="GroupNode";const JT=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Wi=e=>e.id;function YT(e,t){return qe(e.selectedNodes.map(Wi),t.selectedNodes.map(Wi))&&qe(e.selectedEdges.map(Wi),t.selectedEdges.map(Wi))}const ey=R.memo(({onSelectionChange:e})=>{const t=ke(),{selectedNodes:n,selectedEdges:o}=we(JT,YT);return R.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,o,e]),null});ey.displayName="SelectionListener";const WT=e=>!!e.onSelectionChange;function KT({onSelectionChange:e}){const t=we(WT);return e||t?b.createElement(ey,{onSelectionChange:e}):null}const XT=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Eo(e,t){R.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function se(e,t,n){R.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const QT=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:f,nodesFocusable:p,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:x,maxZoom:C,nodeExtent:g,onNodesChange:y,onEdgesChange:E,elementsSelectable:_,connectionMode:w,snapGrid:T,snapToGrid:I,translateExtent:M,connectOnClick:P,defaultEdgeOptions:F,fitView:V,fitViewOptions:G,onNodesDelete:z,onEdgesDelete:N,onNodeDrag:U,onNodeDragStart:k,onNodeDragStop:B,onSelectionDrag:D,onSelectionDragStart:A,onSelectionDragStop:L,noPanClassName:H,nodeOrigin:$,rfId:K,autoPanOnConnect:Y,autoPanOnNodeDrag:q,onError:J,connectionRadius:X,isValidConnection:ee,nodeDragThreshold:te})=>{const{setNodes:oe,setEdges:ae,setDefaultNodesAndEdges:ce,setMinZoom:Qe,setMaxZoom:Je,setTranslateExtent:Ce,setNodeExtent:it,reset:pe}=we(XT,qe),Z=ke();return R.useEffect(()=>{const he=o==null?void 0:o.map(Vt=>({...Vt,...F}));return ce(n,he),()=>{pe()}},[]),se("defaultEdgeOptions",F,Z.setState),se("connectionMode",w,Z.setState),se("onConnect",r,Z.setState),se("onConnectStart",i,Z.setState),se("onConnectEnd",s,Z.setState),se("onClickConnectStart",l,Z.setState),se("onClickConnectEnd",u,Z.setState),se("nodesDraggable",c,Z.setState),se("nodesConnectable",f,Z.setState),se("nodesFocusable",p,Z.setState),se("edgesFocusable",h,Z.setState),se("edgesUpdatable",m,Z.setState),se("elementsSelectable",_,Z.setState),se("elevateNodesOnSelect",v,Z.setState),se("snapToGrid",I,Z.setState),se("snapGrid",T,Z.setState),se("onNodesChange",y,Z.setState),se("onEdgesChange",E,Z.setState),se("connectOnClick",P,Z.setState),se("fitViewOnInit",V,Z.setState),se("fitViewOnInitOptions",G,Z.setState),se("onNodesDelete",z,Z.setState),se("onEdgesDelete",N,Z.setState),se("onNodeDrag",U,Z.setState),se("onNodeDragStart",k,Z.setState),se("onNodeDragStop",B,Z.setState),se("onSelectionDrag",D,Z.setState),se("onSelectionDragStart",A,Z.setState),se("onSelectionDragStop",L,Z.setState),se("noPanClassName",H,Z.setState),se("nodeOrigin",$,Z.setState),se("rfId",K,Z.setState),se("autoPanOnConnect",Y,Z.setState),se("autoPanOnNodeDrag",q,Z.setState),se("onError",J,Z.setState),se("connectionRadius",X,Z.setState),se("isValidConnection",ee,Z.setState),se("nodeDragThreshold",te,Z.setState),Eo(e,oe),Eo(t,ae),Eo(x,Qe),Eo(C,Je),Eo(M,Ce),Eo(g,it),null},Wf={display:"none"},ZT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ty="react-flow__node-desc",ny="react-flow__edge-desc",jT="react-flow__aria-live",e1=e=>e.ariaLiveMessage;function t1({rfId:e}){const t=we(e1);return b.createElement("div",{id:`${jT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:ZT},t)}function n1({rfId:e,disableKeyboardA11y:t}){return b.createElement(b.Fragment,null,b.createElement("div",{id:`${ty}-${e}`,style:Wf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),b.createElement("div",{id:`${ny}-${e}`,style:Wf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&b.createElement(t1,{rfId:e}))}var gi=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=R.useState(!1),r=R.useRef(!1),i=R.useRef(new Set([])),[s,l]=R.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),f=c.reduce((p,h)=>p.concat(...h),[]);return[c,f]}return[[],[]]},[e]);return R.useEffect(()=>{const u=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||u;if(e!==null){const f=m=>{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&gu(m))return!1;const x=Xf(m.code,l);i.current.add(m[x]),Kf(s,i.current,!1)&&(m.preventDefault(),o(!0))},p=m=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&gu(m))return!1;const x=Xf(m.code,l);Kf(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(m[x]),m.key==="Meta"&&i.current.clear(),r.current=!1},h=()=>{i.current.clear(),o(!1)};return c==null||c.addEventListener("keydown",f),c==null||c.addEventListener("keyup",p),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",f),c==null||c.removeEventListener("keyup",p),window.removeEventListener("blur",h)}}},[e,o]),n};function Kf(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Xf(e,t){return t.includes(e)?"code":"key"}function oy(e,t,n,o){var l,u;const r=e.parentNode||e.parentId;if(!r)return n;const i=t.get(r),s=Oo(i,o);return oy(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((l=i[Ne])==null?void 0:l.z)??0)>(n.z??0)?((u=i[Ne])==null?void 0:u.z)??0:n.z??0},o)}function ry(e,t,n){e.forEach(o=>{var i;const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:s,y:l,z:u}=oy(o,e,{...o.position,z:((i=o[Ne])==null?void 0:i.z)??0},t);o.positionAbsolute={x:s,y:l},o[Ne].z=u,n!=null&&n[o.id]&&(o[Ne].isParent=!0)}})}function ua(e,t,n,o){const r=new Map,i={},s=o?1e3:0;return e.forEach(l=>{var m;const u=(Et(l.zIndex)?l.zIndex:0)+(l.selected?s:0),c=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(i[p]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(f,Ne,{enumerable:!1,value:{handleBounds:h||(m=c==null?void 0:c[Ne])==null?void 0:m.handleBounds,z:u}}),r.set(l.id,f)}),ry(r,n,i),r}function iy(e,t={}){const{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:l,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:f,nodeOrigin:p}=e(),h=t.initial&&!c&&f;if(l&&u&&(h||!t.initial)){const v=n().filter(C=>{var y;const g=t.includeHiddenNodes?C.width&&C.height:!C.hidden;return(y=t.nodes)!=null&&y.length?g&&t.nodes.some(E=>E.id===C.id):g}),x=v.every(C=>C.width&&C.height);if(v.length>0&&x){const C=wl(v,p),{x:g,y,zoom:E}=q0(C,o,r,t.minZoom??i,t.maxZoom??s,t.padding??.1),_=Un.translate(g,y).scale(E);return typeof t.duration=="number"&&t.duration>0?l.transform(Zn(u,t.duration),_):l.transform(u,_),!0}}return!1}function o1(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[Ne]:o[Ne],selected:n.selected})}),new Map(t)}function r1(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Ki({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=n();e!=null&&e.length&&(u&&o({nodeInternals:o1(e,r)}),s==null||s(e)),t!=null&&t.length&&(c&&o({edges:r1(t,i)}),l==null||l(t))}const xo=()=>{},i1={zoomIn:xo,zoomOut:xo,zoomTo:xo,getZoom:()=>1,setViewport:xo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xo,fitBounds:xo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},s1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),l1=()=>{const e=ke(),{d3Zoom:t,d3Selection:n}=we(s1,qe);return R.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Zn(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(Zn(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(Zn(n,i==null?void 0:i.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[s,l,u]=e.getState().transform,c=Un.translate(r.x??s,r.y??l).scale(r.zoom??u);t.transform(Zn(n,i==null?void 0:i.duration),c)},getViewport:()=>{const[r,i,s]=e.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>iy(e.getState,r),setCenter:(r,i,s)=>{const{width:l,height:u,maxZoom:c}=e.getState(),f=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,p=l/2-r*f,h=u/2-i*f,m=Un.translate(p,h).scale(f);t.transform(Zn(n,s==null?void 0:s.duration),m)},fitBounds:(r,i)=>{const{width:s,height:l,minZoom:u,maxZoom:c}=e.getState(),{x:f,y:p,zoom:h}=q0(r,s,l,u,c,(i==null?void 0:i.padding)??.1),m=Un.translate(f,p).scale(h);t.transform(Zn(n,i==null?void 0:i.duration),m)},project:r=>{const{transform:i,snapToGrid:s,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Eu(r,i,s,l)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:s,snapGrid:l,domNode:u}=e.getState();if(!u)return r;const{x:c,y:f}=u.getBoundingClientRect(),p={x:r.x-c,y:r.y-f};return Eu(p,i,s,l)},flowToScreenPosition:r=>{const{transform:i,domNode:s}=e.getState();if(!s)return r;const{x:l,y:u}=s.getBoundingClientRect(),c=B0(r,i);return{x:c.x+l,y:c.y+u}},viewportInitialized:!0}:i1,[t,n])};function qc(){const e=l1(),t=ke(),n=R.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),o=R.useCallback(x=>t.getState().nodeInternals.get(x),[]),r=R.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(C=>({...C}))},[]),i=R.useCallback(x=>{const{edges:C=[]}=t.getState();return C.find(g=>g.id===x)},[]),s=R.useCallback(x=>{const{getNodes:C,setNodes:g,hasDefaultNodes:y,onNodesChange:E}=t.getState(),_=C(),w=typeof x=="function"?x(_):x;if(y)g(w);else if(E){const T=w.length===0?_.map(I=>({type:"remove",id:I.id})):w.map(I=>({item:I,type:"reset"}));E(T)}},[]),l=R.useCallback(x=>{const{edges:C=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:E}=t.getState(),_=typeof x=="function"?x(C):x;if(y)g(_);else if(E){const w=_.length===0?C.map(T=>({type:"remove",id:T.id})):_.map(T=>({item:T,type:"reset"}));E(w)}},[]),u=R.useCallback(x=>{const C=Array.isArray(x)?x:[x],{getNodes:g,setNodes:y,hasDefaultNodes:E,onNodesChange:_}=t.getState();if(E){const T=[...g(),...C];y(T)}else if(_){const w=C.map(T=>({item:T,type:"add"}));_(w)}},[]),c=R.useCallback(x=>{const C=Array.isArray(x)?x:[x],{edges:g=[],setEdges:y,hasDefaultEdges:E,onEdgesChange:_}=t.getState();if(E)y([...g,...C]);else if(_){const w=C.map(T=>({item:T,type:"add"}));_(w)}},[]),f=R.useCallback(()=>{const{getNodes:x,edges:C=[],transform:g}=t.getState(),[y,E,_]=g;return{nodes:x().map(w=>({...w})),edges:C.map(w=>({...w})),viewport:{x:y,y:E,zoom:_}}},[]),p=R.useCallback(({nodes:x,edges:C})=>{const{nodeInternals:g,getNodes:y,edges:E,hasDefaultNodes:_,hasDefaultEdges:w,onNodesDelete:T,onEdgesDelete:I,onNodesChange:M,onEdgesChange:P}=t.getState(),F=(x||[]).map(U=>U.id),V=(C||[]).map(U=>U.id),G=y().reduce((U,k)=>{const B=k.parentNode||k.parentId,D=!F.includes(k.id)&&B&&U.find(L=>L.id===B);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(F.includes(k.id)||D)&&U.push(k),U},[]),z=E.filter(U=>typeof U.deletable=="boolean"?U.deletable:!0),N=z.filter(U=>V.includes(U.id));if(G||N){const U=$0(G,z),k=[...N,...U],B=k.reduce((D,A)=>(D.includes(A.id)||D.push(A.id),D),[]);if((w||_)&&(w&&t.setState({edges:E.filter(D=>!B.includes(D.id))}),_&&(G.forEach(D=>{g.delete(D.id)}),t.setState({nodeInternals:new Map(g)}))),B.length>0&&(I==null||I(k),P&&P(B.map(D=>({id:D,type:"remove"})))),G.length>0&&(T==null||T(G),M)){const D=G.map(A=>({id:A.id,type:"remove"}));M(D)}}},[]),h=R.useCallback(x=>{const C=AT(x),g=C?null:t.getState().nodeInternals.get(x.id);return!C&&!g?[null,null,C]:[C?x:Bf(g),g,C]},[]),m=R.useCallback((x,C=!0,g)=>{const[y,E,_]=h(x);return y?(g||t.getState().getNodes()).filter(w=>{if(!_&&(w.id===E.id||!w.positionAbsolute))return!1;const T=Bf(w),I=mu(T,y);return C&&I>0||I>=y.width*y.height}):[]},[]),v=R.useCallback((x,C,g=!0)=>{const[y]=h(x);if(!y)return!1;const E=mu(y,C);return g&&E>0||E>=y.width*y.height},[]);return R.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:l,addNodes:u,addEdges:c,toObject:f,deleteElements:p,getIntersectingNodes:m,isNodeIntersecting:v}),[e,n,o,r,i,s,l,u,c,f,p,m,v])}const a1={actInsideInputWithModifier:!1};var u1=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ke(),{deleteElements:o}=qc(),r=gi(e,a1),i=gi(t);R.useEffect(()=>{if(r){const{edges:s,getNodes:l}=n.getState(),u=l().filter(f=>f.selected),c=s.filter(f=>f.selected);o({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[r]),R.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function c1(e){const t=ke();R.useEffect(()=>{let n;const o=()=>{var i,s;if(!e.current)return;const r=Lc(e.current);(r.height===0||r.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",cn.error004())),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const Oc={position:"absolute",width:"100%",height:"100%",top:0,left:0},d1=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xi=e=>({x:e.x,y:e.y,zoom:e.k}),So=(e,t)=>e.target.closest(`.${t}`),Qf=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Zf=e=>{const t=e.ctrlKey&&Os()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},f1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),p1=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=oo.Free,zoomOnDoubleClick:c=!0,elementsSelectable:f,panOnDrag:p=!0,defaultViewport:h,translateExtent:m,minZoom:v,maxZoom:x,zoomActivationKeyCode:C,preventScrolling:g=!0,children:y,noWheelClassName:E,noPanClassName:_})=>{const w=R.useRef(),T=ke(),I=R.useRef(!1),M=R.useRef(!1),P=R.useRef(null),F=R.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:G,d3ZoomHandler:z,userSelectionActive:N}=we(f1,qe),U=gi(C),k=R.useRef(0),B=R.useRef(!1),D=R.useRef();return c1(P),R.useEffect(()=>{if(P.current){const A=P.current.getBoundingClientRect(),L=xT().scaleExtent([v,x]).translateExtent(m),H=yt(P.current).call(L),$=Un.translate(h.x,h.y).scale(Gn(h.zoom,v,x)),K=[[0,0],[A.width,A.height]],Y=L.constrain()($,K,m);L.transform(H,Y),L.wheelDelta(Zf),T.setState({d3Zoom:L,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:P.current.closest(".react-flow")})}},[]),R.useEffect(()=>{G&&V&&(s&&!U&&!N?G.on("wheel.zoom",A=>{if(So(A,E))return!1;A.preventDefault(),A.stopImmediatePropagation();const L=G.property("__zoom").k||1;if(A.ctrlKey&&i){const ee=$t(A),te=Zf(A),oe=L*Math.pow(2,te);V.scaleTo(G,oe,ee,A);return}const H=A.deltaMode===1?20:1;let $=u===oo.Vertical?0:A.deltaX*H,K=u===oo.Horizontal?0:A.deltaY*H;!Os()&&A.shiftKey&&u!==oo.Vertical&&($=A.deltaY*H,K=0),V.translateBy(G,-($/L)*l,-(K/L)*l,{internal:!0});const Y=Xi(G.property("__zoom")),{onViewportChangeStart:q,onViewportChange:J,onViewportChangeEnd:X}=T.getState();clearTimeout(D.current),B.current||(B.current=!0,t==null||t(A,Y),q==null||q(Y)),B.current&&(e==null||e(A,Y),J==null||J(Y),D.current=setTimeout(()=>{n==null||n(A,Y),X==null||X(Y),B.current=!1},150))},{passive:!1}):typeof z<"u"&&G.on("wheel.zoom",function(A,L){if(!g&&A.type==="wheel"&&!A.ctrlKey||So(A,E))return null;A.preventDefault(),z.call(this,A,L)},{passive:!1}))},[N,s,u,G,V,z,U,i,g,E,t,e,n]),R.useEffect(()=>{V&&V.on("start",A=>{var $,K;if(!A.sourceEvent||A.sourceEvent.internal)return null;k.current=($=A.sourceEvent)==null?void 0:$.button;const{onViewportChangeStart:L}=T.getState(),H=Xi(A.transform);I.current=!0,F.current=H,((K=A.sourceEvent)==null?void 0:K.type)==="mousedown"&&T.setState({paneDragging:!0}),L==null||L(H),t==null||t(A.sourceEvent,H)})},[V,t]),R.useEffect(()=>{V&&(N&&!I.current?V.on("zoom",null):N||V.on("zoom",A=>{var H;const{onViewportChange:L}=T.getState();if(T.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),M.current=!!(o&&Qf(p,k.current??0)),(e||L)&&!((H=A.sourceEvent)!=null&&H.internal)){const $=Xi(A.transform);L==null||L($),e==null||e(A.sourceEvent,$)}}))},[N,V,e,p,o]),R.useEffect(()=>{V&&V.on("end",A=>{if(!A.sourceEvent||A.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=T.getState();if(I.current=!1,T.setState({paneDragging:!1}),o&&Qf(p,k.current??0)&&!M.current&&o(A.sourceEvent),M.current=!1,(n||L)&&d1(F.current,A.transform)){const H=Xi(A.transform);F.current=H,clearTimeout(w.current),w.current=setTimeout(()=>{L==null||L(H),n==null||n(A.sourceEvent,H)},s?150:0)}})},[V,s,p,n,o]),R.useEffect(()=>{V&&V.filter(A=>{const L=U||r,H=i&&A.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&A.button===1&&A.type==="mousedown"&&(So(A,"react-flow__node")||So(A,"react-flow__edge")))return!0;if(!p&&!L&&!s&&!c&&!i||N||!c&&A.type==="dblclick"||So(A,E)&&A.type==="wheel"||So(A,_)&&(A.type!=="wheel"||s&&A.type==="wheel"&&!U)||!i&&A.ctrlKey&&A.type==="wheel"||!L&&!s&&!H&&A.type==="wheel"||!p&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(p)&&!p.includes(A.button)&&A.type==="mousedown")return!1;const $=Array.isArray(p)&&p.includes(A.button)||!A.button||A.button<=1;return(!A.ctrlKey||A.type==="wheel")&&$})},[N,V,r,i,s,c,p,f,U]),b.createElement("div",{className:"react-flow__renderer",ref:P,style:Oc},y)},h1=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function m1(){const{userSelectionActive:e,userSelectionRect:t}=we(h1,qe);return e&&t?b.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function jf(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,i=t.position.y+t.height-o.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),i>0&&(o.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);o.position.x=o.position.x-s,o.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);o.position.y=o.position.y-s,o.style.height+=s,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function sy(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const i=e.filter(l=>l.id===r.id);if(i.length===0)return o.push(r),o;const s={...r};for(const l of i)if(l)switch(l.type){case"select":{s.selected=l.selected;break}case"position":{typeof l.position<"u"&&(s.position=l.position),typeof l.positionAbsolute<"u"&&(s.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&jf(o,s);break}case"dimensions":{typeof l.dimensions<"u"&&(s.width=l.dimensions.width,s.height=l.dimensions.height),typeof l.updateStyle<"u"&&(s.style={...s.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(s.resizing=l.resizing),s.expandParent&&jf(o,s);break}case"remove":return o}return o.push(s),o},n)}function ly(e,t){return sy(e,t)}function g1(e,t){return sy(e,t)}const _n=(e,t)=>({id:e,type:"select",selected:t});function Lo(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(_n(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(_n(o.id,!1))),n},[])}const ca=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},y1=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ay=R.memo(({isSelecting:e,selectionMode:t=mi.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:f,children:p})=>{const h=R.useRef(null),m=ke(),v=R.useRef(0),x=R.useRef(0),C=R.useRef(),{userSelectionActive:g,elementsSelectable:y,dragging:E}=we(y1,qe),_=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,x.current=0},w=z=>{i==null||i(z),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},T=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}s==null||s(z)},I=l?z=>l(z):void 0,M=z=>{const{resetSelectedElements:N,domNode:U}=m.getState();if(C.current=U==null?void 0:U.getBoundingClientRect(),!y||!e||z.button!==0||z.target!==h.current||!C.current)return;const{x:k,y:B}=Vn(z,C.current);N(),m.setState({userSelectionRect:{width:0,height:0,startX:k,startY:B,x:k,y:B}}),o==null||o(z)},P=z=>{const{userSelectionRect:N,nodeInternals:U,edges:k,transform:B,onNodesChange:D,onEdgesChange:A,nodeOrigin:L,getNodes:H}=m.getState();if(!e||!C.current||!N)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const $=Vn(z,C.current),K=N.startX??0,Y=N.startY??0,q={...N,x:$.x<K?$.x:K,y:$.y<Y?$.y:Y,width:Math.abs($.x-K),height:Math.abs($.y-Y)},J=H(),X=z0(U,q,B,t===mi.Partial,!0,L),ee=$0(X,k).map(oe=>oe.id),te=X.map(oe=>oe.id);if(v.current!==te.length){v.current=te.length;const oe=Lo(J,te);oe.length&&(D==null||D(oe))}if(x.current!==ee.length){x.current=ee.length;const oe=Lo(k,ee);oe.length&&(A==null||A(oe))}m.setState({userSelectionRect:q})},F=z=>{if(z.button!==0)return;const{userSelectionRect:N}=m.getState();!g&&N&&z.target===h.current&&(w==null||w(z)),m.setState({nodesSelectionActive:v.current>0}),_(),r==null||r(z)},V=z=>{g&&(m.setState({nodesSelectionActive:v.current>0}),r==null||r(z)),_()},G=y&&(e||g);return b.createElement("div",{className:Oe(["react-flow__pane",{dragging:E,selection:e}]),onClick:G?void 0:ca(w,h),onContextMenu:ca(T,h),onWheel:ca(I,h),onMouseEnter:G?void 0:u,onMouseDown:G?M:void 0,onMouseMove:G?P:c,onMouseUp:G?F:void 0,onMouseLeave:G?V:f,ref:h,style:Oc},p,b.createElement(m1,null))});ay.displayName="Pane";function uy(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:uy(o,t):!1}function ep(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function v1(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!uy(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=r.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function E1(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function cy(e,t,n,o,r=[0,0],i){const s=E1(e,e.extent||o);let l=s;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const p=n.get(u),{x:h,y:m}=Oo(p,r).positionAbsolute;l=p&&Et(h)&&Et(m)&&Et(p.width)&&Et(p.height)?[[h+e.width*r[0],m+e.height*r[1]],[h+p.width-e.width+e.width*r[0],m+p.height-e.height+e.height*r[1]]]:l}else i==null||i("005",cn.error005()),l=s;else if(e.extent&&u&&e.extent!=="parent"){const p=n.get(u),{x:h,y:m}=Oo(p,r).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let c={x:0,y:0};if(u){const p=n.get(u);c=Oo(p,r).positionAbsolute}const f=l&&l!=="parent"?Uc(t,l):t;return{position:{x:f.x-c.x,y:f.y-c.y},positionAbsolute:f}}function da({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const tp=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),s=t.getBoundingClientRect(),l={x:s.width*o[0],y:s.height*o[1]};return i.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-s.left-l.x)/n,y:(c.top-s.top-l.y)/n,...Lc(u)}})};function Ir(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function Su({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:u}=t.getState(),c=l.get(e);if(!c){u==null||u("012",cn.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=o==null?void 0:o.current)==null?void 0:f.blur()})):r([e])}function dy(){const e=ke();return R.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-o[0])/o[2],y:(l-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(u.x/r[0]):u.x,ySnapped:i?r[1]*Math.round(u.y/r[1]):u.y,...u}},[])}function fa(e){return(t,n,o)=>e==null?void 0:e(t,o)}function fy({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){const l=ke(),[u,c]=R.useState(!1),f=R.useRef([]),p=R.useRef({x:null,y:null}),h=R.useRef(0),m=R.useRef(null),v=R.useRef({x:0,y:0}),x=R.useRef(null),C=R.useRef(!1),g=R.useRef(!1),y=R.useRef(!1),E=dy();return R.useEffect(()=>{if(e!=null&&e.current){const _=yt(e.current),w=({x:M,y:P})=>{const{nodeInternals:F,onNodeDrag:V,onSelectionDrag:G,updateNodePositions:z,nodeExtent:N,snapGrid:U,snapToGrid:k,nodeOrigin:B,onError:D}=l.getState();p.current={x:M,y:P};let A=!1,L={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&N){const $=wl(f.current,B);L=Vc($)}if(f.current=f.current.map($=>{const K={x:M-$.distance.x,y:P-$.distance.y};k&&(K.x=U[0]*Math.round(K.x/U[0]),K.y=U[1]*Math.round(K.y/U[1]));const Y=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];f.current.length>1&&N&&!$.extent&&(Y[0][0]=$.positionAbsolute.x-L.x+N[0][0],Y[1][0]=$.positionAbsolute.x+($.width??0)-L.x2+N[1][0],Y[0][1]=$.positionAbsolute.y-L.y+N[0][1],Y[1][1]=$.positionAbsolute.y+($.height??0)-L.y2+N[1][1]);const q=cy($,K,F,Y,B,D);return A=A||$.position.x!==q.position.x||$.position.y!==q.position.y,$.position=q.position,$.positionAbsolute=q.positionAbsolute,$}),!A)return;z(f.current,!0,!0),c(!0);const H=r?V:fa(G);if(H&&x.current){const[$,K]=da({nodeId:r,dragItems:f.current,nodeInternals:F});H(x.current,$,K)}},T=()=>{if(!m.current)return;const[M,P]=P0(v.current,m.current);if(M!==0||P!==0){const{transform:F,panBy:V}=l.getState();p.current.x=(p.current.x??0)-M/F[2],p.current.y=(p.current.y??0)-P/F[2],V({x:M,y:P})&&w(p.current)}h.current=requestAnimationFrame(T)},I=M=>{var B;const{nodeInternals:P,multiSelectionActive:F,nodesDraggable:V,unselectNodesAndEdges:G,onNodeDragStart:z,onSelectionDragStart:N}=l.getState();g.current=!0;const U=r?z:fa(N);(!s||!i)&&!F&&r&&((B=P.get(r))!=null&&B.selected||G()),r&&i&&s&&Su({id:r,store:l,nodeRef:e});const k=E(M);if(p.current=k,f.current=v1(P,V,k,r),U&&f.current){const[D,A]=da({nodeId:r,dragItems:f.current,nodeInternals:P});U(M.sourceEvent,D,A)}};if(t)_.on(".drag",null);else{const M=m0().on("start",P=>{const{domNode:F,nodeDragThreshold:V}=l.getState();V===0&&I(P),y.current=!1;const G=E(P);p.current=G,m.current=(F==null?void 0:F.getBoundingClientRect())||null,v.current=Vn(P.sourceEvent,m.current)}).on("drag",P=>{var z,N;const F=E(P),{autoPanOnNodeDrag:V,nodeDragThreshold:G}=l.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!C.current&&g.current&&V&&(C.current=!0,T()),!g.current){const U=F.xSnapped-(((z=p==null?void 0:p.current)==null?void 0:z.x)??0),k=F.ySnapped-(((N=p==null?void 0:p.current)==null?void 0:N.y)??0);Math.sqrt(U*U+k*k)>G&&I(P)}(p.current.x!==F.xSnapped||p.current.y!==F.ySnapped)&&f.current&&g.current&&(x.current=P.sourceEvent,v.current=Vn(P.sourceEvent,m.current),w(F))}}).on("end",P=>{if(!(!g.current||y.current)&&(c(!1),C.current=!1,g.current=!1,cancelAnimationFrame(h.current),f.current)){const{updateNodePositions:F,nodeInternals:V,onNodeDragStop:G,onSelectionDragStop:z}=l.getState(),N=r?G:fa(z);if(F(f.current,!1,!1),N){const[U,k]=da({nodeId:r,dragItems:f.current,nodeInternals:V});N(P.sourceEvent,U,k)}}}).filter(P=>{const F=P.target;return!P.button&&(!n||!ep(F,`.${n}`,e))&&(!o||ep(F,o,e))});return _.call(M),()=>{_.on(".drag",null)}}}},[e,t,n,o,i,l,r,s,E]),u}function py(){const e=ke();return R.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:l,snapGrid:u,onError:c,nodesDraggable:f}=e.getState(),p=s().filter(y=>y.selected&&(y.draggable||f&&typeof y.draggable>"u")),h=l?u[0]:5,m=l?u[1]:5,v=n.isShiftPressed?4:1,x=n.x*h*v,C=n.y*m*v,g=p.map(y=>{if(y.positionAbsolute){const E={x:y.positionAbsolute.x+x,y:y.positionAbsolute.y+C};l&&(E.x=u[0]*Math.round(E.x/u[0]),E.y=u[1]*Math.round(E.y/u[1]));const{positionAbsolute:_,position:w}=cy(y,E,o,r,void 0,c);y.position=w,y.positionAbsolute=_}return y});i(g,!0,!1)},[])}const Jo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ar=e=>{const t=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:u,selected:c,onClick:f,onMouseEnter:p,onMouseMove:h,onMouseLeave:m,onContextMenu:v,onDoubleClick:x,style:C,className:g,isDraggable:y,isSelectable:E,isConnectable:_,isFocusable:w,selectNodesOnDrag:T,sourcePosition:I,targetPosition:M,hidden:P,resizeObserver:F,dragHandle:V,zIndex:G,isParent:z,noDragClassName:N,noPanClassName:U,initialized:k,disableKeyboardA11y:B,ariaLabel:D,rfId:A,hasHandleBounds:L})=>{const H=ke(),$=R.useRef(null),K=R.useRef(null),Y=R.useRef(I),q=R.useRef(M),J=R.useRef(o),X=E||y||f||p||h||m,ee=py(),te=Ir(n,H.getState,p),oe=Ir(n,H.getState,h),ae=Ir(n,H.getState,m),ce=Ir(n,H.getState,v),Qe=Ir(n,H.getState,x),Je=pe=>{const{nodeDragThreshold:Z}=H.getState();if(E&&(!T||!y||Z>0)&&Su({id:n,store:H,nodeRef:$}),f){const he=H.getState().nodeInternals.get(n);he&&f(pe,{...he})}},Ce=pe=>{if(!gu(pe)&&!B)if(D0.includes(pe.key)&&E){const Z=pe.key==="Escape";Su({id:n,store:H,unselect:Z,nodeRef:$})}else y&&c&&Object.prototype.hasOwnProperty.call(Jo,pe.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${pe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),ee({x:Jo[pe.key].x,y:Jo[pe.key].y,isShiftPressed:pe.shiftKey}))};R.useEffect(()=>()=>{K.current&&(F==null||F.unobserve(K.current),K.current=null)},[]),R.useEffect(()=>{if($.current&&!P){const pe=$.current;(!k||!L||K.current!==pe)&&(K.current&&(F==null||F.unobserve(K.current)),F==null||F.observe(pe),K.current=pe)}},[P,k,L]),R.useEffect(()=>{const pe=J.current!==o,Z=Y.current!==I,he=q.current!==M;$.current&&(pe||Z||he)&&(pe&&(J.current=o),Z&&(Y.current=I),he&&(q.current=M),H.getState().updateNodeDimensions([{id:n,nodeElement:$.current,forceUpdate:!0}]))},[n,o,I,M]);const it=fy({nodeRef:$,disabled:P||!y,noDragClassName:N,handleSelector:V,nodeId:n,isSelectable:E,selectNodesOnDrag:T});return P?null:b.createElement("div",{className:Oe(["react-flow__node",`react-flow__node-${o}`,{[U]:y},g,{selected:c,selectable:E,parent:z,dragging:it}]),ref:$,style:{zIndex:G,transform:`translate(${l}px,${u}px)`,pointerEvents:X?"all":"none",visibility:k?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:oe,onMouseLeave:ae,onContextMenu:ce,onClick:Je,onDoubleClick:Qe,onKeyDown:w?Ce:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":B?void 0:`${ty}-${A}`,"aria-label":D},b.createElement(LT,{value:n},b.createElement(e,{id:n,data:r,type:o,xPos:i,yPos:s,selected:c,isConnectable:_,sourcePosition:I,targetPosition:M,dragging:it,dragHandle:V,zIndex:G})))};return t.displayName="NodeWrapper",R.memo(t)};const x1=e=>{const t=e.getNodes().filter(n=>n.selected);return{...wl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function S1({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ke(),{width:r,height:i,x:s,y:l,transformString:u,userSelectionActive:c}=we(x1,qe),f=py(),p=R.useRef(null);if(R.useEffect(()=>{var v;n||(v=p.current)==null||v.focus({preventScroll:!0})},[n]),fy({nodeRef:p}),c||!r||!i)return null;const h=e?v=>{const x=o.getState().getNodes().filter(C=>C.selected);e(v,x)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(Jo,v.key)&&f({x:Jo[v.key].x,y:Jo[v.key].y,isShiftPressed:v.shiftKey})};return b.createElement("div",{className:Oe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},b.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:r,height:i,top:l,left:s}}))}var _1=R.memo(S1);const w1=e=>e.nodesSelectionActive,hy=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:c,onMoveEnd:f,selectionKeyCode:p,selectionOnDrag:h,selectionMode:m,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:C,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:E,zoomOnScroll:_,zoomOnPinch:w,panOnScroll:T,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:F,defaultViewport:V,translateExtent:G,minZoom:z,maxZoom:N,preventScrolling:U,onSelectionContextMenu:k,noWheelClassName:B,noPanClassName:D,disableKeyboardA11y:A})=>{const L=we(w1),H=gi(p),$=gi(g),K=$||F,Y=$||T,q=H||h&&K!==!0;return u1({deleteKeyCode:l,multiSelectionKeyCode:C}),b.createElement(p1,{onMove:u,onMoveStart:c,onMoveEnd:f,onPaneContextMenu:i,elementsSelectable:E,zoomOnScroll:_,zoomOnPinch:w,panOnScroll:Y,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!H&&K,defaultViewport:V,translateExtent:G,minZoom:z,maxZoom:N,zoomActivationKeyCode:y,preventScrolling:U,noWheelClassName:B,noPanClassName:D},b.createElement(ay,{onSelectionStart:v,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:K,isSelecting:!!q,selectionMode:m},e,L&&b.createElement(_1,{onSelectionContextMenu:k,noPanClassName:D,disableKeyboardA11y:A})))};hy.displayName="FlowRenderer";var C1=R.memo(hy);function T1(e){return we(R.useCallback(n=>e?z0(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function N1(e){const t={input:Ar(e.input||Q0),default:Ar(e.default||xu),output:Ar(e.output||j0),group:Ar(e.group||$c)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Ar(e[i]||xu),r),n);return{...t,...o}}const I1=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},A1=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),my=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=we(A1,qe),l=T1(e.onlyRenderVisibleElements),u=R.useRef(),c=R.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(p=>{const h=p.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));i(h)});return u.current=f,f},[]);return R.useEffect(()=>()=>{var f;(f=u==null?void 0:u.current)==null||f.disconnect()},[]),b.createElement("div",{className:"react-flow__nodes",style:Oc},l.map(f=>{var w,T,I;let p=f.type||"default";e.nodeTypes[p]||(s==null||s("003",cn.error003(p)),p="default");const h=e.nodeTypes[p]||e.nodeTypes.default,m=!!(f.draggable||t&&typeof f.draggable>"u"),v=!!(f.selectable||r&&typeof f.selectable>"u"),x=!!(f.connectable||n&&typeof f.connectable>"u"),C=!!(f.focusable||o&&typeof f.focusable>"u"),g=e.nodeExtent?Uc(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,y=(g==null?void 0:g.x)??0,E=(g==null?void 0:g.y)??0,_=I1({x:y,y:E,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return b.createElement(h,{key:f.id,id:f.id,className:f.className,style:f.style,type:p,data:f.data,sourcePosition:f.sourcePosition||Q.Bottom,targetPosition:f.targetPosition||Q.Top,hidden:f.hidden,xPos:y,yPos:E,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:m,isSelectable:v,isConnectable:x,isFocusable:C,resizeObserver:c,dragHandle:f.dragHandle,zIndex:((w=f[Ne])==null?void 0:w.z)??0,isParent:!!((T=f[Ne])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((I=f[Ne])!=null&&I.handleBounds)})}))};my.displayName="NodeRenderer";var R1=R.memo(my);const M1=(e,t,n)=>n===Q.Left?e-t:n===Q.Right?e+t:e,P1=(e,t,n)=>n===Q.Top?e-t:n===Q.Bottom?e+t:e,np="react-flow__edgeupdater",op=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:l})=>b.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:Oe([np,`${np}-${l}`]),cx:M1(t,o,e),cy:P1(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),k1=()=>!0;var _o=e=>{const t=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:l,selected:u,animated:c,label:f,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,style:C,source:g,target:y,sourceX:E,sourceY:_,targetX:w,targetY:T,sourcePosition:I,targetPosition:M,elementsSelectable:P,hidden:F,sourceHandleId:V,targetHandleId:G,onContextMenu:z,onMouseEnter:N,onMouseMove:U,onMouseLeave:k,reconnectRadius:B,onReconnect:D,onReconnectStart:A,onReconnectEnd:L,markerEnd:H,markerStart:$,rfId:K,ariaLabel:Y,isFocusable:q,isReconnectable:J,pathOptions:X,interactionWidth:ee,disableKeyboardA11y:te})=>{const oe=R.useRef(null),[ae,ce]=R.useState(!1),[Qe,Je]=R.useState(!1),Ce=ke(),it=R.useMemo(()=>`url('#${vu($,K)}')`,[$,K]),pe=R.useMemo(()=>`url('#${vu(H,K)}')`,[H,K]);if(F)return null;const Z=be=>{var Gt;const{edges:Nt,addSelectedEdges:Jn,unselectNodesAndEdges:Yn,multiSelectionActive:Wn}=Ce.getState(),Xt=Nt.find(hr=>hr.id===n);Xt&&(P&&(Ce.setState({nodesSelectionActive:!1}),Xt.selected&&Wn?(Yn({nodes:[],edges:[Xt]}),(Gt=oe.current)==null||Gt.blur()):Jn([n])),s&&s(be,Xt))},he=Nr(n,Ce.getState,l),Vt=Nr(n,Ce.getState,z),mn=Nr(n,Ce.getState,N),gn=Nr(n,Ce.getState,U),Kt=Nr(n,Ce.getState,k),bt=(be,Nt)=>{if(be.button!==0)return;const{edges:Jn,isValidConnection:Yn}=Ce.getState(),Wn=Nt?y:g,Xt=(Nt?G:V)||null,Gt=Nt?"target":"source",hr=Yn||k1,Al=Nt,mr=Jn.find(Kn=>Kn.id===n);Je(!0),A==null||A(be,mr,Gt);const Rl=Kn=>{Je(!1),L==null||L(Kn,mr,Gt)};Y0({event:be,handleId:Xt,nodeId:Wn,onConnect:Kn=>D==null?void 0:D(mr,Kn),isTarget:Al,getState:Ce.getState,setState:Ce.setState,isValidConnection:hr,edgeUpdaterType:Gt,onReconnectEnd:Rl})},Ze=be=>bt(be,!0),st=be=>bt(be,!1),ht=()=>ce(!0),Tt=()=>ce(!1),Ht=!P&&!s,pr=be=>{var Nt;if(!te&&D0.includes(be.key)&&P){const{unselectNodesAndEdges:Jn,addSelectedEdges:Yn,edges:Wn}=Ce.getState();be.key==="Escape"?((Nt=oe.current)==null||Nt.blur(),Jn({edges:[Wn.find(Gt=>Gt.id===n)]})):Yn([n])}};return b.createElement("g",{className:Oe(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:u,animated:c,inactive:Ht,updating:ae}]),onClick:Z,onDoubleClick:he,onContextMenu:Vt,onMouseEnter:mn,onMouseMove:gn,onMouseLeave:Kt,onKeyDown:q?pr:void 0,tabIndex:q?0:void 0,role:q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${g} to ${y}`,"aria-describedby":q?`${ny}-${K}`:void 0,ref:oe},!Qe&&b.createElement(e,{id:n,source:g,target:y,selected:u,animated:c,label:f,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,data:i,style:C,sourceX:E,sourceY:_,targetX:w,targetY:T,sourcePosition:I,targetPosition:M,sourceHandleId:V,targetHandleId:G,markerStart:it,markerEnd:pe,pathOptions:X,interactionWidth:ee}),J&&b.createElement(b.Fragment,null,(J==="source"||J===!0)&&b.createElement(op,{position:I,centerX:E,centerY:_,radius:B,onMouseDown:Ze,onMouseEnter:ht,onMouseOut:Tt,type:"source"}),(J==="target"||J===!0)&&b.createElement(op,{position:M,centerX:w,centerY:T,radius:B,onMouseDown:st,onMouseEnter:ht,onMouseOut:Tt,type:"target"})))};return t.displayName="EdgeWrapper",R.memo(t)};function D1(e){const t={default:_o(e.default||Ys),straight:_o(e.bezier||Gc),step:_o(e.step||Hc),smoothstep:_o(e.step||_l),simplebezier:_o(e.simplebezier||bc)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=_o(e[i]||Ys),r),n);return{...t,...o}}function rp(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Q.Top:return{x:o+i/2,y:r};case Q.Right:return{x:o+i,y:r+s/2};case Q.Bottom:return{x:o+i/2,y:r+s};case Q.Left:return{x:o,y:r+s/2}}}function ip(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const F1=(e,t,n,o,r,i)=>{const s=rp(n,e,t),l=rp(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function L1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:l,transform:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=Vc({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),h=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(p*h)>0}function sp(e){var o,r,i,s,l;const t=((o=e==null?void 0:e[Ne])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const U1=[{level:0,isMaxLevel:!0,edges:[]}];function V1(e,t,n=!1){let o=-1;const r=e.reduce((s,l)=>{var f,p;const u=Et(l.zIndex);let c=u?l.zIndex:0;if(n){const h=t.get(l.target),m=t.get(l.source),v=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((f=m==null?void 0:m[Ne])==null?void 0:f.z)||0,((p=h==null?void 0:h[Ne])==null?void 0:p.z)||0,1e3);c=(u?l.zIndex:0)+(v?x:0)}return s[c]?s[c].push(l):s[c]=[l],o=c>o?c:o,s},{}),i=Object.entries(r).map(([s,l])=>{const u=+s;return{edges:l,level:u,isMaxLevel:u===o}});return i.length===0?U1:i}function b1(e,t,n){const o=we(R.useCallback(r=>e?r.edges.filter(i=>{const s=t.get(i.source),l=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&L1({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return V1(o,t,n)}const H1=({color:e="none",strokeWidth:t=1})=>b.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),G1=({color:e="none",strokeWidth:t=1})=>b.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lp={[Js.Arrow]:H1,[Js.ArrowClosed]:G1};function B1(e){const t=ke();return R.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(lp,e)?lp[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",cn.error009(e)),null)},[e])}const z1=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=B1(t);return u?b.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},b.createElement(u,{color:n,strokeWidth:s})):null},$1=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const l=vu(s,t);o.includes(l)||(r.push({id:l,color:s.color||e,...s}),o.push(l))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},gy=({defaultColor:e,rfId:t})=>{const n=we(R.useCallback($1({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return b.createElement("defs",null,n.map(o=>b.createElement(z1,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};gy.displayName="MarkerDefinitions";var q1=R.memo(gy);const O1=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),yy=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,onEdgeDoubleClick:p,onReconnect:h,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:x,children:C,disableKeyboardA11y:g})=>{const{edgesFocusable:y,edgesUpdatable:E,elementsSelectable:_,width:w,height:T,connectionMode:I,nodeInternals:M,onError:P}=we(O1,qe),F=b1(t,M,n);return w?b.createElement(b.Fragment,null,F.map(({level:V,edges:G,isMaxLevel:z})=>b.createElement("svg",{key:V,style:{zIndex:V},width:w,height:T,className:"react-flow__edges react-flow__container"},z&&b.createElement(q1,{defaultColor:e,rfId:o}),b.createElement("g",null,G.map(N=>{const[U,k,B]=sp(M.get(N.source)),[D,A,L]=sp(M.get(N.target));if(!B||!L)return null;let H=N.type||"default";r[H]||(P==null||P("011",cn.error011(H)),H="default");const $=r[H]||r.default,K=I===ho.Strict?A.target:(A.target??[]).concat(A.source??[]),Y=ip(k.source,N.sourceHandle),q=ip(K,N.targetHandle),J=(Y==null?void 0:Y.position)||Q.Bottom,X=(q==null?void 0:q.position)||Q.Top,ee=!!(N.focusable||y&&typeof N.focusable>"u"),te=N.reconnectable||N.updatable,oe=typeof h<"u"&&(te||E&&typeof te>"u");if(!Y||!q)return P==null||P("008",cn.error008(Y,N)),null;const{sourceX:ae,sourceY:ce,targetX:Qe,targetY:Je}=F1(U,Y,J,D,q,X);return b.createElement($,{key:N.id,id:N.id,className:Oe([N.className,i]),type:H,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:ae,sourceY:ce,targetX:Qe,targetY:Je,sourcePosition:J,targetPosition:X,elementsSelectable:_,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:f,onEdgeDoubleClick:p,onReconnect:h,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:x,rfId:o,ariaLabel:N.ariaLabel,isFocusable:ee,isReconnectable:oe,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:g})})))),C):null};yy.displayName="EdgeRenderer";var J1=R.memo(yy);const Y1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function W1({children:e}){const t=we(Y1);return b.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function K1(e){const t=qc(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const X1={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top},vy=({nodeId:e,handleType:t,style:n,type:o=Tn.Bezier,CustomComponent:r,connectionStatus:i})=>{var T,I,M;const{fromNode:s,handleId:l,toX:u,toY:c,connectionMode:f}=we(R.useCallback(P=>({fromNode:P.nodeInternals.get(e),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[e]),qe),p=(T=s==null?void 0:s[Ne])==null?void 0:T.handleBounds;let h=p==null?void 0:p[t];if(f===ho.Loose&&(h=h||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!h)return null;const m=l?h.find(P=>P.id===l):h[0],v=m?m.x+m.width/2:(s.width??0)/2,x=m?m.y+m.height/2:s.height??0,C=(((I=s.positionAbsolute)==null?void 0:I.x)??0)+v,g=(((M=s.positionAbsolute)==null?void 0:M.y)??0)+x,y=m==null?void 0:m.position,E=y?X1[y]:null;if(!y||!E)return null;if(r)return b.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:m,fromX:C,fromY:g,toX:u,toY:c,fromPosition:y,toPosition:E,connectionStatus:i});let _="";const w={sourceX:C,sourceY:g,sourcePosition:y,targetX:u,targetY:c,targetPosition:E};return o===Tn.Bezier?[_]=b0(w):o===Tn.Step?[_]=yu({...w,borderRadius:0}):o===Tn.SmoothStep?[_]=yu(w):o===Tn.SimpleBezier?[_]=V0(w):_=`M${C},${g} ${u},${c}`,b.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};vy.displayName="ConnectionLine";const Q1=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Z1({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:i,nodesConnectable:s,width:l,height:u,connectionStatus:c}=we(Q1,qe);return!(r&&i&&l&&s)?null:b.createElement("svg",{style:e,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},b.createElement("g",{className:Oe(["react-flow__connection",c])},b.createElement(vy,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:c})))}function ap(e,t){return R.useRef(null),ke(),R.useMemo(()=>t(e),[e])}const Ey=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:x,onSelectionEnd:C,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:E,connectionLineContainerStyle:_,selectionKeyCode:w,selectionOnDrag:T,selectionMode:I,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:F,deleteKeyCode:V,onlyRenderVisibleElements:G,elementsSelectable:z,selectNodesOnDrag:N,defaultViewport:U,translateExtent:k,minZoom:B,maxZoom:D,preventScrolling:A,defaultMarkerColor:L,zoomOnScroll:H,zoomOnPinch:$,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:q,zoomOnDoubleClick:J,panOnDrag:X,onPaneClick:ee,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneScroll:ce,onPaneContextMenu:Qe,onEdgeContextMenu:Je,onEdgeMouseEnter:Ce,onEdgeMouseMove:it,onEdgeMouseLeave:pe,onReconnect:Z,onReconnectStart:he,onReconnectEnd:Vt,reconnectRadius:mn,noDragClassName:gn,noWheelClassName:Kt,noPanClassName:bt,elevateEdgesOnSelect:Ze,disableKeyboardA11y:st,nodeOrigin:ht,nodeExtent:Tt,rfId:Ht})=>{const pr=ap(e,N1),be=ap(t,D1);return K1(i),b.createElement(C1,{onPaneClick:ee,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneContextMenu:Qe,onPaneScroll:ce,deleteKeyCode:V,selectionKeyCode:w,selectionOnDrag:T,selectionMode:I,onSelectionStart:x,onSelectionEnd:C,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:F,elementsSelectable:z,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:H,zoomOnPinch:$,zoomOnDoubleClick:J,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:q,panOnDrag:X,defaultViewport:U,translateExtent:k,minZoom:B,maxZoom:D,onSelectionContextMenu:v,preventScrolling:A,noDragClassName:gn,noWheelClassName:Kt,noPanClassName:bt,disableKeyboardA11y:st},b.createElement(W1,null,b.createElement(J1,{edgeTypes:be,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:G,onEdgeContextMenu:Je,onEdgeMouseEnter:Ce,onEdgeMouseMove:it,onEdgeMouseLeave:pe,onReconnect:Z,onReconnectStart:he,onReconnectEnd:Vt,reconnectRadius:mn,defaultMarkerColor:L,noPanClassName:bt,elevateEdgesOnSelect:!!Ze,disableKeyboardA11y:st,rfId:Ht},b.createElement(Z1,{style:y,type:g,component:E,containerStyle:_})),b.createElement("div",{className:"react-flow__edgelabel-renderer"}),b.createElement(R1,{nodeTypes:pr,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:N,onlyRenderVisibleElements:G,noPanClassName:bt,noDragClassName:gn,disableKeyboardA11y:st,nodeOrigin:ht,nodeExtent:Tt,rfId:Ht})))};Ey.displayName="GraphView";var j1=R.memo(Ey);const _u=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_u,nodeExtent:_u,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ho.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:RT,isValidConnection:void 0},eN=()=>$S((e,t)=>({...vn,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:ua(n,o,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",i=typeof o<"u",s=r?ua(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:l,domNode:u,nodeOrigin:c}=t(),f=u==null?void 0:u.querySelector(".react-flow__viewport");if(!f)return;const p=window.getComputedStyle(f),{m22:h}=new window.DOMMatrixReadOnly(p.transform),m=n.reduce((x,C)=>{const g=r.get(C.id);if(g!=null&&g.hidden)r.set(g.id,{...g,[Ne]:{...g[Ne],handleBounds:void 0}});else if(g){const y=Lc(C.nodeElement);!!(y.width&&y.height&&(g.width!==y.width||g.height!==y.height||C.forceUpdate))&&(r.set(g.id,{...g,[Ne]:{...g[Ne],handleBounds:{source:tp(".source",C.nodeElement,h,c),target:tp(".target",C.nodeElement,h,c)}},...y}),x.push({id:g.id,type:"dimensions",dimensions:y}))}return x},[]);ry(r,c);const v=s||i&&!s&&iy(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:v}),(m==null?void 0:m.length)>0&&(o==null||o(m))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(l=>{const u={id:l.id,type:"position",dragging:r};return o&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});i(s)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:l,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(i){const c=ly(n,l()),f=ua(c,r,s,u);e({nodeInternals:f})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,l=null;o?s=n.map(u=>_n(u,!0)):(s=Lo(i(),n),l=Lo(r,[])),Ki({changedNodes:s,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,l=null;o?s=n.map(u=>_n(u,!0)):(s=Lo(r,n),l=Lo(i(),[])),Ki({changedNodes:l,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:i}=t(),s=n||i(),l=o||r,u=s.map(f=>(f.selected=!1,_n(f.id,!1))),c=l.map(f=>_n(f.id,!1));Ki({changedNodes:u,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o==null||o.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o==null||o.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),i=o().filter(l=>l.selected).map(l=>_n(l.id,!1)),s=n.filter(l=>l.selected).map(l=>_n(l.id,!1));Ki({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=Uc(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:i,d3Zoom:s,d3Selection:l,translateExtent:u}=t();if(!s||!l||!n.x&&!n.y)return!1;const c=Un.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),f=[[0,0],[r,i]],p=s==null?void 0:s.constrain()(c,f,u);return s.transform(l,p),o[0]!==p.x||o[1]!==p.y||o[2]!==p.k},cancelConnection:()=>e({connectionNodeId:vn.connectionNodeId,connectionHandleId:vn.connectionHandleId,connectionHandleType:vn.connectionHandleType,connectionStatus:vn.connectionStatus,connectionStartHandle:vn.connectionStartHandle,connectionEndHandle:vn.connectionEndHandle}),reset:()=>e({...vn})}),Object.is),Jc=({children:e})=>{const t=R.useRef(null);return t.current||(t.current=eN()),b.createElement(ST,{value:t.current},e)};Jc.displayName="ReactFlowProvider";const xy=({children:e})=>R.useContext(Sl)?b.createElement(b.Fragment,null,e):b.createElement(Jc,null,e);xy.displayName="ReactFlowWrapper";const tN={input:Q0,default:xu,output:j0,group:$c},nN={default:Ys,straight:Gc,step:Hc,smoothstep:_l,simplebezier:bc},oN=[0,0],rN=[15,15],iN={x:0,y:0,zoom:1},sN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Sy=R.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=tN,edgeTypes:s=nN,onNodeClick:l,onEdgeClick:u,onInit:c,onMove:f,onMoveStart:p,onMoveEnd:h,onConnect:m,onConnectStart:v,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:g,onNodeMouseEnter:y,onNodeMouseMove:E,onNodeMouseLeave:_,onNodeContextMenu:w,onNodeDoubleClick:T,onNodeDragStart:I,onNodeDrag:M,onNodeDragStop:P,onNodesDelete:F,onEdgesDelete:V,onSelectionChange:G,onSelectionDragStart:z,onSelectionDrag:N,onSelectionDragStop:U,onSelectionContextMenu:k,onSelectionStart:B,onSelectionEnd:D,connectionMode:A=ho.Strict,connectionLineType:L=Tn.Bezier,connectionLineStyle:H,connectionLineComponent:$,connectionLineContainerStyle:K,deleteKeyCode:Y="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:J=!1,selectionMode:X=mi.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:te=Os()?"Meta":"Control",zoomActivationKeyCode:oe=Os()?"Meta":"Control",snapToGrid:ae=!1,snapGrid:ce=rN,onlyRenderVisibleElements:Qe=!1,selectNodesOnDrag:Je=!0,nodesDraggable:Ce,nodesConnectable:it,nodesFocusable:pe,nodeOrigin:Z=oN,edgesFocusable:he,edgesUpdatable:Vt,elementsSelectable:mn,defaultViewport:gn=iN,minZoom:Kt=.5,maxZoom:bt=2,translateExtent:Ze=_u,preventScrolling:st=!0,nodeExtent:ht,defaultMarkerColor:Tt="#b1b1b7",zoomOnScroll:Ht=!0,zoomOnPinch:pr=!0,panOnScroll:be=!1,panOnScrollSpeed:Nt=.5,panOnScrollMode:Jn=oo.Free,zoomOnDoubleClick:Yn=!0,panOnDrag:Wn=!0,onPaneClick:Xt,onPaneMouseEnter:Gt,onPaneMouseMove:hr,onPaneMouseLeave:Al,onPaneScroll:mr,onPaneContextMenu:Rl,children:sd,onEdgeContextMenu:Kn,onEdgeDoubleClick:pv,onEdgeMouseEnter:hv,onEdgeMouseMove:mv,onEdgeMouseLeave:gv,onEdgeUpdate:yv,onEdgeUpdateStart:vv,onEdgeUpdateEnd:Ev,onReconnect:xv,onReconnectStart:Sv,onReconnectEnd:_v,reconnectRadius:wv=10,edgeUpdaterRadius:Cv=10,onNodesChange:Tv,onEdgesChange:Nv,noDragClassName:Iv="nodrag",noWheelClassName:Av="nowheel",noPanClassName:ld="nopan",fitView:Rv=!1,fitViewOptions:Mv,connectOnClick:Pv=!0,attributionPosition:kv,proOptions:Dv,defaultEdgeOptions:Fv,elevateNodesOnSelect:Lv=!0,elevateEdgesOnSelect:Uv=!1,disableKeyboardA11y:ad=!1,autoPanOnConnect:Vv=!0,autoPanOnNodeDrag:bv=!0,connectionRadius:Hv=20,isValidConnection:Gv,onError:Bv,style:zv,id:ud,nodeDragThreshold:$v,...qv},Ov)=>{const Ml=ud||"1";return b.createElement("div",{...qv,style:{...zv,...sN},ref:Ov,className:Oe(["react-flow",r]),"data-testid":"rf__wrapper",id:ud},b.createElement(xy,null,b.createElement(j1,{onInit:c,onMove:f,onMoveStart:p,onMoveEnd:h,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:y,onNodeMouseMove:E,onNodeMouseLeave:_,onNodeContextMenu:w,onNodeDoubleClick:T,nodeTypes:i,edgeTypes:s,connectionLineType:L,connectionLineStyle:H,connectionLineComponent:$,connectionLineContainerStyle:K,selectionKeyCode:q,selectionOnDrag:J,selectionMode:X,deleteKeyCode:Y,multiSelectionKeyCode:te,panActivationKeyCode:ee,zoomActivationKeyCode:oe,onlyRenderVisibleElements:Qe,selectNodesOnDrag:Je,defaultViewport:gn,translateExtent:Ze,minZoom:Kt,maxZoom:bt,preventScrolling:st,zoomOnScroll:Ht,zoomOnPinch:pr,zoomOnDoubleClick:Yn,panOnScroll:be,panOnScrollSpeed:Nt,panOnScrollMode:Jn,panOnDrag:Wn,onPaneClick:Xt,onPaneMouseEnter:Gt,onPaneMouseMove:hr,onPaneMouseLeave:Al,onPaneScroll:mr,onPaneContextMenu:Rl,onSelectionContextMenu:k,onSelectionStart:B,onSelectionEnd:D,onEdgeContextMenu:Kn,onEdgeDoubleClick:pv,onEdgeMouseEnter:hv,onEdgeMouseMove:mv,onEdgeMouseLeave:gv,onReconnect:xv??yv,onReconnectStart:Sv??vv,onReconnectEnd:_v??Ev,reconnectRadius:wv??Cv,defaultMarkerColor:Tt,noDragClassName:Iv,noWheelClassName:Av,noPanClassName:ld,elevateEdgesOnSelect:Uv,rfId:Ml,disableKeyboardA11y:ad,nodeOrigin:Z,nodeExtent:ht}),b.createElement(QT,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:m,onConnectStart:v,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:g,nodesDraggable:Ce,nodesConnectable:it,nodesFocusable:pe,edgesFocusable:he,edgesUpdatable:Vt,elementsSelectable:mn,elevateNodesOnSelect:Lv,minZoom:Kt,maxZoom:bt,nodeExtent:ht,onNodesChange:Tv,onEdgesChange:Nv,snapToGrid:ae,snapGrid:ce,connectionMode:A,translateExtent:Ze,connectOnClick:Pv,defaultEdgeOptions:Fv,fitView:Rv,fitViewOptions:Mv,onNodesDelete:F,onEdgesDelete:V,onNodeDragStart:I,onNodeDrag:M,onNodeDragStop:P,onSelectionDrag:N,onSelectionDragStart:z,onSelectionDragStop:U,noPanClassName:ld,nodeOrigin:Z,rfId:Ml,autoPanOnConnect:Vv,autoPanOnNodeDrag:bv,onError:Bv,connectionRadius:Hv,isValidConnection:Gv,nodeDragThreshold:$v}),b.createElement(KT,{onSelectionChange:G}),sd,b.createElement(wT,{proOptions:Dv,position:kv}),b.createElement(n1,{rfId:Ml,disableKeyboardA11y:ad})))});Sy.displayName="ReactFlow";function lN(){return b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},b.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function aN(){return b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},b.createElement("path",{d:"M0 0h32v4.2H0z"}))}function uN(){return b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},b.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function cN(){return b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},b.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function dN(){return b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},b.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ur=({children:e,className:t,...n})=>b.createElement("button",{type:"button",className:Oe(["react-flow__controls-button",t]),...n},e);Ur.displayName="ControlButton";const fN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),_y=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:c,children:f,position:p="bottom-left"})=>{const h=ke(),[m,v]=R.useState(!1),{isInteractive:x,minZoomReached:C,maxZoomReached:g}=we(fN,qe),{zoomIn:y,zoomOut:E,fitView:_}=qc();if(R.useEffect(()=>{v(!0)},[]),!m)return null;const w=()=>{y(),i==null||i()},T=()=>{E(),s==null||s()},I=()=>{_(r),l==null||l()},M=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u==null||u(!x)};return b.createElement(M0,{className:Oe(["react-flow__controls",c]),position:p,style:e,"data-testid":"rf__controls"},t&&b.createElement(b.Fragment,null,b.createElement(Ur,{onClick:w,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},b.createElement(lN,null)),b.createElement(Ur,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},b.createElement(aN,null))),n&&b.createElement(Ur,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},b.createElement(uN,null)),o&&b.createElement(Ur,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},x?b.createElement(dN,null):b.createElement(cN,null)),f)};_y.displayName="Controls";var pN=R.memo(_y),St;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(St||(St={}));function hN({color:e,dimensions:t,lineWidth:n}){return b.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function mN({color:e,radius:t}){return b.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const gN={[St.Dots]:"#91919a",[St.Lines]:"#eee",[St.Cross]:"#e2e2e2"},yN={[St.Dots]:1,[St.Lines]:1,[St.Cross]:6},vN=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function wy({id:e,variant:t=St.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=2,color:s,style:l,className:u}){const c=R.useRef(null),{transform:f,patternId:p}=we(vN,qe),h=s||gN[t],m=o||yN[t],v=t===St.Dots,x=t===St.Cross,C=Array.isArray(n)?n:[n,n],g=[C[0]*f[2]||1,C[1]*f[2]||1],y=m*f[2],E=x?[y,y]:g,_=v?[y/i,y/i]:[E[0]/i,E[1]/i];return b.createElement("svg",{className:Oe(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},b.createElement("pattern",{id:p+e,x:f[0]%g[0],y:f[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},v?b.createElement(mN,{color:h,radius:y/i}):b.createElement(hN,{dimensions:E,color:h,lineWidth:r})),b.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}wy.displayName="Background";var EN=R.memo(wy),Yo;(function(e){e.Line="line",e.Handle="handle"})(Yo||(Yo={}));function xN({width:e,prevWidth:t,height:n,prevHeight:o,invertX:r,invertY:i}){const s=e-t,l=n-o,u=[s>0?1:s<0?-1:0,l>0?1:l<0?-1:0];return s&&r&&(u[0]=u[0]*-1),l&&i&&(u[1]=u[1]*-1),u}const Cy={width:0,height:0,x:0,y:0},SN={...Cy,pointerX:0,pointerY:0,aspectRatio:1};function _N({nodeId:e,position:t,variant:n=Yo.Handle,className:o,style:r={},children:i,color:s,minWidth:l=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:h,onResizeStart:m,onResize:v,onResizeEnd:x}){const C=H0(),g=typeof e=="string"?e:C,y=ke(),E=R.useRef(null),_=R.useRef(SN),w=R.useRef(Cy),T=dy(),I=n===Yo.Line?"right":"bottom-right",M=t??I;R.useEffect(()=>{if(!E.current||!g)return;const G=yt(E.current),z=M.includes("right")||M.includes("left"),N=M.includes("bottom")||M.includes("top"),U=M.includes("left"),k=M.includes("top"),B=m0().on("start",D=>{const A=y.getState().nodeInternals.get(g),{xSnapped:L,ySnapped:H}=T(D);w.current={width:(A==null?void 0:A.width)??0,height:(A==null?void 0:A.height)??0,x:(A==null?void 0:A.position.x)??0,y:(A==null?void 0:A.position.y)??0},_.current={...w.current,pointerX:L,pointerY:H,aspectRatio:w.current.width/w.current.height},m==null||m(D,{...w.current})}).on("drag",D=>{const{nodeInternals:A,triggerNodeChanges:L}=y.getState(),{xSnapped:H,ySnapped:$}=T(D),K=A.get(g);if(K){const Y=[],{pointerX:q,pointerY:J,width:X,height:ee,x:te,y:oe,aspectRatio:ae}=_.current,{x:ce,y:Qe,width:Je,height:Ce}=w.current,it=Math.floor(z?H-q:0),pe=Math.floor(N?$-J:0);let Z=Gn(X+(U?-it:it),l,c),he=Gn(ee+(k?-pe:pe),u,f);if(p){const Ze=Z/he,st=z&&N,ht=z&&!N,Tt=N&&!z;Z=Ze<=ae&&st||Tt?he*ae:Z,he=Ze>ae&&st||ht?Z/ae:he,Z>=c?(Z=c,he=c/ae):Z<=l&&(Z=l,he=l/ae),he>=f?(he=f,Z=f*ae):he<=u&&(he=u,Z=u*ae)}const Vt=Z!==Je,mn=he!==Ce;if(U||k){const Ze=U?te-(Z-X):te,st=k?oe-(he-ee):oe,ht=Ze!==ce&&Vt,Tt=st!==Qe&&mn;if(ht||Tt){const Ht={id:K.id,type:"position",position:{x:ht?Ze:ce,y:Tt?st:Qe}};Y.push(Ht),w.current.x=Ht.position.x,w.current.y=Ht.position.y}}if(Vt||mn){const Ze={id:g,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:Z,height:he}};Y.push(Ze),w.current.width=Z,w.current.height=he}if(Y.length===0)return;const gn=xN({width:w.current.width,prevWidth:Je,height:w.current.height,prevHeight:Ce,invertX:U,invertY:k}),Kt={...w.current,direction:gn};if((h==null?void 0:h(D,Kt))===!1)return;v==null||v(D,Kt),L(Y)}}).on("end",D=>{const A={id:g,type:"dimensions",resizing:!1};x==null||x(D,{...w.current}),y.getState().triggerNodeChanges([A])});return G.call(B),()=>{G.on(".drag",null)}},[g,M,l,u,c,f,p,T,m,v,x]);const P=M.split("-"),F=n===Yo.Line?"borderColor":"backgroundColor",V=s?{...r,[F]:s}:r;return b.createElement("div",{className:Oe(["react-flow__resize-control","nodrag",...P,n,o]),ref:E,style:V},i)}var up=R.memo(_N);const wN=["top-left","top-right","bottom-left","bottom-right"],CN=["top","right","bottom","left"];function TN({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:i,color:s,minWidth:l=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:h,onResizeStart:m,onResize:v,onResizeEnd:x}){return t?b.createElement(b.Fragment,null,CN.map(C=>b.createElement(up,{key:C,className:r,style:i,nodeId:e,position:C,variant:Yo.Line,color:s,minWidth:l,minHeight:u,maxWidth:c,maxHeight:f,onResizeStart:m,keepAspectRatio:p,shouldResize:h,onResize:v,onResizeEnd:x})),wN.map(C=>b.createElement(up,{key:C,className:n,style:o,nodeId:e,position:C,color:s,minWidth:l,minHeight:u,maxWidth:c,maxHeight:f,onResizeStart:m,keepAspectRatio:p,shouldResize:h,onResize:v,onResizeEnd:x}))):null}var ne;(function(e){e.START="start",e.PROCESS="process",e.DECISION="decision",e.AI_TASK="aiTask",e.END="end",e.DELAY="delay",e.CODE="code",e.LOG="log",e.GROUP="group"})(ne||(ne={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(e,t)=>{const n=R.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...c},f)=>R.createElement("svg",{ref:f,...NN,width:r,height:r,stroke:o,strokeWidth:s?Number(i)*24/Number(r):i,className:["lucide",`lucide-${IN(e)}`,l].join(" "),...c},[...t.map(([p,h])=>R.createElement(p,h)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ie("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ie("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=ie("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=ie("FileCode",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ie("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ie("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=ie("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=ie("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=ie("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ie("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=ie("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=ie("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),QN=[{id:"flow",label:"",items:[{type:ne.START,label:"",icon:Kc,color:"emerald"},{type:ne.END,label:"",icon:Fy,color:"red"},{type:ne.DECISION,label:"",icon:My,color:"amber"},{type:ne.GROUP,label:"",icon:Ny,color:"indigo"}]},{id:"logic",label:" & ",items:[{type:ne.PROCESS,label:"",icon:Dy,color:"blue"},{type:ne.CODE,label:"C# ",icon:Ry,color:"slate"},{type:ne.DELAY,label:"",icon:Ay,color:"orange"}]},{id:"advanced",label:"",items:[{type:ne.AI_TASK,label:"AI ",icon:Ks,color:"purple"},{type:ne.LOG,label:"",icon:Xc,color:"gray"}]}],ZN=()=>{const[e,t]=R.useState(!1),[n,o]=R.useState({x:20,y:80}),[r,i]=R.useState(!1),[s,l]=R.useState({flow:!0,logic:!0,advanced:!0}),u=R.useRef(null);R.useEffect(()=>{const h=v=>{r&&o(x=>({x:x.x+v.movementX,y:x.y+v.movementY}))},m=()=>{i(!1)};return r&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",m)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m)}},[r]);const c=(h,m,v)=>{h.dataTransfer.setData("application/reactflow",m),h.dataTransfer.setData("application/label",v),h.dataTransfer.effectAllowed="move"},f=h=>{l(m=>({...m,[h]:!m[h]}))},p=({type:h,label:m,icon:v,color:x})=>S.jsxs("div",{className:`flex items-center p-2 mb-2 bg-white rounded-md border border-slate-200 shadow-sm cursor-move hover:shadow hover:border-${x}-400 transition-all group`,onDragStart:C=>c(C,h,m),draggable:!0,children:[S.jsx(UN,{className:"w-3.5 h-3.5 text-slate-300 mr-2 group-hover:text-slate-500"}),S.jsx("div",{className:`p-1.5 rounded bg-${x}-50 mr-2`,children:S.jsx(v,{className:`w-4 h-4 text-${x}-600`})}),!e&&S.jsx("div",{className:"text-xs font-medium text-slate-700",children:m})]});return S.jsxs("aside",{className:`absolute z-40 bg-white/95 backdrop-blur shadow-xl border border-slate-200 rounded-xl transition-all duration-200 flex flex-col select-none ${e?"w-16":"w-48"}`,style:{left:n.x,top:n.y,maxHeight:"calc(100vh - 150px)"},children:[S.jsx("div",{ref:u,className:"h-6 bg-slate-100 rounded-t-xl cursor-move flex items-center justify-center border-b border-slate-200 hover:bg-slate-200 transition-colors",onMouseDown:()=>i(!0),children:S.jsx(Py,{className:"w-8 h-4 text-slate-400"})}),S.jsxs("div",{className:"p-3 border-b border-slate-100 flex items-center justify-between shrink-0",children:[!e&&S.jsx("div",{children:S.jsx("h2",{className:"font-bold text-slate-800 text-sm",children:""})}),S.jsx("button",{onClick:()=>t(!e),className:`p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-indigo-600 transition-colors ${e?"mx-auto":""}`,title:e?"":"",children:e?S.jsx(wu,{className:"w-4 h-4"}):S.jsx(PN,{className:"w-4 h-4"})})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-thin scrollbar-thumb-slate-200",children:QN.map((h,m)=>S.jsxs("div",{className:m!==0?"mt-4":"",children:[e?m!==0&&S.jsx("div",{className:"w-8 mx-auto h-px bg-slate-100 my-2"}):S.jsxs("button",{onClick:()=>f(h.id),className:"flex items-center justify-between w-full text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 hover:text-indigo-600 transition-colors group",children:[S.jsx("span",{children:h.label}),S.jsx("span",{className:"p-0.5 rounded hover:bg-slate-100 text-slate-300 group-hover:text-indigo-500 transition-colors",children:s[h.id]?S.jsx(Wc,{className:"w-3 h-3"}):S.jsx(wu,{className:"w-3 h-3"})})]}),S.jsx("div",{className:`space-y-1 ${!e&&!s[h.id]?"hidden":""}`,children:h.items.map(v=>S.jsx(p,{type:v.type,label:v.label,icon:v.icon,color:v.color},v.type))})]},h.id))})]})},jN=({onRun:e,isRunning:t,onSave:n,canUndo:o,canRedo:r,onUndo:i,onRedo:s,onToggleVariables:l,onToggleAICopilot:u,onGroupSelected:c})=>S.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 z-20 shadow-sm relative select-none shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-2 rounded-lg shadow-md",children:S.jsx(HN,{className:"w-6 h-6 text-white"})}),S.jsxs("div",{children:[S.jsxs("h1",{className:"font-bold text-xl text-slate-800 tracking-tight",children:["FlowGen ",S.jsx("span",{className:"text-indigo-600",children:"AI"})]}),S.jsx("p",{className:"text-xs text-slate-500 -mt-1",children:""})]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1 mr-2",children:[S.jsx("button",{onClick:i,disabled:!o,className:`p-2 rounded-md transition-colors ${o?"text-slate-600 hover:bg-white hover:shadow-sm":"text-slate-300"}`,title:"",children:S.jsx(YN,{className:"w-4 h-4"})}),S.jsx("button",{onClick:s,disabled:!r,className:`p-2 rounded-md transition-colors ${r?"text-slate-600 hover:bg-white hover:shadow-sm":"text-slate-300"}`,title:"",children:S.jsx(zN,{className:"w-4 h-4"})})]}),S.jsxs("button",{onClick:u,className:"text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 shadow-md hover:shadow-lg flex items-center gap-2 px-3 py-2 rounded-md transition-all text-sm font-medium border border-transparent",children:[S.jsx(Ty,{className:"w-4 h-4"}),"AI "]}),S.jsxs("button",{onClick:c,className:"text-slate-600 hover:text-indigo-600 flex items-center gap-2 px-3 py-2 rounded-md hover:bg-slate-50 transition-colors text-sm font-medium border border-transparent hover:border-slate-200",children:[S.jsx(VN,{className:"w-4 h-4"}),""]}),S.jsxs("button",{onClick:l,className:"text-slate-600 hover:text-indigo-600 flex items-center gap-2 px-3 py-2 rounded-md hover:bg-slate-50 transition-colors text-sm font-medium border border-transparent hover:border-slate-200",children:[S.jsx(Ws,{className:"w-4 h-4"}),""]}),S.jsx("div",{className:"h-8 w-px bg-slate-200 mx-2"}),S.jsxs("button",{onClick:e,disabled:t,className:`
            flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-all shadow-sm
            ${t?"bg-emerald-100 text-emerald-400 cursor-not-allowed border border-emerald-100":"bg-emerald-500 text-white hover:bg-emerald-600 hover:shadow-md active:scale-95 border border-emerald-600"}
          `,children:[S.jsx(Kc,{className:`w-4 h-4 ${t?"animate-spin":"fill-current"}`}),t?"...":""]})]})]}),eI=({logs:e,isRunning:t,onClear:n})=>{const o=R.useRef(null);R.useEffect(()=>{var i;(i=o.current)==null||i.scrollIntoView({behavior:"smooth"})},[e]);const r=i=>{switch(i){case"success":return S.jsx(Iy,{className:"w-4 h-4 text-green-500"});case"error":return S.jsx(WN,{className:"w-4 h-4 text-red-500"});case"warning":return S.jsx(Yc,{className:"w-4 h-4 text-amber-500"});default:return S.jsx(bN,{className:"w-4 h-4 text-blue-400"})}};return S.jsxs("div",{className:"h-64 bg-slate-900 border-t border-slate-700 flex flex-col font-mono text-sm",children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-800 border-b border-slate-700",children:[S.jsxs("div",{className:"flex items-center text-slate-300 gap-2",children:[S.jsx(Xc,{className:"w-4 h-4"}),S.jsx("span",{className:"font-semibold tracking-wide",children:""}),t&&S.jsxs("span",{className:"flex h-2 w-2 relative ml-2",children:[S.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),S.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})]}),S.jsx("button",{onClick:n,className:"text-xs text-slate-400 hover:text-white hover:bg-slate-700 px-2 py-1 rounded transition-colors",children:""})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.length===0?S.jsx("div",{className:"text-slate-600 italic text-center mt-10",children:""}):e.map((i,s)=>i?S.jsxs("div",{className:"flex gap-3 group animate-in fade-in slide-in-from-bottom-2 duration-300",children:[S.jsx("span",{className:"text-slate-600 w-16 shrink-0 text-xs mt-0.5",children:i!=null&&i.timestamp?new Date(i.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--:--:--"}),S.jsx("div",{className:"mt-0.5 shrink-0",children:r(i.status)}),S.jsxs("div",{className:"flex-1",children:[S.jsxs("span",{className:"text-slate-500 mr-2 text-xs uppercase tracking-wider",children:["[",i.nodeLabel||"System","]:"]}),S.jsx("span",{className:`
                    ${i.status==="error"?"text-red-400":i.status==="success"?"text-green-300":i.status==="warning"?"text-amber-300":"text-slate-300"}
                  `,children:i.message})]})]},s):null),S.jsx("div",{ref:o})]})]})},tI=[{id:"v1",name:"userCount",type:"number",value:"0"},{id:"v2",name:"status",type:"string",value:"active"}],nI=[{id:"1",type:ne.START,position:{x:250,y:50},data:{label:""}},{id:"2",type:ne.CODE,position:{x:250,y:150},data:{label:" (C#)",code:`int userCount = 10;
return userCount;`}},{id:"3",type:ne.DELAY,position:{x:250,y:300},data:{label:"",duration:2e3}},{id:"4",type:ne.DECISION,position:{x:250,y:450},data:{label:" > 5?"}},{id:"5",type:ne.LOG,position:{x:100,y:600},data:{label:"",description:""}},{id:"6",type:ne.END,position:{x:275,y:750},data:{label:""}}],oI=[{id:"e1-2",source:"1",target:"2"},{id:"e2-3",source:"2",target:"3"},{id:"e3-4",source:"3",target:"4"},{id:"e4-5",source:"4",target:"5",sourceHandle:"true",label:""},{id:"e4-6",source:"4",target:"6",sourceHandle:"false",label:""},{id:"e5-6",source:"5",target:"6"}],rI=[{label:"",value:"@TIMESTAMP",description:""},{label:"",value:"@DATE",description:" YYYY-MM-DD"},{label:"UUID",value:"@UUID",description:" UUID"},{label:"ID",value:"@USER_ID",description:" ID"},{label:"",value:"@SYS_VERSION",description:""}],Tu=({value:e,onChange:t,variables:n,placeholder:o,className:r,isTextArea:i=!1})=>{const[s,l]=R.useState(!1),[u,c]=R.useState(!1),[f,p]=R.useState(0),[h,m]=R.useState(""),v=R.useRef(null),x=R.useRef(null);R.useEffect(()=>{const T=I=>{x.current&&!x.current.contains(I.target)&&(l(!1),c(!1))};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const C=T=>{const I=T.target.value,M=T.target.selectionStart||0;t(I),p(M);const P=I.slice(0,M),F=P.match(/\{([a-zA-Z0-9_]*)$/),V=P.match(/@([a-zA-Z0-9_]*)$/);F?(m(F[1]),l(!0),c(!1)):V?(m(V[1]),c(!0),l(!1)):(l(!1),c(!1),m(""))},g=T=>{p(T.currentTarget.selectionStart||0)},y=(T,I)=>{const M=e.slice(0,f),P=e.slice(f);let F=M;if(I){const G=M.match(/\{([a-zA-Z0-9_]*)$/);if(G){const z=G[0].length;F=M.slice(0,-z)+`{${T}}`}else F=M+`{${T}}`}else{const G=M.match(/@([a-zA-Z0-9_]*)$/);if(G){const z=G[0].length;F=M.slice(0,-z)+T}else F=M+T}const V=F+P;t(V),l(!1),c(!1),setTimeout(()=>{if(v.current){v.current.focus();const G=F.length;v.current.setSelectionRange(G,G)}},0)},E=n.filter(T=>T.name.toLowerCase().includes(h.toLowerCase())),_=rI.filter(T=>T.value.toLowerCase().includes("@"+h.toLowerCase())||T.label.includes(h)||T.value.toLowerCase().includes(h.toLowerCase())),w=i?"textarea":"input";return S.jsxs("div",{className:"relative w-full",ref:x,children:[S.jsx(w,{ref:v,value:e,onChange:C,onSelect:g,onClick:g,onKeyUp:g,placeholder:o,className:r,spellCheck:!1}),S.jsxs("div",{className:"absolute right-2 top-2 flex gap-1 bg-white/50 backdrop-blur rounded p-0.5 z-10",children:[S.jsx("button",{type:"button",onMouseDown:T=>{T.preventDefault(),c(!u),l(!1),m("")},className:"text-slate-400 hover:text-pink-500 transition-colors p-1",title:" (@)",children:S.jsx(XN,{className:"w-3 h-3"})}),S.jsx("button",{type:"button",onMouseDown:T=>{T.preventDefault(),l(!s),c(!1),m("")},className:"text-slate-400 hover:text-indigo-600 transition-colors p-1",title:" ({)",children:S.jsx(Ws,{className:"w-3 h-3"})})]}),s&&S.jsxs("div",{className:"absolute z-50 left-0 w-full mt-1 bg-white rounded-lg shadow-xl border border-slate-200 max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100 ring-1 ring-slate-900/5",children:[S.jsxs("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:[" ",h&&S.jsxs("span",{className:"font-normal text-slate-400",children:["(: ",h,")"]})]}),E.length===0?S.jsx("div",{className:"p-3 text-xs text-slate-400 text-center",children:""}):E.map(T=>S.jsxs("button",{type:"button",onMouseDown:I=>{I.preventDefault(),y(T.name,!0)},className:"w-full text-left px-3 py-2 text-sm hover:bg-indigo-50 flex items-center justify-between group transition-colors",children:[S.jsxs("span",{className:"font-mono text-indigo-700 font-medium flex items-center gap-2",children:[S.jsx("span",{className:"text-slate-300",children:"{"}),T.name,S.jsx("span",{className:"text-slate-300",children:"}"})]}),S.jsx("span",{className:"text-xs text-slate-400 group-hover:text-indigo-400 bg-slate-100 px-1.5 py-0.5 rounded",children:T.type})]},T.id))]}),u&&S.jsxs("div",{className:"absolute z-50 left-0 w-full mt-1 bg-white rounded-lg shadow-xl border border-slate-200 max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100 ring-1 ring-slate-900/5",children:[S.jsxs("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:[" ",h&&S.jsxs("span",{className:"font-normal text-slate-400",children:["(: ",h,")"]})]}),_.length===0?S.jsx("div",{className:"p-3 text-xs text-slate-400 text-center",children:""}):_.map(T=>S.jsxs("button",{type:"button",onMouseDown:I=>{I.preventDefault(),y(T.value,!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-pink-50 flex items-center justify-between group transition-colors",children:[S.jsx("span",{className:"font-mono text-pink-600 font-medium",children:T.value}),S.jsx("span",{className:"text-xs text-slate-400",children:T.label})]},T.value))]})]})},Qc=({title:e,icon:t,initialPosition:n={x:100,y:100},initialSize:o={width:400,height:500},minSize:r={width:300,height:200},onClose:i,children:s,className:l="",headerColor:u="bg-white",zIndex:c=50,onInteract:f})=>{const[p,h]=R.useState(n),[m,v]=R.useState(o),[x,C]=R.useState(!1),[g,y]=R.useState(!1),[E,_]=R.useState(!1),w=R.useRef(null),T=R.useRef({x:0,y:0}),I=R.useRef(n),M=R.useRef(o);R.useEffect(()=>{const V=z=>{if(x){const N=z.clientX-T.current.x,U=z.clientY-T.current.y;h({x:Math.max(0,I.current.x+N),y:Math.max(0,I.current.y+U)})}if(g&&!E){const N=z.clientX-T.current.x,U=z.clientY-T.current.y;v({width:Math.max(r.width,M.current.width+N),height:Math.max(r.height,M.current.height+U)})}},G=()=>{C(!1),y(!1)};return(x||g)&&(window.addEventListener("mousemove",V),window.addEventListener("mouseup",G)),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",G)}},[x,g,r,E]);const P=V=>{f&&f(),V.preventDefault(),C(!0),T.current={x:V.clientX,y:V.clientY},I.current=p},F=V=>{V.stopPropagation(),V.preventDefault(),f&&f(),y(!0),T.current={x:V.clientX,y:V.clientY},M.current=m};return S.jsxs("div",{ref:w,className:`absolute flex flex-col bg-white shadow-2xl rounded-xl border border-slate-200 overflow-hidden ${l} animate-in zoom-in-95 duration-200`,style:{left:p.x,top:p.y,width:m.width,height:E?"auto":m.height,zIndex:c},onMouseDown:()=>f&&f(),children:[S.jsxs("div",{className:`flex items-center justify-between p-3 border-b border-slate-100 cursor-move shrink-0 select-none ${u}`,onMouseDown:P,onDoubleClick:()=>_(!E),children:[S.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[t&&S.jsx(t,{className:"w-4 h-4 text-slate-500 shrink-0"}),S.jsx("h3",{className:"font-bold text-slate-800 text-sm truncate",children:e})]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(Py,{className:"w-4 h-4 text-slate-300 mr-2"}),S.jsx("button",{onClick:V=>{V.stopPropagation(),_(!E)},className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded transition-colors",title:E?"":"",children:S.jsx(BN,{className:"w-4 h-4"})}),S.jsx("button",{onClick:V=>{V.stopPropagation(),i()},className:"text-slate-400 hover:text-red-500 p-1 hover:bg-red-50 rounded transition-colors",title:"",children:S.jsx(KN,{className:"w-4 h-4"})})]})]}),!E&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:s}),S.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 cursor-nwse-resize flex items-end justify-end p-0.5 z-20",onMouseDown:F,children:S.jsx(RN,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors"})})]})]})},pa=["abstract","as","base","bool","break","byte","case","catch","char","checked","class","const","continue","decimal","default","delegate","do","double","else","enum","event","explicit","extern","false","finally","fixed","float","for","foreach","goto","if","implicit","in","int","interface","internal","is","lock","long","namespace","new","null","object","operator","out","override","params","private","protected","public","readonly","ref","return","sbyte","sealed","short","sizeof","stackalloc","static","string","struct","switch","this","throw","true","try","typeof","uint","ulong","unchecked","unsafe","ushort","using","virtual","void","volatile","while","var"],iI=({value:e,onChange:t,variables:n,className:o})=>{const[r,i]=R.useState(null),s=R.useRef(null),l=R.useRef(null),u=()=>{s.current&&l.current&&(l.current.scrollTop=s.current.scrollTop,l.current.scrollLeft=s.current.scrollLeft)},c=v=>{const x=v.target.value;t(x),p(x,v.target.selectionStart)},f=v=>{if(v.key==="Tab"){v.preventDefault();const x=v.currentTarget.selectionStart,C=v.currentTarget.selectionEnd,g=v.currentTarget.value;t(g.substring(0,x)+"  "+g.substring(C)),setTimeout(()=>{s.current&&(s.current.selectionStart=s.current.selectionEnd=x+2)},0)}else v.key==="Enter"&&r&&(v.preventDefault(),h(r.list[0]))},p=(v,x)=>{const C=v.slice(0,x),g=C.match(/([a-zA-Z0-9_]+)$/);if(C.slice(-1)==="{"){const E=cp(s.current,x);i({type:"variable",list:n.map(_=>_.name),left:E.left,top:E.top+20});return}if(g){const E=g[1];if(E.length>=2){const _=pa.filter(w=>w.startsWith(E)&&w!==E);if(_.length>0){const w=cp(s.current,x);i({type:"keyword",list:_.slice(0,5),left:w.left,top:w.top+20});return}}}i(null)},h=v=>{if(!s.current)return;const x=s.current.selectionStart,C=e,g=C.slice(0,x);let y="",E=x;if((r==null?void 0:r.type)==="variable")y=g+v+"}"+C.slice(x),E=x+v.length+1;else{const _=g.match(/([a-zA-Z0-9_]+)$/);if(_){const w=_[1];y=g.slice(0,-w.length)+v+C.slice(x),E=x-w.length+v.length}}t(y),i(null),setTimeout(()=>{s.current&&(s.current.focus(),s.current.setSelectionRange(E,E))},0)},m=v=>{if(!v)return"";const x=y=>y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),C=new RegExp(['"(?:\\\\.|[^"\\\\])*"',"//.*",`\\b(?:${pa.join("|")})\\b`,"\\b\\d+\\b"].join("|"),"g");return v.split(new RegExp(`(${C.source})`,"g")).map(y=>y?y.startsWith('"')?`<span class="text-orange-300">${x(y)}</span>`:y.startsWith("//")?`<span class="text-gray-500 italic">${x(y)}</span>`:/^\d+$/.test(y)?`<span class="text-emerald-300">${y}</span>`:pa.includes(y)?`<span class="text-blue-400 font-bold">${y}</span>`:x(y):"").join("")};return S.jsxs("div",{className:`relative ${o} bg-slate-900 rounded-lg overflow-hidden border border-slate-700`,children:[S.jsx("div",{ref:l,className:"absolute inset-0 pointer-events-none p-3 whitespace-pre-wrap font-mono text-sm leading-6 break-words text-slate-200",dangerouslySetInnerHTML:{__html:m(e)+"<br/>"}}),S.jsx("textarea",{ref:s,value:e,onChange:c,onKeyDown:f,onScroll:u,onBlur:()=>setTimeout(()=>i(null),100),spellCheck:!1,className:"relative w-full h-full p-3 bg-transparent text-transparent caret-white font-mono text-sm leading-6 resize-none outline-none break-words",style:{color:"transparent"}}),r&&S.jsx("div",{className:"absolute z-50 bg-slate-800 border border-slate-600 rounded shadow-xl flex flex-col",style:{left:Math.min(r.left,200),top:r.top},children:r.list.map((v,x)=>S.jsx("button",{onMouseDown:C=>{C.preventDefault(),h(v)},className:"px-2 py-1 text-xs text-left text-slate-200 hover:bg-indigo-600 font-mono",children:r.type==="variable"?`{${v}}`:v},x))}),(e.split("{").length!==e.split("}").length||e.split("(").length!==e.split(")").length)&&S.jsx("div",{className:"absolute bottom-2 right-2 text-[10px] text-red-400 flex items-center gap-1 bg-slate-800/80 px-2 py-1 rounded",children:" "})]})},cp=(e,t)=>{if(!e)return{left:0,top:0};const{scrollLeft:n,scrollTop:o}=e,r=e.value.substr(0,t).split(`
`),i=r.length-1;return{left:r[i].length*8+10-n,top:i*24+10-o}},sI=[{label:"",description:"",value:`int result = count + 1;
return result;`},{label:"",description:" 1-100 ",value:`Random rnd = new Random();
int val = rnd.Next(1, 100);
return val;`},{label:"",description:"",value:`string msg = $"User: {name}, Date: {DateTime.Now}";
return msg;`},{label:"",description:" If-Else",value:`if (score >= 60) 
    return "Pass";
else 
    return "Fail";`},{label:"",description:"",value:'return DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");'},{label:"JSON ",description:" JSON ",value:`//  input  JSON 
// dynamic data = JsonConvert.DeserializeObject(input);
return "processed_json";`}],lI=({node:e,onClose:t,onChange:n,variables:o,zIndex:r,onInteract:i,initialPosition:s})=>{const[l,u]=R.useState(""),[c,f]=R.useState(""),[p,h]=R.useState(""),[m,v]=R.useState(1e3),[x,C]=R.useState(!1);R.useEffect(()=>{e&&(u(e.data.label),f(e.data.description||""),h(e.data.code||""),v(e.data.duration||1e3))},[e]);const g=R.useMemo(()=>{const _=new Set;if([l,c].forEach(T=>{if(!T)return;const I=T.match(/\{([a-zA-Z_][a-zA-Z0-9_]*)\}/g);I&&I.forEach(M=>_.add(M.slice(1,-1)))}),(e==null?void 0:e.type)===ne.CODE&&p){o.forEach(I=>{const M=I.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");new RegExp(`\\b${M}\\b`).test(p)&&_.add(I.name)});const T=p.match(/\{([a-zA-Z_][a-zA-Z0-9_]*)\}/g);T&&T.forEach(I=>_.add(I.slice(1,-1)))}return Array.from(_).map(T=>{const I=o.find(M=>M.name===T);return{name:T,isDefined:!!I,value:(I==null?void 0:I.value)??"N/A",type:(I==null?void 0:I.type)??"unknown"}})},[l,c,p,e==null?void 0:e.type,o]);if(!e)return null;const y=()=>{n(e.id,{label:l,description:c,code:p,duration:m,error:void 0})},E=_=>{switch(_){case ne.START:return"";case ne.END:return"";case ne.PROCESS:return"";case ne.DECISION:return"";case ne.AI_TASK:return"AI ";case ne.CODE:return"C# ";case ne.DELAY:return"";case ne.LOG:return"";case ne.GROUP:return"";default:return""}};return S.jsx(Qc,{title:`: ${l||""}`,icon:qN,initialPosition:s||{x:window.innerWidth-350,y:100},initialSize:{width:360,height:600},onClose:t,zIndex:r,onInteract:i,children:S.jsxs("div",{className:"flex flex-col h-full",children:[S.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50 shrink-0",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("span",{className:"text-[10px] text-slate-400 font-mono bg-slate-200 px-1.5 py-0.5 rounded truncate max-w-[200px]",title:e.id,children:["ID: ",e.id]}),S.jsx("div",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 rounded text-xs font-medium border border-indigo-100",children:E(e.type)})]})}),S.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto flex-1 bg-white",children:[S.jsxs("div",{children:[S.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:[" ",S.jsx("span",{className:"text-red-500",children:"*"})]}),S.jsx(Tu,{value:l,onChange:u,variables:o,placeholder:"...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none text-sm transition-all"})]}),e.type===ne.CODE&&S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider",children:["C#  ",S.jsx("span",{className:"text-red-500",children:"*"})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>C(!x),className:"flex items-center gap-1.5 px-2 py-1 text-[10px] font-medium text-indigo-600 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded transition-colors",children:[S.jsx(DN,{className:"w-3 h-3"}),S.jsx("span",{children:""}),S.jsx(Wc,{className:"w-3 h-3 opacity-50"})]}),x&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>C(!1)}),S.jsxs("div",{className:"absolute right-0 top-full mt-1 w-64 bg-white border border-slate-200 shadow-xl rounded-lg py-1 z-30 flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[S.jsx("div",{className:"px-3 py-2 bg-slate-50 border-b border-slate-100 text-[10px] text-slate-500 font-semibold uppercase",children:""}),sI.map((_,w)=>S.jsxs("button",{onClick:()=>{h(T=>T?`${T}

${_.value}`:_.value),C(!1)},className:"text-left px-3 py-2 hover:bg-indigo-50 transition-colors border-b border-slate-50 last:border-0 group",children:[S.jsx("div",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-700",children:_.label}),S.jsx("div",{className:"text-[10px] text-slate-400 truncate mt-0.5",children:_.description})]},w))]})]})]})]}),S.jsx(iI,{value:p,onChange:h,variables:o,className:"h-[200px]"}),S.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[" ",S.jsx("code",{children:"{"})," "]})]}),e.type===ne.DELAY&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:" ()"}),S.jsx("input",{type:"number",min:"0",step:"100",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm",value:m,onChange:_=>v(parseInt(_.target.value)||0)})]}),(e.type===ne.PROCESS||e.type===ne.AI_TASK||e.type===ne.LOG||e.type===ne.DECISION)&&S.jsxs("div",{children:[S.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:[e.type===ne.AI_TASK?"Prompt / ":e.type===ne.DECISION?"":"/"," ",S.jsx("span",{className:"text-red-500",children:"*"})]}),S.jsx(Tu,{isTextArea:!0,value:c,onChange:f,variables:o,placeholder:e.type===ne.AI_TASK?"AI...":e.type===ne.DECISION?": {count} > 5":"...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none text-sm min-h-[100px] resize-none transition-all"}),e.type===ne.DECISION&&S.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[" ","{variable} > 10"]})]}),g.length>0&&S.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[S.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 flex items-center justify-between",children:[S.jsxs("span",{children:[" (",g.length,")"]}),S.jsx("span",{className:"text-[10px] font-normal normal-case text-slate-400",children:""})]}),S.jsx("div",{className:"space-y-2",children:g.map(_=>S.jsxs("div",{className:`flex items-center justify-between text-xs p-2 rounded border ${_.isDefined?"bg-slate-50 border-slate-200":"bg-amber-50 border-amber-200"}`,children:[S.jsxs("div",{className:"flex items-center gap-2",children:[_.isDefined?S.jsx(Iy,{className:"w-3.5 h-3.5 text-emerald-500"}):S.jsx(Yc,{className:"w-3.5 h-3.5 text-amber-500"}),S.jsx("span",{className:`font-mono font-medium ${_.isDefined?"text-slate-700":"text-amber-700"}`,children:_.name})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[_.isDefined&&S.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-slate-200 rounded text-slate-500",children:_.type}),S.jsx("span",{className:"text-slate-400 max-w-[80px] truncate",title:String(_.value),children:_.isDefined?_.value===""?"()":String(_.value):""})]})]},_.name))})]})]}),S.jsx("div",{className:"p-4 border-t border-slate-100 flex-shrink-0 bg-slate-50",children:S.jsx("button",{onClick:y,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors shadow-sm",children:""})})]})})},aI=new Set(["abstract","as","base","bool","break","byte","case","catch","char","checked","class","const","continue","decimal","default","delegate","do","double","else","enum","event","explicit","extern","false","finally","fixed","float","for","foreach","goto","if","implicit","in","int","interface","internal","is","lock","long","namespace","new","null","object","operator","out","override","params","private","protected","public","readonly","ref","return","sbyte","sealed","short","sizeof","stackalloc","static","string","struct","switch","this","throw","true","try","typeof","uint","ulong","unchecked","unsafe","ushort","using","virtual","void","volatile","while","var","dynamic","async","await"]),uI=({variables:e,setVariables:t,isOpen:n,onClose:o,nodes:r,zIndex:i,onInteract:s,initialPosition:l})=>{const[u,c]=R.useState(""),[f,p]=R.useState("string"),[h,m]=R.useState(""),[v,x]=R.useState(null),C=w=>/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(w),g=R.useMemo(()=>{const w=new Set;return r.forEach(T=>{if([T.data.label,T.data.description].forEach(M=>{if(!M)return;const P=M.match(/\{([a-zA-Z_][a-zA-Z0-9_]*)\}/g);P&&P.forEach(F=>w.add(F.slice(1,-1)))}),T.type==="code"&&T.data.code){const M=T.data.code.match(/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g);M&&M.forEach(P=>{!aI.has(P)&&isNaN(Number(P))&&w.add(P)})}}),Array.from(w).map(T=>({name:T,isDefined:e.some(I=>I.name===T)}))},[r,e]);if(!n)return null;const y=w=>{const I=(w||u).trim();if(!I){x("");return}if(!C(I)){x("");return}if(e.some(P=>P.name===I)){x("");return}const M={id:`var-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:I,type:w?"string":f,value:w?"":h};t([...e,M]),w||(c(""),m("")),x(null)},E=w=>{t(e.filter(T=>T.id!==w))},_=(w,T,I)=>{t(e.map(M=>M.id===w?{...M,[T]:I}:M))};return S.jsx(Qc,{title:"",icon:Ws,initialPosition:l||{x:window.innerWidth-450,y:100},initialSize:{width:400,height:600},onClose:o,zIndex:i,onInteract:s,children:S.jsxs("div",{className:"flex flex-col h-full bg-white",children:[S.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 shrink-0",children:[S.jsx("div",{className:"text-xs font-semibold text-slate-500 mb-2",children:""}),S.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[S.jsx("div",{className:"col-span-12",children:v&&S.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-500 mb-2 bg-red-50 p-1.5 rounded",children:[S.jsx(Yc,{className:"w-3 h-3"}),v]})}),S.jsx("input",{placeholder:" (e.g. userCount)",className:`col-span-5 px-2 py-1.5 text-sm border rounded outline-none transition-all ${v?"border-red-300 ring-1 ring-red-100":"focus:ring-1 focus:ring-indigo-500 border-slate-300"}`,value:u,onChange:w=>{c(w.target.value),v&&x(null)}}),S.jsxs("select",{className:"col-span-3 px-2 py-1.5 text-sm border rounded focus:ring-1 focus:ring-indigo-500 outline-none bg-white border-slate-300",value:f,onChange:w=>p(w.target.value),children:[S.jsx("option",{value:"string",children:""}),S.jsx("option",{value:"number",children:""}),S.jsx("option",{value:"boolean",children:""})]}),S.jsx("input",{placeholder:"",className:"col-span-3 px-2 py-1.5 text-sm border rounded focus:ring-1 focus:ring-indigo-500 outline-none border-slate-300",value:h,onChange:w=>m(w.target.value)}),S.jsx("button",{onClick:()=>y(),className:"col-span-1 flex items-center justify-center bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",title:"",children:S.jsx(Cu,{className:"w-4 h-4"})})]}),S.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:""})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:e.length===0?S.jsxs("div",{className:"text-center text-slate-400 text-sm py-8 flex flex-col items-center",children:[S.jsx(Ws,{className:"w-8 h-8 text-slate-200 mb-2"}),""]}):S.jsxs("table",{className:"w-full text-sm text-left",children:[S.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-white sticky top-0 z-10 shadow-sm",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-3 py-2 bg-slate-50/80 backdrop-blur",children:""}),S.jsx("th",{className:"px-3 py-2 bg-slate-50/80 backdrop-blur",children:""}),S.jsx("th",{className:"px-3 py-2 bg-slate-50/80 backdrop-blur",children:""}),S.jsx("th",{className:"px-2 py-2 bg-slate-50/80 backdrop-blur"})]})}),S.jsx("tbody",{children:e.map(w=>S.jsxs("tr",{className:"border-b border-slate-50 hover:bg-slate-50/50 group",children:[S.jsx("td",{className:"px-3 py-2 font-medium text-slate-700 font-mono text-xs",children:w.name}),S.jsx("td",{className:"px-3 py-2 text-slate-500 text-xs",children:S.jsx("span",{className:`px-1.5 py-0.5 rounded ${w.type==="number"?"bg-blue-50 text-blue-600":w.type==="boolean"?"bg-amber-50 text-amber-600":"bg-gray-100 text-gray-600"}`,children:w.type==="string"?"Str":w.type==="number"?"Num":"Bool"})}),S.jsx("td",{className:"px-3 py-2",children:S.jsx("input",{value:w.value,onChange:T=>_(w.id,"value",T.target.value),className:"w-full bg-transparent border-b border-transparent hover:border-slate-300 focus:border-indigo-500 outline-none transition-colors text-xs"})}),S.jsx("td",{className:"px-2 py-2 text-center",children:S.jsx("button",{onClick:()=>E(w.id),className:"text-slate-300 hover:text-red-500 transition-colors",children:S.jsx(JN,{className:"w-3.5 h-3.5"})})})]},w.id))})]})}),g.length>0&&S.jsxs("div",{className:"border-t border-slate-200 bg-slate-50/80 backdrop-blur p-3 shrink-0 max-h-40 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx(ky,{className:"w-3 h-3 text-slate-400"}),S.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:[" (",g.length,")"]})]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(w=>S.jsxs("div",{className:`
                    flex items-center gap-1.5 px-2 py-1 rounded-full text-xs border
                    ${w.isDefined?"bg-white border-green-200 text-green-700":"bg-white border-amber-200 text-amber-700 shadow-sm"}
                  `,children:[S.jsx("span",{className:"font-mono",children:w.name}),w.isDefined?S.jsx(MN,{className:"w-3 h-3 text-green-500"}):S.jsx("button",{onClick:()=>y(w.name),className:"hover:bg-amber-100 rounded-full p-0.5 transition-colors",title:"",children:S.jsx(Cu,{className:"w-3 h-3 text-amber-600"})})]},w.name))})]})]})})},cI=[{id:"f1",name:"",files:[{id:"p1",name:"",updatedAt:"2023-10-01"},{id:"p2",name:"",updatedAt:"2023-10-02"}],folders:[{id:"f1-1",name:"",files:[{id:"p3",name:"",updatedAt:"2023-10-05"}],folders:[]}],isOpen:!0},{id:"f2",name:"",files:[{id:"t1",name:"",updatedAt:"2023-09-15"},{id:"t2",name:"",updatedAt:"2023-09-20"}],folders:[],isOpen:!1}],dI=({onLoadProject:e})=>{const[t,n]=R.useState(cI),[o,r]=R.useState(""),i=l=>{const u=c=>c.map(f=>f.id===l?{...f,isOpen:!f.isOpen}:f.folders.length>0?{...f,folders:u(f.folders)}:f);n(u(t))},s=({folder:l,depth:u=0})=>S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 cursor-pointer transition-colors select-none",style:{paddingLeft:`${u*12+12}px`},onClick:()=>i(l.id),children:[l.isOpen?S.jsx(Wc,{className:"w-3.5 h-3.5 text-slate-400"}):S.jsx(wu,{className:"w-3.5 h-3.5 text-slate-400"}),S.jsx(LN,{className:"w-4 h-4 text-indigo-400 fill-indigo-50"}),S.jsx("span",{className:"font-medium truncate",children:l.name})]}),l.isOpen&&S.jsxs("div",{children:[l.folders.map(c=>S.jsx(s,{folder:c,depth:u+1},c.id)),l.files.map(c=>S.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 cursor-pointer transition-colors select-none group",style:{paddingLeft:`${u*12+28}px`},onClick:()=>e(c.id),children:[S.jsx(FN,{className:"w-3.5 h-3.5 group-hover:text-indigo-500"}),S.jsx("span",{className:"truncate flex-1",children:c.name})]},c.id))]})]});return S.jsxs("div",{className:"w-60 bg-slate-50 border-r border-slate-200 flex flex-col h-full shrink-0",children:[S.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200 bg-white",children:[S.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold",children:[S.jsx(kN,{className:"w-5 h-5 text-indigo-600"}),S.jsx("span",{children:""})]}),S.jsx("div",{className:"ml-auto",children:S.jsx("button",{className:"p-1.5 hover:bg-slate-100 rounded-md text-slate-400 hover:text-indigo-600 transition-colors",children:S.jsx(Cu,{className:"w-4 h-4"})})})]}),S.jsx("div",{className:"p-3",children:S.jsxs("div",{className:"relative",children:[S.jsx(ky,{className:"w-3.5 h-3.5 absolute left-2.5 top-2.5 text-slate-400"}),S.jsx("input",{className:"w-full bg-white border border-slate-200 rounded-lg pl-8 pr-3 py-1.5 text-xs focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"...",value:o,onChange:l=>r(l.target.value)})]})}),S.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:t.map(l=>S.jsx(s,{folder:l},l.id))}),S.jsx("div",{className:"p-3 border-t border-slate-200 bg-white",children:S.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-xs font-medium text-slate-500 hover:bg-slate-100 rounded-lg transition-colors",children:[S.jsx(ON,{className:"w-4 h-4"}),""]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fI,pI;function hI(){return{geminiUrl:fI,vertexUrl:pI}}function mI(e,t,n,o){var r,i;if(!(e!=null&&e.baseUrl)){const s=hI();return t?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pn{}function W(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[l])){const u=e[l];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];d(f,t.slice(i+1),n[c])}else for(const c of u)d(c,t.slice(i+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in e||(e[l]=[{}]);const u=e[l];d(u[0],t.slice(i+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const o=t[t.length-1],r=e[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const s=e[i];return Array.isArray(s)?s.map(l=>a(l,t.slice(o+1),n)):n}else return n}else e=e[r]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function gI(e,t){for(const[n,o]of Object.entries(t)){const r=n.split("."),i=o.split("."),s=new Set;let l=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){l=u;break}if(l!==-1&&i.length>l)for(let u=l;u<i.length;u++){const c=i[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Nu(e,r,i,0,s)}}function Nu(e,t,n,o,r){if(o>=t.length||typeof e!="object"||e===null)return;const i=t[o];if(i.endsWith("[]")){const s=i.slice(0,-2),l=e;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Nu(u,t,n,o+1,r)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),u={};for(const c of l)u[c]=s[c];for(const[c,f]of Object.entries(u)){const p=[];for(const h of n.slice(o))h==="*"?p.push(c):p.push(h);d(s,p,f)}for(const c of l)delete s[c]}}else{const s=e;i in s&&Nu(s[i],t,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zc(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yI(e){const t={},n=a(e,["operationName"]);n!=null&&d(t,["operationName"],n);const o=a(e,["resourceName"]);return o!=null&&d(t,["_url","resourceName"],o),t}function vI(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response","generateVideoResponse"]);return s!=null&&d(t,["response"],xI(s)),t}function EI(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response"]);return s!=null&&d(t,["response"],SI(s)),t}function xI(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>_I(s))),d(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function SI(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>wI(s))),d(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function _I(e){const t={},n=a(e,["video"]);return n!=null&&d(t,["video"],RI(n)),t}function wI(e){const t={},n=a(e,["_self"]);return n!=null&&d(t,["video"],MI(n)),t}function CI(e){const t={},n=a(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function TI(e){const t={},n=a(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function NI(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response"]);return s!=null&&d(t,["response"],II(s)),t}function II(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&d(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function Ly(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response"]);return s!=null&&d(t,["response"],AI(s)),t}function AI(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&d(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function RI(e){const t={},n=a(e,["uri"]);n!=null&&d(t,["uri"],n);const o=a(e,["encodedVideo"]);o!=null&&d(t,["videoBytes"],Zc(o));const r=a(e,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function MI(e){const t={},n=a(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],Zc(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dp;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dp||(dp={}));var fp;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(fp||(fp={}));var pp;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(pp||(pp={}));var re;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(re||(re={}));var hp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(hp||(hp={}));var mp;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mp||(mp={}));var gp;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(gp||(gp={}));var yp;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yp||(yp={}));var vp;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vp||(vp={}));var Ep;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(Ep||(Ep={}));var xp;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xp||(xp={}));var Sp;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Sp||(Sp={}));var _p;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(_p||(_p={}));var wp;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(wp||(wp={}));var Cp;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Cp||(Cp={}));var Tp;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Tp||(Tp={}));var Np;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Np||(Np={}));var Ip;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Ip||(Ip={}));var Ap;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ap||(Ap={}));var Xs;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Xs||(Xs={}));var Rp;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Rp||(Rp={}));var Mp;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Mp||(Mp={}));var Pp;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Pp||(Pp={}));var Iu;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Iu||(Iu={}));var kp;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kp||(kp={}));var Dp;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Dp||(Dp={}));var Fp;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Fp||(Fp={}));var Lp;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Lp||(Lp={}));var Up;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Up||(Up={}));var Vp;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Vp||(Vp={}));var bp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(bp||(bp={}));var Hp;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Hp||(Hp={}));var Gp;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Gp||(Gp={}));var Bp;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Bp||(Bp={}));var zp;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zp||(zp={}));var $p;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($p||($p={}));var qp;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qp||(qp={}));var Op;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Op||(Op={}));var Jp;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Jp||(Jp={}));var Yp;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Yp||(Yp={}));var Wp;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Wp||(Wp={}));var Kp;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Kp||(Kp={}));var Xp;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Xp||(Xp={}));var Qp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Qp||(Qp={}));var Zp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Zp||(Zp={}));var jp;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(jp||(jp={}));var eh;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(eh||(eh={}));var th;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(th||(th={}));var nh;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nh||(nh={}));var oh;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oh||(oh={}));var rh;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(rh||(rh={}));var ih;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ih||(ih={}));var sh;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sh||(sh={}));var lh;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(lh||(lh={}));var Uo;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Uo||(Uo={}));class Au{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Rr{get text(){var t,n,o,r,i,s,l,u;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,v]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,o,r,i,s,l,u;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,o,r,i,s,l,u;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,o,r,i,s,l,u,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,o,r,i,s,l,u,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class ah{}class uh{}class PI{}class kI{}class DI{}class FI{}class ch{}class dh{}class fh{}class LI{}class Qs{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Qs;let r;const i=t;return n?r=EI(i):r=vI(i),Object.assign(o,r),o}}class ph{}class hh{}class mh{}class gh{}class UI{}class VI{}class bI{}class jc{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new jc,i=NI(t);return Object.assign(o,i),o}}class HI{}class GI{}class BI{}class yh{}class zI{get text(){var t,n,o;let r="",i=!1;const s=[];for(const l of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(l))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var t,n,o;let r="";const i=[];for(const s of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class $I{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ed{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new ed,i=Ly(t);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function de(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Uy(e,t){const n=de(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Vy(e){return Array.isArray(e)?e.map(t=>Zs(t)):[Zs(e)]}function Zs(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function by(e){const t=Zs(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Hy(e){const t=Zs(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vh(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Gy(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>vh(t)):[vh(e)]}function Ru(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Eh(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function xh(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ze(e){if(e==null)throw new Error("ContentUnion is required");return Ru(e)?e:{role:"user",parts:Gy(e)}}function td(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=ze(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=ze(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ze(n)):[ze(t)]}function _t(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Eh(e)||xh(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ze(e)]}const t=[],n=[],o=Ru(e[0]);for(const r of e){const i=Ru(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(r);else{if(Eh(r)||xh(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:Gy(n)}),t}function qI(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(re).includes(n[0].toUpperCase())?n[0].toUpperCase():re.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(re).includes(o.toUpperCase())?o.toUpperCase():re.TYPE_UNSPECIFIED})}}function Wo(e){const t={},n=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&qI(e.type,t);for(const[s,l]of Object.entries(e))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;t.type=Object.values(re).includes(l.toUpperCase())?l.toUpperCase():re.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=Wo(l);else if(o.includes(s)){const u=[];for(const c of l){if(c.type=="null"){t.nullable=!0;continue}u.push(Wo(c))}t[s]=u}else if(r.includes(s)){const u={};for(const[c,f]of Object.entries(l))u[c]=Wo(f);t[s]=u}else{if(s==="additionalProperties")continue;t[s]=l}return t}function nd(e){return Wo(e)}function od(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function rd(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function cr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Wo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Wo(t.response));return e}function dr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function OI(e,t,n,o=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function hn(e,t){if(typeof t!="string")throw new Error("name must be a string");return OI(e,t,"cachedContents")}function By(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function qn(e){return Zc(e)}function JI(e){return e!=null&&typeof e=="object"&&"name"in e}function YI(e){return e!=null&&typeof e=="object"&&"video"in e}function WI(e){return e!=null&&typeof e=="object"&&"uri"in e}function zy(e){var t;let n;if(JI(e)&&(n=e.name),!(WI(e)&&(n=e.uri,n===void 0))&&!(YI(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $y(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function qy(e){for(const t of["models","tunedModels","publisherModels"])if(KI(e,t))return e[t];return[]}function KI(e,t){return e!==null&&typeof e=="object"&&t in e}function XI(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function QI(e,t={}){const n=[],o=new Set;for(const r of e){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=XI(r,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Oy(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ZI(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Jy(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function fr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Yy(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jI(e){const t={},n=a(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const o=a(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>DA(s))),d(t,["inlinedResponses"],i)}const r=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["inlinedEmbedContentResponses"],i)}return t}function eA(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const o=a(e,["gcsDestination","outputUriPrefix"]);o!=null&&d(t,["gcsUri"],o);const r=a(e,["bigqueryDestination","outputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function tA(e){const t={},n=a(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const o=a(e,["gcsUri"]);o!=null&&d(t,["gcsDestination","outputUriPrefix"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&d(t,["bigqueryDestination","outputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function ps(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata","displayName"]);o!=null&&d(t,["displayName"],o);const r=a(e,["metadata","state"]);r!=null&&d(t,["state"],Yy(r));const i=a(e,["metadata","createTime"]);i!=null&&d(t,["createTime"],i);const s=a(e,["metadata","endTime"]);s!=null&&d(t,["endTime"],s);const l=a(e,["metadata","updateTime"]);l!=null&&d(t,["updateTime"],l);const u=a(e,["metadata","model"]);u!=null&&d(t,["model"],u);const c=a(e,["metadata","output"]);return c!=null&&d(t,["dest"],jI(Jy(c))),t}function Mu(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["displayName"]);o!=null&&d(t,["displayName"],o);const r=a(e,["state"]);r!=null&&d(t,["state"],Yy(r));const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["createTime"]);s!=null&&d(t,["createTime"],s);const l=a(e,["startTime"]);l!=null&&d(t,["startTime"],l);const u=a(e,["endTime"]);u!=null&&d(t,["endTime"],u);const c=a(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const f=a(e,["model"]);f!=null&&d(t,["model"],f);const p=a(e,["inputConfig"]);p!=null&&d(t,["src"],nA(p));const h=a(e,["outputConfig"]);h!=null&&d(t,["dest"],eA(Jy(h)));const m=a(e,["completionStats"]);return m!=null&&d(t,["completionStats"],m),t}function nA(e){const t={},n=a(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const o=a(e,["gcsSource","uris"]);o!=null&&d(t,["gcsUri"],o);const r=a(e,["bigquerySource","inputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function oA(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=a(t,["fileName"]);o!=null&&d(n,["fileName"],o);const r=a(t,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>kA(e,s))),d(n,["requests","requests"],i)}return n}function rA(e){const t={},n=a(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const o=a(e,["gcsUri"]);o!=null&&d(t,["gcsSource","uris"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&d(t,["bigquerySource","inputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function iA(e){const t={},n=a(e,["data"]);if(n!=null&&d(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function sA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function lA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function aA(e){const t={},n=a(e,["content"]);n!=null&&d(t,["content"],n);const o=a(e,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],uA(o));const r=a(e,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const i=a(e,["finishReason"]);i!=null&&d(t,["finishReason"],i);const s=a(e,["avgLogprobs"]);s!=null&&d(t,["avgLogprobs"],s);const l=a(e,["groundingMetadata"]);l!=null&&d(t,["groundingMetadata"],l);const u=a(e,["index"]);u!=null&&d(t,["index"],u);const c=a(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const f=a(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["safetyRatings"],h)}const p=a(e,["urlContextMetadata"]);return p!=null&&d(t,["urlContextMetadata"],p),t}function uA(e){const t={},n=a(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}function Wy(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>GA(i))),d(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&d(t,["role"],o),t}function cA(e,t){const n={},o=a(e,["displayName"]);if(t!==void 0&&o!=null&&d(t,["batch","displayName"],o),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function dA(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=a(e,["dest"]);return t!==void 0&&r!=null&&d(t,["outputConfig"],tA(ZI(r))),n}function Sh(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["src"]);r!=null&&d(n,["batch","inputConfig"],oA(e,Oy(e,r)));const i=a(t,["config"]);return i!=null&&cA(i,n),n}function fA(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["model"],de(e,o));const r=a(t,["src"]);r!=null&&d(n,["inputConfig"],rA(Oy(e,r)));const i=a(t,["config"]);return i!=null&&dA(i,n),n}function pA(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&d(t,["batch","displayName"],o),n}function hA(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["src"]);r!=null&&d(n,["batch","inputConfig"],SA(e,r));const i=a(t,["config"]);return i!=null&&pA(i,n),n}function mA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function gA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function yA(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&d(t,["name"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);return i!=null&&d(t,["error"],i),t}function vA(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&d(t,["name"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);return i!=null&&d(t,["error"],i),t}function EA(e,t){const n={},o=a(t,["contents"]);if(o!=null){let i=td(e,o);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["requests[]","request","content"],i)}const r=a(t,["config"]);return r!=null&&(d(n,["_self"],xA(r,n)),gI(n,{"requests[].*":"requests[].request.*"})),n}function xA(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&d(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function SA(e,t){const n={},o=a(t,["fileName"]);o!=null&&d(n,["file_name"],o);const r=a(t,["inlinedRequests"]);return r!=null&&d(n,["requests"],EA(e,r)),n}function _A(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function wA(e){const t={},n=a(e,["id"]);n!=null&&d(t,["id"],n);const o=a(e,["args"]);o!=null&&d(t,["args"],o);const r=a(e,["name"]);if(r!=null&&d(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function CA(e){const t={},n=a(e,["mode"]);n!=null&&d(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&d(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function TA(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Wy(ze(r)));const i=a(t,["temperature"]);i!=null&&d(o,["temperature"],i);const s=a(t,["topP"]);s!=null&&d(o,["topP"],s);const l=a(t,["topK"]);l!=null&&d(o,["topK"],l);const u=a(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(o,["maxOutputTokens"],c);const f=a(t,["stopSequences"]);f!=null&&d(o,["stopSequences"],f);const p=a(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const h=a(t,["logprobs"]);h!=null&&d(o,["logprobs"],h);const m=a(t,["presencePenalty"]);m!=null&&d(o,["presencePenalty"],m);const v=a(t,["frequencyPenalty"]);v!=null&&d(o,["frequencyPenalty"],v);const x=a(t,["seed"]);x!=null&&d(o,["seed"],x);const C=a(t,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const g=a(t,["responseSchema"]);g!=null&&d(o,["responseSchema"],nd(g));const y=a(t,["responseJsonSchema"]);if(y!=null&&d(o,["responseJsonSchema"],y),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(t,["safetySettings"]);if(n!==void 0&&E!=null){let G=E;Array.isArray(G)&&(G=G.map(z=>BA(z))),d(n,["safetySettings"],G)}const _=a(t,["tools"]);if(n!==void 0&&_!=null){let G=dr(_);Array.isArray(G)&&(G=G.map(z=>$A(cr(z)))),d(n,["tools"],G)}const w=a(t,["toolConfig"]);if(n!==void 0&&w!=null&&d(n,["toolConfig"],zA(w)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=a(t,["cachedContent"]);n!==void 0&&T!=null&&d(n,["cachedContent"],hn(e,T));const I=a(t,["responseModalities"]);I!=null&&d(o,["responseModalities"],I);const M=a(t,["mediaResolution"]);M!=null&&d(o,["mediaResolution"],M);const P=a(t,["speechConfig"]);if(P!=null&&d(o,["speechConfig"],od(P)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=a(t,["thinkingConfig"]);F!=null&&d(o,["thinkingConfig"],F);const V=a(t,["imageConfig"]);return V!=null&&d(o,["imageConfig"],PA(V)),o}function NA(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>aA(c))),d(t,["candidates"],u)}const r=a(e,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const i=a(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const s=a(e,["responseId"]);s!=null&&d(t,["responseId"],s);const l=a(e,["usageMetadata"]);return l!=null&&d(t,["usageMetadata"],l),t}function IA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function AA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],fr(e,o)),n}function RA(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function MA(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function PA(e){const t={},n=a(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const o=a(e,["imageSize"]);if(o!=null&&d(t,["imageSize"],o),a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function kA(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["request","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let l=_t(r);Array.isArray(l)&&(l=l.map(u=>Wy(u))),d(n,["request","contents"],l)}const i=a(t,["metadata"]);i!=null&&d(n,["metadata"],i);const s=a(t,["config"]);return s!=null&&d(n,["request","generationConfig"],TA(e,s,a(n,["request"],{}))),n}function DA(e){const t={},n=a(e,["response"]);n!=null&&d(t,["response"],NA(n));const o=a(e,["error"]);return o!=null&&d(t,["error"],o),t}function FA(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);if(t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function LA(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);t!==void 0&&r!=null&&d(t,["_query","pageToken"],r);const i=a(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),n}function UA(e){const t={},n=a(e,["config"]);return n!=null&&FA(n,t),t}function VA(e){const t={},n=a(e,["config"]);return n!=null&&LA(n,t),t}function bA(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ps(s))),d(t,["batchJobs"],i)}return t}function HA(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Mu(s))),d(t,["batchJobs"],i)}return t}function GA(e){const t={},n=a(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&d(t,["fileData"],_A(i));const s=a(e,["functionCall"]);s!=null&&d(t,["functionCall"],wA(s));const l=a(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const u=a(e,["inlineData"]);u!=null&&d(t,["inlineData"],iA(u));const c=a(e,["text"]);c!=null&&d(t,["text"],c);const f=a(e,["thought"]);f!=null&&d(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function BA(e){const t={},n=a(e,["category"]);if(n!=null&&d(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function zA(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],CA(n));const o=a(e,["retrievalConfig"]);return o!=null&&d(t,["retrievalConfig"],o),t}function $A(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const s=a(e,["codeExecution"]);if(s!=null&&d(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(e,["googleMaps"]);l!=null&&d(t,["googleMaps"],RA(l));const u=a(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],MA(u));const c=a(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(dn||(dn={}));class yo{constructor(t,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,r)}init(t,n,o){var r,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qA extends pn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new yo(dn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Sh(this.apiClient,t),o=n._url,r=W("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,u=l.requests,c=[];for(const f of u){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}c.push(p)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=fA(this.apiClient,t);return l=W("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Mu(f))}else{const c=Sh(this.apiClient,t);return l=W("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ps(f))}}async createEmbeddingsInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hA(this.apiClient,t);return i=W("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>ps(u))}}async get(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=AA(this.apiClient,t);return l=W("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Mu(f))}else{const c=IA(this.apiClient,t);return l=W("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ps(f))}}async cancel(t){var n,o,r,i;let s="",l={};if(this.apiClient.isVertexAI()){const u=lA(this.apiClient,t);s=W("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const u=sA(this.apiClient,t);s=W("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=VA(t);return l=W("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=HA(f),h=new yh;return Object.assign(h,p),h})}else{const c=UA(t);return l=W("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bA(f),h=new yh;return Object.assign(h,p),h})}}async delete(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=gA(this.apiClient,t);return l=W("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>vA(f))}else{const c=mA(this.apiClient,t);return l=W("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>yA(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OA(e){const t={},n=a(e,["data"]);if(n!=null&&d(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function _h(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hR(i))),d(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&d(t,["role"],o),t}function JA(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let f=_t(s);Array.isArray(f)&&(f=f.map(p=>_h(p))),d(t,["contents"],f)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&d(t,["systemInstruction"],_h(ze(l)));const u=a(e,["tools"]);if(t!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(p=>gR(p))),d(t,["tools"],f)}const c=a(e,["toolConfig"]);if(t!==void 0&&c!=null&&d(t,["toolConfig"],mR(c)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function YA(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let p=_t(s);Array.isArray(p)&&(p=p.map(h=>h)),d(t,["contents"],p)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&d(t,["systemInstruction"],ze(l));const u=a(e,["tools"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>yR(h))),d(t,["tools"],p)}const c=a(e,["toolConfig"]);t!==void 0&&c!=null&&d(t,["toolConfig"],c);const f=a(e,["kmsKeyName"]);return t!==void 0&&f!=null&&d(t,["encryption_spec","kmsKeyName"],f),n}function WA(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["model"],Uy(e,o));const r=a(t,["config"]);return r!=null&&JA(r,n),n}function KA(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["model"],Uy(e,o));const r=a(t,["config"]);return r!=null&&YA(r,n),n}function XA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],hn(e,o)),n}function QA(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],hn(e,o)),n}function ZA(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function jA(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function eR(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function tR(e){const t={},n=a(e,["id"]);n!=null&&d(t,["id"],n);const o=a(e,["args"]);o!=null&&d(t,["args"],o);const r=a(e,["name"]);if(r!=null&&d(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function nR(e){const t={},n=a(e,["mode"]);n!=null&&d(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&d(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function oR(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&d(t,["description"],n);const o=a(e,["name"]);o!=null&&d(t,["name"],o);const r=a(e,["parameters"]);r!=null&&d(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&d(t,["parametersJsonSchema"],i);const s=a(e,["response"]);s!=null&&d(t,["response"],s);const l=a(e,["responseJsonSchema"]);return l!=null&&d(t,["responseJsonSchema"],l),t}function rR(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],hn(e,o)),n}function iR(e,t){const n={},o=a(t,["name"]);return o!=null&&d(n,["_url","name"],hn(e,o)),n}function sR(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function lR(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function aR(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function uR(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function cR(e){const t={},n=a(e,["config"]);return n!=null&&aR(n,t),t}function dR(e){const t={},n=a(e,["config"]);return n!=null&&uR(n,t),t}function fR(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}function pR(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}function hR(e){const t={},n=a(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&d(t,["fileData"],eR(i));const s=a(e,["functionCall"]);s!=null&&d(t,["functionCall"],tR(s));const l=a(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const u=a(e,["inlineData"]);u!=null&&d(t,["inlineData"],OA(u));const c=a(e,["text"]);c!=null&&d(t,["text"],c);const f=a(e,["thought"]);f!=null&&d(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function mR(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],nR(n));const o=a(e,["retrievalConfig"]);return o!=null&&d(t,["retrievalConfig"],o),t}function gR(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const s=a(e,["codeExecution"]);if(s!=null&&d(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(e,["googleMaps"]);l!=null&&d(t,["googleMaps"],sR(l));const u=a(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],lR(u));const c=a(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function yR(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>oR(h))),d(t,["functionDeclarations"],p)}const o=a(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&d(t,["codeExecution"],s);const l=a(e,["enterpriseWebSearch"]);l!=null&&d(t,["enterpriseWebSearch"],l);const u=a(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=a(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const f=a(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function vR(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),n}function ER(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),n}function xR(e,t){const n={},o=a(t,["name"]);o!=null&&d(n,["_url","name"],hn(e,o));const r=a(t,["config"]);return r!=null&&vR(r,n),n}function SR(e,t){const n={},o=a(t,["name"]);o!=null&&d(n,["_url","name"],hn(e,o));const r=a(t,["config"]);return r!=null&&ER(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _R extends pn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new yo(dn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=KA(this.apiClient,t);return l=W("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=WA(this.apiClient,t);return l=W("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=iR(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=rR(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=QA(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=jA(f),h=new mh;return Object.assign(h,p),h})}else{const c=XA(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ZA(f),h=new mh;return Object.assign(h,p),h})}}async update(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=SR(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=xR(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=dR(t);return l=W("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=pR(f),h=new gh;return Object.assign(h,p),h})}else{const c=cR(t);return l=W("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=fR(f),h=new gh;return Object.assign(h,p),h})}}}function wh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ye(e){return this instanceof ye?(this.v=e,this):new ye(e)}function Ko(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(m){return function(v){return Promise.resolve(v).then(m,p)}}function l(m,v){o[m]&&(r[m]=function(x){return new Promise(function(C,g){i.push([m,x,C,g])>1||u(m,x)})},v&&(r[m]=v(r[m])))}function u(m,v){try{c(o[m](v))}catch(x){h(i[0][3],x)}}function c(m){m.value instanceof ye?Promise.resolve(m.value.v).then(f,p):h(i[0][2],m)}function f(m){u("next",m)}function p(m){u("throw",m)}function h(m,v){m(v),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Jr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof wh=="function"?wh(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(s){return new Promise(function(l,u){s=e[i](s),r(l,u,s.done,s.value)})}}function r(i,s,l,u){Promise.resolve(u).then(function(c){i({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Ky(n)}function Ky(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function CR(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ch(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const r=[];let i=!0;for(;o<n&&e[o].role==="model";)r.push(e[o]),i&&!Ky(e[o])&&(i=!1),o++;i?t.push(...r):t.pop()}return t}class TR{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new NR(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class NR{constructor(t,n,o,r={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),CR(i)}async sendMessage(t){var n;await this.sendPromise;const o=ze(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;const u=await r,c=(s=(i=u.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);const m=c?[c]:[];this.recordHistory(o,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const o=ze(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(t=!1){const n=t?Ch(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var o,r;return Ko(this,arguments,function*(){var s,l,u,c;const f=[];try{for(var p=!0,h=Jr(t),m;m=yield ye(h.next()),s=m.done,!s;p=!0){c=m.value,p=!1;const v=c;if(wR(v)){const x=(r=(o=v.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;x!==void 0&&f.push(x)}yield yield ye(v)}}catch(v){l={error:v}}finally{try{!p&&!s&&(u=h.return)&&(yield ye(u.call(h)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(t,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Ch(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Cl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(e){const t={},n=a(e,["file"]);return n!=null&&d(t,["file"],n),t}function AR(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function RR(e){const t={},n=a(e,["name"]);return n!=null&&d(t,["_url","file"],zy(n)),t}function MR(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function PR(e){const t={},n=a(e,["name"]);return n!=null&&d(t,["_url","file"],zy(n)),t}function kR(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function DR(e){const t={},n=a(e,["config"]);return n!=null&&kR(n,t),t}function FR(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LR extends pn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new yo(dn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DR(t);return i=W("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=FR(u),f=new HI;return Object.assign(f,c),f})}}async createInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=IR(t);return i=W("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=AR(u),f=new GI;return Object.assign(f,c),f})}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PR(t);return i=W("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=RR(t);return i=W("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=MR(u),f=new BI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hs(e){const t={},n=a(e,["data"]);if(n!=null&&d(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function UR(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ZR(i))),d(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&d(t,["role"],o),t}function VR(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function bR(e){const t={},n=a(e,["id"]);n!=null&&d(t,["id"],n);const o=a(e,["args"]);o!=null&&d(t,["args"],o);const r=a(e,["name"]);if(r!=null&&d(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function HR(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&d(t,["description"],n);const o=a(e,["name"]);o!=null&&d(t,["name"],o);const r=a(e,["parameters"]);r!=null&&d(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&d(t,["parametersJsonSchema"],i);const s=a(e,["response"]);s!=null&&d(t,["response"],s);const l=a(e,["responseJsonSchema"]);return l!=null&&d(t,["responseJsonSchema"],l),t}function GR(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const o=a(e,["responseJsonSchema"]);o!=null&&d(t,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const i=a(e,["candidateCount"]);i!=null&&d(t,["candidateCount"],i);const s=a(e,["enableAffectiveDialog"]);s!=null&&d(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&d(t,["frequencyPenalty"],l);const u=a(e,["logprobs"]);u!=null&&d(t,["logprobs"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const f=a(e,["mediaResolution"]);f!=null&&d(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&d(t,["presencePenalty"],p);const h=a(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const m=a(e,["responseMimeType"]);m!=null&&d(t,["responseMimeType"],m);const v=a(e,["responseModalities"]);v!=null&&d(t,["responseModalities"],v);const x=a(e,["responseSchema"]);x!=null&&d(t,["responseSchema"],x);const C=a(e,["routingConfig"]);C!=null&&d(t,["routingConfig"],C);const g=a(e,["seed"]);g!=null&&d(t,["seed"],g);const y=a(e,["speechConfig"]);y!=null&&d(t,["speechConfig"],Xy(y));const E=a(e,["stopSequences"]);E!=null&&d(t,["stopSequences"],E);const _=a(e,["temperature"]);_!=null&&d(t,["temperature"],_);const w=a(e,["thinkingConfig"]);w!=null&&d(t,["thinkingConfig"],w);const T=a(e,["topK"]);T!=null&&d(t,["topK"],T);const I=a(e,["topP"]);if(I!=null&&d(t,["topP"],I),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function BR(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function zR(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function $R(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","topK"],l);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],rd(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],m);const v=a(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],UR(ze(v)));const x=a(e,["tools"]);if(t!==void 0&&x!=null){let T=dr(x);Array.isArray(T)&&(T=T.map(I=>eM(cr(I)))),d(t,["setup","tools"],T)}const C=a(e,["sessionResumption"]);t!==void 0&&C!=null&&d(t,["setup","sessionResumption"],jR(C));const g=a(e,["inputAudioTranscription"]);t!==void 0&&g!=null&&d(t,["setup","inputAudioTranscription"],g);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const E=a(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&d(t,["setup","realtimeInputConfig"],E);const _=a(e,["contextWindowCompression"]);t!==void 0&&_!=null&&d(t,["setup","contextWindowCompression"],_);const w=a(e,["proactivity"]);return t!==void 0&&w!=null&&d(t,["setup","proactivity"],w),n}function qR(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],GR(o));const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","topK"],l);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Xy(rd(p)));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],m);const v=a(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],ze(v));const x=a(e,["tools"]);if(t!==void 0&&x!=null){let T=dr(x);Array.isArray(T)&&(T=T.map(I=>tM(cr(I)))),d(t,["setup","tools"],T)}const C=a(e,["sessionResumption"]);t!==void 0&&C!=null&&d(t,["setup","sessionResumption"],C);const g=a(e,["inputAudioTranscription"]);t!==void 0&&g!=null&&d(t,["setup","inputAudioTranscription"],g);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const E=a(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&d(t,["setup","realtimeInputConfig"],E);const _=a(e,["contextWindowCompression"]);t!==void 0&&_!=null&&d(t,["setup","contextWindowCompression"],_);const w=a(e,["proactivity"]);return t!==void 0&&w!=null&&d(t,["setup","proactivity"],w),n}function OR(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["setup","model"],de(e,o));const r=a(t,["config"]);return r!=null&&d(n,["config"],$R(r,n)),n}function JR(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["setup","model"],de(e,o));const r=a(t,["config"]);return r!=null&&d(n,["config"],qR(r,n)),n}function YR(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function WR(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["weightedPrompts"],o)}return t}function KR(e){const t={},n=a(e,["media"]);if(n!=null){let c=Vy(n);Array.isArray(c)&&(c=c.map(f=>hs(f))),d(t,["mediaChunks"],c)}const o=a(e,["audio"]);o!=null&&d(t,["audio"],hs(Hy(o)));const r=a(e,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&d(t,["video"],hs(by(i)));const s=a(e,["text"]);s!=null&&d(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&d(t,["activityStart"],l);const u=a(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function XR(e){const t={},n=a(e,["media"]);if(n!=null){let c=Vy(n);Array.isArray(c)&&(c=c.map(f=>f)),d(t,["mediaChunks"],c)}const o=a(e,["audio"]);o!=null&&d(t,["audio"],Hy(o));const r=a(e,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&d(t,["video"],by(i));const s=a(e,["text"]);s!=null&&d(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&d(t,["activityStart"],l);const u=a(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function QR(e){const t={},n=a(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const o=a(e,["serverContent"]);o!=null&&d(t,["serverContent"],o);const r=a(e,["toolCall"]);r!=null&&d(t,["toolCall"],r);const i=a(e,["toolCallCancellation"]);i!=null&&d(t,["toolCallCancellation"],i);const s=a(e,["usageMetadata"]);s!=null&&d(t,["usageMetadata"],nM(s));const l=a(e,["goAway"]);l!=null&&d(t,["goAway"],l);const u=a(e,["sessionResumptionUpdate"]);return u!=null&&d(t,["sessionResumptionUpdate"],u),t}function ZR(e){const t={},n=a(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&d(t,["fileData"],VR(i));const s=a(e,["functionCall"]);s!=null&&d(t,["functionCall"],bR(s));const l=a(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const u=a(e,["inlineData"]);u!=null&&d(t,["inlineData"],hs(u));const c=a(e,["text"]);c!=null&&d(t,["text"],c);const f=a(e,["thought"]);f!=null&&d(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function jR(e){const t={},n=a(e,["handle"]);if(n!=null&&d(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Xy(e){const t={},n=a(e,["languageCode"]);n!=null&&d(t,["languageCode"],n);const o=a(e,["voiceConfig"]);if(o!=null&&d(t,["voiceConfig"],o),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function eM(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const s=a(e,["codeExecution"]);if(s!=null&&d(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(e,["googleMaps"]);l!=null&&d(t,["googleMaps"],BR(l));const u=a(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],zR(u));const c=a(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function tM(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>HR(h))),d(t,["functionDeclarations"],p)}const o=a(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&d(t,["codeExecution"],s);const l=a(e,["enterpriseWebSearch"]);l!=null&&d(t,["enterpriseWebSearch"],l);const u=a(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=a(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const f=a(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function nM(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const o=a(e,["cachedContentTokenCount"]);o!=null&&d(t,["cachedContentTokenCount"],o);const r=a(e,["candidatesTokenCount"]);r!=null&&d(t,["responseTokenCount"],r);const i=a(e,["toolUsePromptTokenCount"]);i!=null&&d(t,["toolUsePromptTokenCount"],i);const s=a(e,["thoughtsTokenCount"]);s!=null&&d(t,["thoughtsTokenCount"],s);const l=a(e,["totalTokenCount"]);l!=null&&d(t,["totalTokenCount"],l);const u=a(e,["promptTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(v=>v)),d(t,["promptTokensDetails"],m)}const c=a(e,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(v=>v)),d(t,["cacheTokensDetails"],m)}const f=a(e,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(v=>v)),d(t,["responseTokensDetails"],m)}const p=a(e,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),d(t,["toolUsePromptTokensDetails"],m)}const h=a(e,["trafficType"]);return h!=null&&d(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oM(e){const t={},n=a(e,["data"]);if(n!=null&&d(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function rM(e){const t={},n=a(e,["content"]);n!=null&&d(t,["content"],n);const o=a(e,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],iM(o));const r=a(e,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const i=a(e,["finishReason"]);i!=null&&d(t,["finishReason"],i);const s=a(e,["avgLogprobs"]);s!=null&&d(t,["avgLogprobs"],s);const l=a(e,["groundingMetadata"]);l!=null&&d(t,["groundingMetadata"],l);const u=a(e,["index"]);u!=null&&d(t,["index"],u);const c=a(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const f=a(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["safetyRatings"],h)}const p=a(e,["urlContextMetadata"]);return p!=null&&d(t,["urlContextMetadata"],p),t}function iM(e){const t={},n=a(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}function sM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let i=_t(r);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["contents"],i)}return n}function lM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(t,["tokensInfo"],r)}return t}function aM(e){const t={},n=a(e,["values"]);n!=null&&d(t,["values"],n);const o=a(e,["statistics"]);return o!=null&&d(t,["statistics"],uM(o)),t}function uM(e){const t={},n=a(e,["truncated"]);n!=null&&d(t,["truncated"],n);const o=a(e,["token_count"]);return o!=null&&d(t,["tokenCount"],o),t}function Tl(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vP(i))),d(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&d(t,["role"],o),t}function cM(e){const t={},n=a(e,["controlType"]);n!=null&&d(t,["controlType"],n);const o=a(e,["enableControlImageComputation"]);return o!=null&&d(t,["computeControl"],o),t}function dM(e){const t={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function fM(e,t){const n={},o=a(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],ze(o));const r=a(e,["tools"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>tv(l))),d(t,["tools"],s)}const i=a(e,["generationConfig"]);return t!==void 0&&i!=null&&d(t,["generationConfig"],oP(i)),n}function pM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let s=_t(r);Array.isArray(s)&&(s=s.map(l=>Tl(l))),d(n,["contents"],s)}const i=a(t,["config"]);return i!=null&&dM(i),n}function hM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let s=_t(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const i=a(t,["config"]);return i!=null&&fM(i,n),n}function mM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["totalTokens"]);o!=null&&d(t,["totalTokens"],o);const r=a(e,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function gM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["totalTokens"]);return o!=null&&d(t,["totalTokens"],o),t}function yM(e,t){const n={},o=a(t,["model"]);return o!=null&&d(n,["_url","name"],de(e,o)),n}function vM(e,t){const n={},o=a(t,["model"]);return o!=null&&d(n,["_url","name"],de(e,o)),n}function EM(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function xM(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function SM(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const l=a(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);const u=a(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=a(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const f=a(e,["personGeneration"]);t!==void 0&&f!=null&&d(t,["parameters","personGeneration"],f);const p=a(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&d(t,["parameters","includeSafetyAttributes"],p);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const m=a(e,["language"]);t!==void 0&&m!=null&&d(t,["parameters","language"],m);const v=a(e,["outputMimeType"]);t!==void 0&&v!=null&&d(t,["parameters","outputOptions","mimeType"],v);const x=a(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","compressionQuality"],x);const C=a(e,["addWatermark"]);t!==void 0&&C!=null&&d(t,["parameters","addWatermark"],C);const g=a(e,["labels"]);t!==void 0&&g!=null&&d(t,["labels"],g);const y=a(e,["editMode"]);t!==void 0&&y!=null&&d(t,["parameters","editMode"],y);const E=a(e,["baseSteps"]);return t!==void 0&&E!=null&&d(t,["parameters","editConfig","baseSteps"],E),n}function _M(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const i=a(t,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>CP(u))),d(n,["instances[0]","referenceImages"],l)}const s=a(t,["config"]);return s!=null&&SM(s,n),n}function wM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Nl(i))),d(t,["generatedImages"],r)}return t}function CM(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&d(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function TM(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&d(t,["instances[]","task_type"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&d(t,["instances[]","title"],r);const i=a(e,["outputDimensionality"]);t!==void 0&&i!=null&&d(t,["parameters","outputDimensionality"],i);const s=a(e,["mimeType"]);t!==void 0&&s!=null&&d(t,["instances[]","mimeType"],s);const l=a(e,["autoTruncate"]);return t!==void 0&&l!=null&&d(t,["parameters","autoTruncate"],l),n}function NM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let l=td(e,r);Array.isArray(l)&&(l=l.map(u=>u)),d(n,["requests[]","content"],l)}const i=a(t,["config"]);i!=null&&CM(i,n);const s=a(t,["model"]);return s!==void 0&&d(n,["requests[]","model"],de(e,s)),n}function IM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let s=td(e,r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["instances[]","content"],s)}const i=a(t,["config"]);return i!=null&&TM(i,n),n}function AM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["embeddings"],i)}const r=a(e,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function RM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>aM(s))),d(t,["embeddings"],i)}const r=a(e,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function MM(e){const t={},n=a(e,["endpoint"]);n!=null&&d(t,["name"],n);const o=a(e,["deployedModelId"]);return o!=null&&d(t,["deployedModelId"],o),t}function PM(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function kM(e){const t={},n=a(e,["id"]);n!=null&&d(t,["id"],n);const o=a(e,["args"]);o!=null&&d(t,["args"],o);const r=a(e,["name"]);if(r!=null&&d(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function DM(e){const t={},n=a(e,["mode"]);n!=null&&d(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&d(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function FM(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&d(t,["description"],n);const o=a(e,["name"]);o!=null&&d(t,["name"],o);const r=a(e,["parameters"]);r!=null&&d(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&d(t,["parametersJsonSchema"],i);const s=a(e,["response"]);s!=null&&d(t,["response"],s);const l=a(e,["responseJsonSchema"]);return l!=null&&d(t,["responseJsonSchema"],l),t}function LM(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Tl(ze(r)));const i=a(t,["temperature"]);i!=null&&d(o,["temperature"],i);const s=a(t,["topP"]);s!=null&&d(o,["topP"],s);const l=a(t,["topK"]);l!=null&&d(o,["topK"],l);const u=a(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(o,["maxOutputTokens"],c);const f=a(t,["stopSequences"]);f!=null&&d(o,["stopSequences"],f);const p=a(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const h=a(t,["logprobs"]);h!=null&&d(o,["logprobs"],h);const m=a(t,["presencePenalty"]);m!=null&&d(o,["presencePenalty"],m);const v=a(t,["frequencyPenalty"]);v!=null&&d(o,["frequencyPenalty"],v);const x=a(t,["seed"]);x!=null&&d(o,["seed"],x);const C=a(t,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const g=a(t,["responseSchema"]);g!=null&&d(o,["responseSchema"],nd(g));const y=a(t,["responseJsonSchema"]);if(y!=null&&d(o,["responseJsonSchema"],y),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(t,["safetySettings"]);if(n!==void 0&&E!=null){let G=E;Array.isArray(G)&&(G=G.map(z=>TP(z))),d(n,["safetySettings"],G)}const _=a(t,["tools"]);if(n!==void 0&&_!=null){let G=dr(_);Array.isArray(G)&&(G=G.map(z=>kP(cr(z)))),d(n,["tools"],G)}const w=a(t,["toolConfig"]);if(n!==void 0&&w!=null&&d(n,["toolConfig"],PP(w)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=a(t,["cachedContent"]);n!==void 0&&T!=null&&d(n,["cachedContent"],hn(e,T));const I=a(t,["responseModalities"]);I!=null&&d(o,["responseModalities"],I);const M=a(t,["mediaResolution"]);M!=null&&d(o,["mediaResolution"],M);const P=a(t,["speechConfig"]);if(P!=null&&d(o,["speechConfig"],od(P)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=a(t,["thinkingConfig"]);F!=null&&d(o,["thinkingConfig"],F);const V=a(t,["imageConfig"]);return V!=null&&d(o,["imageConfig"],aP(V)),o}function UM(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],ze(r));const i=a(t,["temperature"]);i!=null&&d(o,["temperature"],i);const s=a(t,["topP"]);s!=null&&d(o,["topP"],s);const l=a(t,["topK"]);l!=null&&d(o,["topK"],l);const u=a(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(o,["maxOutputTokens"],c);const f=a(t,["stopSequences"]);f!=null&&d(o,["stopSequences"],f);const p=a(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const h=a(t,["logprobs"]);h!=null&&d(o,["logprobs"],h);const m=a(t,["presencePenalty"]);m!=null&&d(o,["presencePenalty"],m);const v=a(t,["frequencyPenalty"]);v!=null&&d(o,["frequencyPenalty"],v);const x=a(t,["seed"]);x!=null&&d(o,["seed"],x);const C=a(t,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);const g=a(t,["responseSchema"]);g!=null&&d(o,["responseSchema"],nd(g));const y=a(t,["responseJsonSchema"]);y!=null&&d(o,["responseJsonSchema"],y);const E=a(t,["routingConfig"]);E!=null&&d(o,["routingConfig"],E);const _=a(t,["modelSelectionConfig"]);_!=null&&d(o,["modelConfig"],_);const w=a(t,["safetySettings"]);if(n!==void 0&&w!=null){let k=w;Array.isArray(k)&&(k=k.map(B=>B)),d(n,["safetySettings"],k)}const T=a(t,["tools"]);if(n!==void 0&&T!=null){let k=dr(T);Array.isArray(k)&&(k=k.map(B=>tv(cr(B)))),d(n,["tools"],k)}const I=a(t,["toolConfig"]);n!==void 0&&I!=null&&d(n,["toolConfig"],I);const M=a(t,["labels"]);n!==void 0&&M!=null&&d(n,["labels"],M);const P=a(t,["cachedContent"]);n!==void 0&&P!=null&&d(n,["cachedContent"],hn(e,P));const F=a(t,["responseModalities"]);F!=null&&d(o,["responseModalities"],F);const V=a(t,["mediaResolution"]);V!=null&&d(o,["mediaResolution"],V);const G=a(t,["speechConfig"]);G!=null&&d(o,["speechConfig"],ev(od(G)));const z=a(t,["audioTimestamp"]);z!=null&&d(o,["audioTimestamp"],z);const N=a(t,["thinkingConfig"]);N!=null&&d(o,["thinkingConfig"],N);const U=a(t,["imageConfig"]);return U!=null&&d(o,["imageConfig"],uP(U)),o}function Th(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let s=_t(r);Array.isArray(s)&&(s=s.map(l=>Tl(l))),d(n,["contents"],s)}const i=a(t,["config"]);return i!=null&&d(n,["generationConfig"],LM(e,i,n)),n}function Nh(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["contents"]);if(r!=null){let s=_t(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const i=a(t,["config"]);return i!=null&&d(n,["generationConfig"],UM(e,i,n)),n}function Ih(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>rM(c))),d(t,["candidates"],u)}const r=a(e,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const i=a(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const s=a(e,["responseId"]);s!=null&&d(t,["responseId"],s);const l=a(e,["usageMetadata"]);return l!=null&&d(t,["usageMetadata"],l),t}function Ah(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["candidates"],c)}const r=a(e,["createTime"]);r!=null&&d(t,["createTime"],r);const i=a(e,["modelVersion"]);i!=null&&d(t,["modelVersion"],i);const s=a(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const l=a(e,["responseId"]);l!=null&&d(t,["responseId"],l);const u=a(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function VM(e,t){const n={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=a(e,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const i=a(e,["guidanceScale"]);if(t!==void 0&&i!=null&&d(t,["parameters","guidanceScale"],i),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&d(t,["parameters","safetySetting"],s);const l=a(e,["personGeneration"]);t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l);const u=a(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&d(t,["parameters","includeSafetyAttributes"],u);const c=a(e,["includeRaiReason"]);t!==void 0&&c!=null&&d(t,["parameters","includeRaiReason"],c);const f=a(e,["language"]);t!==void 0&&f!=null&&d(t,["parameters","language"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const h=a(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&d(t,["parameters","outputOptions","compressionQuality"],h),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=a(e,["imageSize"]);if(t!==void 0&&m!=null&&d(t,["parameters","sampleImageSize"],m),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function bM(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const l=a(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);const u=a(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=a(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const f=a(e,["personGeneration"]);t!==void 0&&f!=null&&d(t,["parameters","personGeneration"],f);const p=a(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&d(t,["parameters","includeSafetyAttributes"],p);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const m=a(e,["language"]);t!==void 0&&m!=null&&d(t,["parameters","language"],m);const v=a(e,["outputMimeType"]);t!==void 0&&v!=null&&d(t,["parameters","outputOptions","mimeType"],v);const x=a(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","compressionQuality"],x);const C=a(e,["addWatermark"]);t!==void 0&&C!=null&&d(t,["parameters","addWatermark"],C);const g=a(e,["labels"]);t!==void 0&&g!=null&&d(t,["labels"],g);const y=a(e,["imageSize"]);t!==void 0&&y!=null&&d(t,["parameters","sampleImageSize"],y);const E=a(e,["enhancePrompt"]);return t!==void 0&&E!=null&&d(t,["parameters","enhancePrompt"],E),n}function HM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const i=a(t,["config"]);return i!=null&&VM(i,n),n}function GM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const i=a(t,["config"]);return i!=null&&bM(i,n),n}function BM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>jM(s))),d(t,["generatedImages"],i)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],Zy(r)),t}function zM(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Nl(s))),d(t,["generatedImages"],i)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],jy(r)),t}function $M(e,t){const n={},o=a(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(e,["durationSeconds"]);if(t!==void 0&&r!=null&&d(t,["parameters","durationSeconds"],r),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const s=a(e,["resolution"]);t!==void 0&&s!=null&&d(t,["parameters","resolution"],s);const l=a(e,["personGeneration"]);if(t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(e,["negativePrompt"]);t!==void 0&&u!=null&&d(t,["parameters","negativePrompt"],u);const c=a(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&d(t,["parameters","enhancePrompt"],c),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(e,["lastFrame"]);t!==void 0&&f!=null&&d(t,["instances[0]","lastFrame"],Il(f));const p=a(e,["referenceImages"]);if(t!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>OP(m))),d(t,["instances[0]","referenceImages"],h)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function qM(e,t){const n={},o=a(e,["numberOfVideos"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const i=a(e,["fps"]);t!==void 0&&i!=null&&d(t,["parameters","fps"],i);const s=a(e,["durationSeconds"]);t!==void 0&&s!=null&&d(t,["parameters","durationSeconds"],s);const l=a(e,["seed"]);t!==void 0&&l!=null&&d(t,["parameters","seed"],l);const u=a(e,["aspectRatio"]);t!==void 0&&u!=null&&d(t,["parameters","aspectRatio"],u);const c=a(e,["resolution"]);t!==void 0&&c!=null&&d(t,["parameters","resolution"],c);const f=a(e,["personGeneration"]);t!==void 0&&f!=null&&d(t,["parameters","personGeneration"],f);const p=a(e,["pubsubTopic"]);t!==void 0&&p!=null&&d(t,["parameters","pubsubTopic"],p);const h=a(e,["negativePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","negativePrompt"],h);const m=a(e,["enhancePrompt"]);t!==void 0&&m!=null&&d(t,["parameters","enhancePrompt"],m);const v=a(e,["generateAudio"]);t!==void 0&&v!=null&&d(t,["parameters","generateAudio"],v);const x=a(e,["lastFrame"]);t!==void 0&&x!=null&&d(t,["instances[0]","lastFrame"],Ut(x));const C=a(e,["referenceImages"]);if(t!==void 0&&C!=null){let E=C;Array.isArray(E)&&(E=E.map(_=>JP(_))),d(t,["instances[0]","referenceImages"],E)}const g=a(e,["mask"]);t!==void 0&&g!=null&&d(t,["instances[0]","mask"],qP(g));const y=a(e,["compressionQuality"]);return t!==void 0&&y!=null&&d(t,["parameters","compressionQuality"],y),n}function OM(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response","generateVideoResponse"]);return s!=null&&d(t,["response"],KM(s)),t}function JM(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response"]);return s!=null&&d(t,["response"],XM(s)),t}function YM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const i=a(t,["image"]);i!=null&&d(n,["instances[0]","image"],Il(i));const s=a(t,["video"]);s!=null&&d(n,["instances[0]","video"],nv(s));const l=a(t,["source"]);l!=null&&QM(l,n);const u=a(t,["config"]);return u!=null&&$M(u,n),n}function WM(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const i=a(t,["image"]);i!=null&&d(n,["instances[0]","image"],Ut(i));const s=a(t,["video"]);s!=null&&d(n,["instances[0]","video"],ov(s));const l=a(t,["source"]);l!=null&&ZM(l,n);const u=a(t,["config"]);return u!=null&&qM(u,n),n}function KM(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>tP(s))),d(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function XM(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nP(s))),d(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function QM(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Il(r));const i=a(e,["video"]);return t!==void 0&&i!=null&&d(t,["instances[0]","video"],nv(i)),n}function ZM(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Ut(r));const i=a(e,["video"]);return t!==void 0&&i!=null&&d(t,["instances[0]","video"],ov(i)),n}function jM(e){const t={},n=a(e,["_self"]);n!=null&&d(t,["image"],cP(n));const o=a(e,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const r=a(e,["_self"]);return r!=null&&d(t,["safetyAttributes"],Zy(r)),t}function Nl(e){const t={},n=a(e,["_self"]);n!=null&&d(t,["image"],Qy(n));const o=a(e,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const r=a(e,["_self"]);r!=null&&d(t,["safetyAttributes"],jy(r));const i=a(e,["prompt"]);return i!=null&&d(t,["enhancedPrompt"],i),t}function eP(e){const t={},n=a(e,["_self"]);n!=null&&d(t,["mask"],Qy(n));const o=a(e,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(t,["labels"],r)}return t}function tP(e){const t={},n=a(e,["video"]);return n!=null&&d(t,["video"],zP(n)),t}function nP(e){const t={},n=a(e,["_self"]);return n!=null&&d(t,["video"],$P(n)),t}function oP(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const o=a(e,["responseJsonSchema"]);o!=null&&d(t,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const i=a(e,["candidateCount"]);i!=null&&d(t,["candidateCount"],i);const s=a(e,["enableAffectiveDialog"]);s!=null&&d(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&d(t,["frequencyPenalty"],l);const u=a(e,["logprobs"]);u!=null&&d(t,["logprobs"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const f=a(e,["mediaResolution"]);f!=null&&d(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&d(t,["presencePenalty"],p);const h=a(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const m=a(e,["responseMimeType"]);m!=null&&d(t,["responseMimeType"],m);const v=a(e,["responseModalities"]);v!=null&&d(t,["responseModalities"],v);const x=a(e,["responseSchema"]);x!=null&&d(t,["responseSchema"],x);const C=a(e,["routingConfig"]);C!=null&&d(t,["routingConfig"],C);const g=a(e,["seed"]);g!=null&&d(t,["seed"],g);const y=a(e,["speechConfig"]);y!=null&&d(t,["speechConfig"],ev(y));const E=a(e,["stopSequences"]);E!=null&&d(t,["stopSequences"],E);const _=a(e,["temperature"]);_!=null&&d(t,["temperature"],_);const w=a(e,["thinkingConfig"]);w!=null&&d(t,["thinkingConfig"],w);const T=a(e,["topK"]);T!=null&&d(t,["topK"],T);const I=a(e,["topP"]);if(I!=null&&d(t,["topP"],I),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function rP(e,t){const n={},o=a(t,["model"]);return o!=null&&d(n,["_url","name"],de(e,o)),n}function iP(e,t){const n={},o=a(t,["model"]);return o!=null&&d(n,["_url","name"],de(e,o)),n}function sP(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function lP(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function aP(e){const t={},n=a(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const o=a(e,["imageSize"]);if(o!=null&&d(t,["imageSize"],o),a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function uP(e){const t={},n=a(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const o=a(e,["imageSize"]);o!=null&&d(t,["imageSize"],o);const r=a(e,["outputMimeType"]);r!=null&&d(t,["imageOutputOptions","mimeType"],r);const i=a(e,["outputCompressionQuality"]);return i!=null&&d(t,["imageOutputOptions","compressionQuality"],i),t}function cP(e){const t={},n=a(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],qn(n));const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Qy(e){const t={},n=a(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],qn(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Il(e){const t={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],qn(n));const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Ut(e){const t={},n=a(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const o=a(e,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],qn(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function dP(e,t,n){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&d(n,["_query","pageToken"],i);const s=a(t,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],$y(e,l)),o}function fP(e,t,n){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&d(n,["_query","pageToken"],i);const s=a(t,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],$y(e,l)),o}function pP(e,t){const n={},o=a(t,["config"]);return o!=null&&dP(e,o,n),n}function hP(e,t){const n={},o=a(t,["config"]);return o!=null&&fP(e,o,n),n}function mP(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let i=qy(r);Array.isArray(i)&&(i=i.map(s=>Pu(s))),d(t,["models"],i)}return t}function gP(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let i=qy(r);Array.isArray(i)&&(i=i.map(s=>ku(s))),d(t,["models"],i)}return t}function yP(e){const t={},n=a(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const o=a(e,["segmentationClasses"]);o!=null&&d(t,["maskClasses"],o);const r=a(e,["maskDilation"]);return r!=null&&d(t,["dilation"],r),t}function Pu(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["displayName"]);o!=null&&d(t,["displayName"],o);const r=a(e,["description"]);r!=null&&d(t,["description"],r);const i=a(e,["version"]);i!=null&&d(t,["version"],i);const s=a(e,["_self"]);s!=null&&d(t,["tunedModelInfo"],DP(s));const l=a(e,["inputTokenLimit"]);l!=null&&d(t,["inputTokenLimit"],l);const u=a(e,["outputTokenLimit"]);u!=null&&d(t,["outputTokenLimit"],u);const c=a(e,["supportedGenerationMethods"]);c!=null&&d(t,["supportedActions"],c);const f=a(e,["temperature"]);f!=null&&d(t,["temperature"],f);const p=a(e,["maxTemperature"]);p!=null&&d(t,["maxTemperature"],p);const h=a(e,["topP"]);h!=null&&d(t,["topP"],h);const m=a(e,["topK"]);m!=null&&d(t,["topK"],m);const v=a(e,["thinking"]);return v!=null&&d(t,["thinking"],v),t}function ku(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["displayName"]);o!=null&&d(t,["displayName"],o);const r=a(e,["description"]);r!=null&&d(t,["description"],r);const i=a(e,["versionId"]);i!=null&&d(t,["version"],i);const s=a(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>MM(h))),d(t,["endpoints"],p)}const l=a(e,["labels"]);l!=null&&d(t,["labels"],l);const u=a(e,["_self"]);u!=null&&d(t,["tunedModelInfo"],FP(u));const c=a(e,["defaultCheckpointId"]);c!=null&&d(t,["defaultCheckpointId"],c);const f=a(e,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),d(t,["checkpoints"],p)}return t}function vP(e){const t={},n=a(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&d(t,["fileData"],PM(i));const s=a(e,["functionCall"]);s!=null&&d(t,["functionCall"],kM(s));const l=a(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const u=a(e,["inlineData"]);u!=null&&d(t,["inlineData"],oM(u));const c=a(e,["text"]);c!=null&&d(t,["text"],c);const f=a(e,["thought"]);f!=null&&d(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function EP(e){const t={},n=a(e,["productImage"]);return n!=null&&d(t,["image"],Ut(n)),t}function xP(e,t){const n={},o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=a(e,["baseSteps"]);t!==void 0&&r!=null&&d(t,["parameters","baseSteps"],r);const i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);const s=a(e,["seed"]);t!==void 0&&s!=null&&d(t,["parameters","seed"],s);const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&d(t,["parameters","safetySetting"],l);const u=a(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const c=a(e,["addWatermark"]);t!==void 0&&c!=null&&d(t,["parameters","addWatermark"],c);const f=a(e,["outputMimeType"]);t!==void 0&&f!=null&&d(t,["parameters","outputOptions","mimeType"],f);const p=a(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","compressionQuality"],p);const h=a(e,["enhancePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","enhancePrompt"],h);const m=a(e,["labels"]);return t!==void 0&&m!=null&&d(t,["labels"],m),n}function SP(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["source"]);r!=null&&wP(r,n);const i=a(t,["config"]);return i!=null&&xP(i,n),n}function _P(e){const t={},n=a(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Nl(r))),d(t,["generatedImages"],o)}return t}function wP(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=a(e,["personImage"]);t!==void 0&&r!=null&&d(t,["instances[0]","personImage","image"],Ut(r));const i=a(e,["productImages"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>EP(l))),d(t,["instances[0]","productImages"],s)}return n}function CP(e){const t={},n=a(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],Ut(n));const o=a(e,["referenceId"]);o!=null&&d(t,["referenceId"],o);const r=a(e,["referenceType"]);r!=null&&d(t,["referenceType"],r);const i=a(e,["maskImageConfig"]);i!=null&&d(t,["maskImageConfig"],yP(i));const s=a(e,["controlImageConfig"]);s!=null&&d(t,["controlImageConfig"],cM(s));const l=a(e,["styleImageConfig"]);l!=null&&d(t,["styleImageConfig"],l);const u=a(e,["subjectImageConfig"]);return u!=null&&d(t,["subjectImageConfig"],u),t}function Zy(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const o=a(e,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const r=a(e,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function jy(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const o=a(e,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const r=a(e,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function TP(e){const t={},n=a(e,["category"]);if(n!=null&&d(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function NP(e){const t={},n=a(e,["image"]);return n!=null&&d(t,["image"],Ut(n)),t}function IP(e,t){const n={},o=a(e,["mode"]);t!==void 0&&o!=null&&d(t,["parameters","mode"],o);const r=a(e,["maxPredictions"]);t!==void 0&&r!=null&&d(t,["parameters","maxPredictions"],r);const i=a(e,["confidenceThreshold"]);t!==void 0&&i!=null&&d(t,["parameters","confidenceThreshold"],i);const s=a(e,["maskDilation"]);t!==void 0&&s!=null&&d(t,["parameters","maskDilation"],s);const l=a(e,["binaryColorThreshold"]);t!==void 0&&l!=null&&d(t,["parameters","binaryColorThreshold"],l);const u=a(e,["labels"]);return t!==void 0&&u!=null&&d(t,["labels"],u),n}function AP(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["source"]);r!=null&&MP(r,n);const i=a(t,["config"]);return i!=null&&IP(i,n),n}function RP(e){const t={},n=a(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>eP(r))),d(t,["generatedMasks"],o)}return t}function MP(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Ut(r));const i=a(e,["scribbleImage"]);return t!==void 0&&i!=null&&d(t,["instances[0]","scribble"],NP(i)),n}function ev(e){const t={},n=a(e,["languageCode"]);n!=null&&d(t,["languageCode"],n);const o=a(e,["voiceConfig"]);if(o!=null&&d(t,["voiceConfig"],o),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function PP(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],DM(n));const o=a(e,["retrievalConfig"]);return o!=null&&d(t,["retrievalConfig"],o),t}function kP(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const s=a(e,["codeExecution"]);if(s!=null&&d(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(e,["googleMaps"]);l!=null&&d(t,["googleMaps"],sP(l));const u=a(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],lP(u));const c=a(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function tv(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>FM(h))),d(t,["functionDeclarations"],p)}const o=a(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&d(t,["codeExecution"],s);const l=a(e,["enterpriseWebSearch"]);l!=null&&d(t,["enterpriseWebSearch"],l);const u=a(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=a(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const f=a(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function DP(e){const t={},n=a(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const o=a(e,["createTime"]);o!=null&&d(t,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function FP(e){const t={},n=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const o=a(e,["createTime"]);o!=null&&d(t,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function LP(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&d(t,["defaultCheckpointId"],i),n}function UP(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&d(t,["defaultCheckpointId"],i),n}function VP(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","name"],de(e,o));const r=a(t,["config"]);return r!=null&&LP(r,n),n}function bP(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["config"]);return r!=null&&UP(r,n),n}function HP(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=a(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const i=a(e,["personGeneration"]);t!==void 0&&i!=null&&d(t,["parameters","personGeneration"],i);const s=a(e,["includeRaiReason"]);t!==void 0&&s!=null&&d(t,["parameters","includeRaiReason"],s);const l=a(e,["outputMimeType"]);t!==void 0&&l!=null&&d(t,["parameters","outputOptions","mimeType"],l);const u=a(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&d(t,["parameters","outputOptions","compressionQuality"],u);const c=a(e,["enhanceInputImage"]);t!==void 0&&c!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],c);const f=a(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=a(e,["labels"]);t!==void 0&&p!=null&&d(t,["labels"],p);const h=a(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const m=a(e,["mode"]);return t!==void 0&&m!=null&&d(t,["parameters","mode"],m),n}function GP(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["_url","model"],de(e,o));const r=a(t,["image"]);r!=null&&d(n,["instances[0]","image"],Ut(r));const i=a(t,["upscaleFactor"]);i!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=a(t,["config"]);return s!=null&&HP(s,n),n}function BP(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Nl(i))),d(t,["generatedImages"],r)}return t}function zP(e){const t={},n=a(e,["uri"]);n!=null&&d(t,["uri"],n);const o=a(e,["encodedVideo"]);o!=null&&d(t,["videoBytes"],qn(o));const r=a(e,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function $P(e){const t={},n=a(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],qn(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function qP(e){const t={},n=a(e,["image"]);n!=null&&d(t,["_self"],Ut(n));const o=a(e,["maskMode"]);return o!=null&&d(t,["maskMode"],o),t}function OP(e){const t={},n=a(e,["image"]);n!=null&&d(t,["image"],Il(n));const o=a(e,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function JP(e){const t={},n=a(e,["image"]);n!=null&&d(t,["image"],Ut(n));const o=a(e,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function nv(e){const t={},n=a(e,["uri"]);n!=null&&d(t,["uri"],n);const o=a(e,["videoBytes"]);o!=null&&d(t,["encodedVideo"],qn(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["encoding"],r),t}function ov(e){const t={},n=a(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const o=a(e,["videoBytes"]);o!=null&&d(t,["bytesBase64Encoded"],qn(o));const r=a(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YP(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&d(t,["displayName"],o),n}function WP(e){const t={},n=a(e,["config"]);return n!=null&&YP(n,t),t}function KP(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&d(t,["_query","force"],o),n}function XP(e){const t={},n=a(e,["name"]);n!=null&&d(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&KP(o,t),t}function QP(e){const t={},n=a(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function ZP(e,t){const n={},o=a(e,["customMetadata"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["customMetadata"],i)}const r=a(e,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),n}function jP(e){const t={},n=a(e,["name"]);n!=null&&d(t,["name"],n);const o=a(e,["metadata"]);o!=null&&d(t,["metadata"],o);const r=a(e,["done"]);r!=null&&d(t,["done"],r);const i=a(e,["error"]);i!=null&&d(t,["error"],i);const s=a(e,["response"]);return s!=null&&d(t,["response"],tk(s)),t}function ek(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const o=a(e,["fileName"]);o!=null&&d(t,["fileName"],o);const r=a(e,["config"]);return r!=null&&ZP(r,t),t}function tk(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&d(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function nk(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function ok(e){const t={},n=a(e,["config"]);return n!=null&&nk(n,t),t}function rk(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["fileSearchStores"],i)}return t}function rv(e,t){const n={},o=a(e,["mimeType"]);t!==void 0&&o!=null&&d(t,["mimeType"],o);const r=a(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),d(t,["customMetadata"],l)}const s=a(e,["chunkingConfig"]);return t!==void 0&&s!=null&&d(t,["chunkingConfig"],s),n}function ik(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const o=a(e,["config"]);return o!=null&&rv(o,t),t}function sk(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lk="Content-Type",ak="X-Server-Timeout",uk="User-Agent",Du="x-goog-api-client",ck="1.31.0",dk=`google-genai-sdk/${ck}`,fk="v1beta1",pk="v1beta",Rh=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hk{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:fk,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:pk,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[s,l]of Object.entries(t.queryParams))r.searchParams.append(s,String(l));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.unaryApiCall(r,i,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.streamApiCall(r,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=s}return n&&n.extraBody!==null&&mk(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Mh(r),new Au(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Mh(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var n;return Ko(this,arguments,function*(){const r=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:u}=yield ye(r.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(u,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),m=h.status,v=h.code,x=`got status: ${m}. ${JSON.stringify(p)}`;if(v>=400&&v<600)throw new Cl({message:x,status:v})}}catch(p){if(p.name==="ApiError")throw p}s+=c;let f=s.match(Rh);for(;f;){const p=f[1];try{const h=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ye(new Au(h)),s=s.slice(f[0].length),f=s.match(Rh)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=dk+" "+this.clientOptions.userAgentExtra;return t[uk]=n,t[Du]=n,t[lk]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))o.append(r,i);t.timeout&&t.timeout>0&&o.append(ak,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(t);r.sizeBytes=String(s.size);const l=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u={file:r},c=this.getFileName(t),f=W("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,u,n==null?void 0:n.httpOptions);return i.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),u=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&rv(o,p);const h=await this.fetchUploadUrl(c,l,u,f,p,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,r,i,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Mh(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Cl({message:r,status:n}):new Error(r)}}function mk(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const l=Object.assign({},i);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=l[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),l[u]=c)}return l}const r=o(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gk="mcp_used/unknown";let yk=!1;function iv(e){for(const t of e)if(vk(t)||typeof t=="object"&&"inputSchema"in t)return!0;return yk}function sv(e){var t;const n=(t=e[Du])!==null&&t!==void 0?t:"";e[Du]=(n+` ${gk}`).trimStart()}function vk(e){return e!==null&&typeof e=="object"&&e instanceof id}function Ek(e,t=100){return Ko(this,arguments,function*(){let o,r=0;for(;r<t;){const i=yield ye(e.listTools({cursor:o}));for(const s of i.tools)yield yield ye(s),r++;if(!i.nextCursor)break;o=i.nextCursor}})}class id{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new id(t,n)}async initialize(){var t,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,Jr(Ek(f))),c;c=await u.next(),t=c.done,!t;l=!0){r=c.value,l=!1;const p=r;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!t&&(o=u.return)&&await o.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),QI(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xk(e,t,n){const o=new $I;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),t(o)}class Sk{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=Ck(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const f=new Promise(E=>{c=E}),p=t.callbacks,h=function(){c({})},m=this.apiClient,v={onopen:h,onmessage:E=>{xk(m,p.onmessage,E)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(E){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(E){}},x=this.webSocketFactory.create(u,wk(s),v);x.connect(),await f;const y={setup:{model:de(this.apiClient,t.model)}};return x.send(JSON.stringify(y)),new _k(x,this.apiClient)}}class _k{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=WR(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=YR(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Uo.PLAY)}pause(){this.sendPlaybackControl(Uo.PAUSE)}stop(){this.sendPlaybackControl(Uo.STOP)}resetContext(){this.sendPlaybackControl(Uo.RESET_CONTEXT)}close(){this.conn.close()}}function wk(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Ck(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Nk(e,t,n){const o=new zI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(e.isVertexAI()){const s=QR(i);Object.assign(o,s)}else Object.assign(o,i);t(o)}class Ik{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new Sk(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,r,i,s,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&iv(t.config.tools)&&sv(p);const h=Pk(p);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const P=this.apiClient.getApiKey();let F="BidiGenerateContent",V="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",V="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${V}=${P}`}let m=()=>{};const v=new Promise(P=>{m=P}),x=t.callbacks,C=function(){var P;(P=x==null?void 0:x.onopen)===null||P===void 0||P.call(x),m({})},g=this.apiClient,y={onopen:C,onmessage:P=>{Nk(g,x.onmessage,P)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(P){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(P){}},E=this.webSocketFactory.create(f,Mk(h),y);E.connect(),await v;let _=de(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const P=this.apiClient.getProject(),F=this.apiClient.getLocation();_=`projects/${P}/locations/${F}/`+_}let w={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Xs.AUDIO]}:t.config.responseModalities=[Xs.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(l=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],I=[];for(const P of T)if(this.isCallableTool(P)){const F=P;I.push(await F.tool())}else I.push(P);I.length>0&&(t.config.tools=I);const M={model:_,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?w=JR(this.apiClient,M):w=OR(this.apiClient,M),delete w.config,E.send(JSON.stringify(w)),new Rk(E,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Ak={turnComplete:!0};class Rk{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=_t(n.turns),t.isVertexAI()||(o=o.map(r=>Tl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(Tk)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},Ak),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:XR(t)}:n={realtimeInput:KR(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Mk(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Pk(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ph=10;function kh(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Xo(s)){r=!0;break}if(!r)return!0;const i=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Xo(e){return"callTool"in e&&typeof e.callTool=="function"}function kk(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>Xo(r)))!==null&&o!==void 0?o:!1}function Dh(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,r)=>{if(Xo(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Fh(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dk extends pn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,r,i,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!kk(n)||kh(n.config))return await this.generateContentInternal(u);const c=Dh(n);if(c.length>0){const x=c.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let f,p;const h=_t(u.contents),m=(i=(r=(o=u.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Ph;let v=0;for(;v<m&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const x=f.candidates[0].content,C=[];for(const g of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Xo(g)){const E=await g.callTool(f.functionCalls);C.push(...E)}v++,p={role:"user",parts:C},u.contents=_t(u.contents),u.contents.push(x),u.contents.push(p),Fh(u.config)&&(h.push(x),h.push(p))}return Fh(u.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,r,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),kh(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=Dh(n);if(u.length>0){const p=u.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const u of o.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=u==null?void 0:u.safetyAttributes:s.push(u);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},l}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new yo(dn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,r;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const s=await Promise.all(i.map(async u=>Xo(u)?await u.tool():u)),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(l.config.tools=s,t.config&&t.config.tools&&iv(t.config.tools)){const u=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),sv(c),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(t){var n,o,r;const i=new Map;for(const s of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Xo(s)){const l=s,u=await l.tool();for(const c of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,l)}}return i}async processAfcStream(t){var n,o,r;const i=(r=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Ph;let s=!1,l=0;const u=await this.initAfcToolsMap(t);return function(c,f,p){var h,m;return Ko(this,arguments,function*(){for(var v,x,C,g;l<i;){s&&(l++,s=!1);const w=yield ye(c.processParamsMaybeAddMcpUsage(p)),T=yield ye(c.generateContentStreamInternal(w)),I=[],M=[];try{for(var y=!0,E=(x=void 0,Jr(T)),_;_=yield ye(E.next()),v=_.done,!v;y=!0){g=_.value,y=!1;const P=g;if(yield yield ye(P),P.candidates&&(!((h=P.candidates[0])===null||h===void 0)&&h.content)){M.push(P.candidates[0].content);for(const F of(m=P.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(l<i&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const V=yield ye(f.get(F.functionCall.name).callTool([F.functionCall]));I.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(P){x={error:P}}finally{try{!y&&!v&&(C=E.return)&&(yield ye(C.call(E)))}finally{if(x)throw x.error}}if(I.length>0){s=!0;const P=new Rr;P.candidates=[{content:{role:"user",parts:I}}],yield yield ye(P);const F=[];F.push(...M),F.push({role:"user",parts:I});const V=_t(p.contents).concat(F);p.contents=V}else break}})}(this,u,t)}async generateContentInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Nh(this.apiClient,t);return l=W("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ah(f),h=new Rr;return Object.assign(h,p),h})}else{const c=Th(this.apiClient,t);return l=W("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ih(f),h=new Rr;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Nh(this.apiClient,t);return l=W("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Ko(this,arguments,function*(){var h,m,v,x;try{for(var C=!0,g=Jr(p),y;y=yield ye(g.next()),h=y.done,!h;C=!0){x=y.value,C=!1;const E=x,_=Ah(yield ye(E.json()));_.sdkHttpResponse={headers:E.headers};const w=new Rr;Object.assign(w,_),yield yield ye(w)}}catch(E){m={error:E}}finally{try{!C&&!h&&(v=g.return)&&(yield ye(v.call(g)))}finally{if(m)throw m.error}}})})}else{const c=Th(this.apiClient,t);return l=W("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Ko(this,arguments,function*(){var h,m,v,x;try{for(var C=!0,g=Jr(p),y;y=yield ye(g.next()),h=y.done,!h;C=!0){x=y.value,C=!1;const E=x,_=Ih(yield ye(E.json()));_.sdkHttpResponse={headers:E.headers};const w=new Rr;Object.assign(w,_),yield yield ye(w)}}catch(E){m={error:E}}finally{try{!C&&!h&&(v=g.return)&&(yield ye(v.call(g)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=IM(this.apiClient,t);return l=W("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=RM(f),h=new ah;return Object.assign(h,p),h})}else{const c=NM(this.apiClient,t);return l=W("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AM(f),h=new ah;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=GM(this.apiClient,t);return l=W("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=zM(f),h=new uh;return Object.assign(h,p),h})}else{const c=HM(this.apiClient,t);return l=W("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=BM(f),h=new uh;return Object.assign(h,p),h})}}async editImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=_M(this.apiClient,t);return i=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=wM(u),f=new PI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=GP(this.apiClient,t);return i=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=BP(u),f=new kI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=SP(this.apiClient,t);return i=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=_P(u),f=new DI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=AP(this.apiClient,t);return i=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=RP(u),f=new FI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=iP(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ku(f))}else{const c=rP(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Pu(f))}}async listInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=hP(this.apiClient,t);return l=W("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gP(f),h=new ch;return Object.assign(h,p),h})}else{const c=pP(this.apiClient,t);return l=W("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=mP(f),h=new ch;return Object.assign(h,p),h})}}async update(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=bP(this.apiClient,t);return l=W("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ku(f))}else{const c=VP(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Pu(f))}}async delete(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=vM(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=xM(f),h=new dh;return Object.assign(h,p),h})}else{const c=yM(this.apiClient,t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=EM(f),h=new dh;return Object.assign(h,p),h})}}async countTokens(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=hM(this.apiClient,t);return l=W("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gM(f),h=new fh;return Object.assign(h,p),h})}else{const c=pM(this.apiClient,t);return l=W("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=mM(f),h=new fh;return Object.assign(h,p),h})}}async computeTokens(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=sM(this.apiClient,t);return i=W("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=lM(u),f=new LI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=WM(this.apiClient,t);return l=W("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=JM(f),h=new Qs;return Object.assign(h,p),h})}else{const c=YM(this.apiClient,t);return l=W("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=OM(f),h=new Qs;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fk extends pn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=TI(t);return l=W("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const c=CI(t);return l=W("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=yI(t);return i=W("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lk(e){const t={},n=a(e,["data"]);if(n!=null&&d(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Uk(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ok(i))),d(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&d(t,["role"],o),t}function Vk(e,t,n){const o={},r=a(t,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const i=a(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&d(n,["newSessionExpireTime"],i);const s=a(t,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const l=a(t,["liveConnectConstraints"]);n!==void 0&&l!=null&&d(n,["bidiGenerateContentSetup"],qk(e,l));const u=a(t,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),o}function bk(e,t){const n={},o=a(t,["config"]);return o!=null&&d(n,["config"],Vk(e,o,n)),n}function Hk(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Gk(e){const t={},n=a(e,["id"]);n!=null&&d(t,["id"],n);const o=a(e,["args"]);o!=null&&d(t,["args"],o);const r=a(e,["name"]);if(r!=null&&d(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Bk(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function zk(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function $k(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","topK"],l);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],rd(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],m);const v=a(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],Uk(ze(v)));const x=a(e,["tools"]);if(t!==void 0&&x!=null){let T=dr(x);Array.isArray(T)&&(T=T.map(I=>Yk(cr(I)))),d(t,["setup","tools"],T)}const C=a(e,["sessionResumption"]);t!==void 0&&C!=null&&d(t,["setup","sessionResumption"],Jk(C));const g=a(e,["inputAudioTranscription"]);t!==void 0&&g!=null&&d(t,["setup","inputAudioTranscription"],g);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const E=a(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&d(t,["setup","realtimeInputConfig"],E);const _=a(e,["contextWindowCompression"]);t!==void 0&&_!=null&&d(t,["setup","contextWindowCompression"],_);const w=a(e,["proactivity"]);return t!==void 0&&w!=null&&d(t,["setup","proactivity"],w),n}function qk(e,t){const n={},o=a(t,["model"]);o!=null&&d(n,["setup","model"],de(e,o));const r=a(t,["config"]);return r!=null&&d(n,["config"],$k(r,n)),n}function Ok(e){const t={},n=a(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&d(t,["fileData"],Hk(i));const s=a(e,["functionCall"]);s!=null&&d(t,["functionCall"],Gk(s));const l=a(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const u=a(e,["inlineData"]);u!=null&&d(t,["inlineData"],Lk(u));const c=a(e,["text"]);c!=null&&d(t,["text"],c);const f=a(e,["thought"]);f!=null&&d(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function Jk(e){const t={},n=a(e,["handle"]);if(n!=null&&d(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Yk(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const s=a(e,["codeExecution"]);if(s!=null&&d(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(e,["googleMaps"]);l!=null&&d(t,["googleMaps"],Bk(l));const u=a(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],zk(u));const c=a(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);t.push(...r)}else t.push(n)}return t.join(",")}function Kk(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const i=Wk(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];i&&u.push(i),l.length>0&&u.push(...l),u.length>0?e.fieldMask=u.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class Xk extends pn{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=bk(this.apiClient,t);i=W("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=Kk(l,t.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qk(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&d(t,["_query","force"],o),n}function Zk(e){const t={},n=a(e,["name"]);n!=null&&d(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&Qk(o,t),t}function jk(e){const t={},n=a(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function e2(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function t2(e){const t={},n=a(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const o=a(e,["config"]);return o!=null&&e2(o,t),t}function n2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=a(e,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o2 extends pn{constructor(t){super(),this.apiClient=t,this.list=async n=>new yo(dn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=jk(t);return i=W("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Zk(t);r=W("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=t2(t);return i=W("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=n2(u),f=new UI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r2 extends pn{constructor(t,n=new o2(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new yo(dn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WP(t);return i=W("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QP(t);return i=W("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=XP(t);r=W("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ok(t);return i=W("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=rk(u),f=new VI;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ik(t);return i=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=sk(u),f=new bI;return Object.assign(f,c),f})}}async importFile(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ek(t);return i=W("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>{const c=jP(u),f=new jc;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i2(e,t){const n={},o=a(e,["name"]);return o!=null&&d(n,["_url","name"],o),n}function s2(e,t){const n={},o=a(e,["name"]);return o!=null&&d(n,["_url","name"],o),n}function l2(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function a2(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function u2(e,t,n){const o={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(e,["epochCount"]);t!==void 0&&i!=null&&d(t,["tuningTask","hyperparameters","epochCount"],i);const s=a(e,["learningRateMultiplier"]);if(s!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(e,["batchSize"]);t!==void 0&&l!=null&&d(t,["tuningTask","hyperparameters","batchSize"],l);const u=a(e,["learningRate"]);if(t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","learningRate"],u),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function c2(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const m=a(e,["validationDataset"]);t!==void 0&&m!=null&&d(t,["supervisedTuningSpec"],Lh(m))}else if(r==="PREFERENCE_TUNING"){const m=a(e,["validationDataset"]);t!==void 0&&m!=null&&d(t,["preferenceOptimizationSpec"],Lh(m))}const i=a(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&d(t,["tunedModelDisplayName"],i);const s=a(e,["description"]);t!==void 0&&s!=null&&d(t,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const m=a(e,["epochCount"]);t!==void 0&&m!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(l==="PREFERENCE_TUNING"){const m=a(e,["epochCount"]);t!==void 0&&m!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=a(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(u==="PREFERENCE_TUNING"){const m=a(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=a(e,["exportLastCheckpointOnly"]);t!==void 0&&m!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(c==="PREFERENCE_TUNING"){const m=a(e,["exportLastCheckpointOnly"]);t!==void 0&&m!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=a(e,["adapterSize"]);t!==void 0&&m!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(f==="PREFERENCE_TUNING"){const m=a(e,["adapterSize"]);t!==void 0&&m!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(e,["labels"]);t!==void 0&&p!=null&&d(t,["labels"],p);const h=a(e,["beta"]);return t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function d2(e,t){const n={},o=a(e,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&_2(i);const s=a(e,["config"]);return s!=null&&u2(s,n),n}function f2(e,t){const n={},o=a(e,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&w2(i,n,t);const s=a(e,["config"]);return s!=null&&c2(s,n,t),n}function p2(e,t){const n={},o=a(e,["name"]);return o!=null&&d(n,["_url","name"],o),n}function h2(e,t){const n={},o=a(e,["name"]);return o!=null&&d(n,["_url","name"],o),n}function m2(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&d(t,["_query","pageToken"],i);const s=a(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),o}function g2(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&d(t,["_query","pageToken"],i);const s=a(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),o}function y2(e,t){const n={},o=a(e,["config"]);return o!=null&&m2(o,n),n}function v2(e,t){const n={},o=a(e,["config"]);return o!=null&&g2(o,n),n}function E2(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const i=a(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>lv(l))),d(n,["tuningJobs"],s)}return n}function x2(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const i=a(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Fu(l))),d(n,["tuningJobs"],s)}return n}function S2(e,t){const n={},o=a(e,["name"]);o!=null&&d(n,["model"],o);const r=a(e,["name"]);return r!=null&&d(n,["endpoint"],r),n}function _2(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=a(e,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(n,["examples","examples"],r)}return n}function w2(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function lv(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&d(n,["name"],r);const i=a(e,["state"]);i!=null&&d(n,["state"],By(i));const s=a(e,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(e,["tuningTask","startTime"]);l!=null&&d(n,["startTime"],l);const u=a(e,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=a(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(e,["description"]);f!=null&&d(n,["description"],f);const p=a(e,["baseModel"]);p!=null&&d(n,["baseModel"],p);const h=a(e,["_self"]);return h!=null&&d(n,["tunedModel"],S2(h)),n}function Fu(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&d(n,["name"],r);const i=a(e,["state"]);i!=null&&d(n,["state"],By(i));const s=a(e,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(e,["startTime"]);l!=null&&d(n,["startTime"],l);const u=a(e,["endTime"]);u!=null&&d(n,["endTime"],u);const c=a(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(e,["error"]);f!=null&&d(n,["error"],f);const p=a(e,["description"]);p!=null&&d(n,["description"],p);const h=a(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);const m=a(e,["tunedModel"]);m!=null&&d(n,["tunedModel"],m);const v=a(e,["preTunedModel"]);v!=null&&d(n,["preTunedModel"],v);const x=a(e,["supervisedTuningSpec"]);x!=null&&d(n,["supervisedTuningSpec"],x);const C=a(e,["preferenceOptimizationSpec"]);C!=null&&d(n,["preferenceOptimizationSpec"],C);const g=a(e,["tuningDataStats"]);g!=null&&d(n,["tuningDataStats"],g);const y=a(e,["encryptionSpec"]);y!=null&&d(n,["encryptionSpec"],y);const E=a(e,["partnerModelTuningSpec"]);E!=null&&d(n,["partnerModelTuningSpec"],E);const _=a(e,["customBaseModel"]);_!=null&&d(n,["customBaseModel"],_);const w=a(e,["experiment"]);w!=null&&d(n,["experiment"],w);const T=a(e,["labels"]);T!=null&&d(n,["labels"],T);const I=a(e,["outputUri"]);I!=null&&d(n,["outputUri"],I);const M=a(e,["pipelineJob"]);M!=null&&d(n,["pipelineJob"],M);const P=a(e,["serviceAccount"]);P!=null&&d(n,["serviceAccount"],P);const F=a(e,["tunedModelDisplayName"]);F!=null&&d(n,["tunedModelDisplayName"],F);const V=a(e,["veoTuningSpec"]);return V!=null&&d(n,["veoTuningSpec"],V),n}function C2(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&d(n,["name"],r);const i=a(e,["metadata"]);i!=null&&d(n,["metadata"],i);const s=a(e,["done"]);s!=null&&d(n,["done"],s);const l=a(e,["error"]);return l!=null&&d(n,["error"],l),n}function Lh(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const r=a(e,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends pn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new yo(dn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Iu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=h2(t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Fu(f))}else{const c=p2(t);return l=W("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>lv(f))}}async listInternal(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=v2(t);return l=W("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=x2(f),h=new ph;return Object.assign(h,p),h})}else{const c=y2(t);return l=W("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=E2(f),h=new ph;return Object.assign(h,p),h})}}async cancel(t){var n,o,r,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=s2(t);return l=W("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=a2(f),h=new hh;return Object.assign(h,p),h})}else{const c=i2(t);return l=W("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=l2(f),h=new hh;return Object.assign(h,p),h})}}async tuneInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=f2(t,t);return i=W("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>Fu(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=d2(t);return i=W("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>C2(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N2{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const I2=1024*1024*8,A2=3,R2=1e3,M2=2,js="x-goog-upload-status";async function P2(e,t,n){var o;const r=await av(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function k2(e,t,n){var o;const r=await av(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Ly(i),l=new ed;return Object.assign(l,s),l}async function av(e,t,n){var o,r;let i=0,s=0,l=new Au(new Response),u="upload";for(i=e.size;s<i;){const c=Math.min(I2,i-s),f=e.slice(s,s+c);s+c>=i&&(u+=", finalize");let p=0,h=R2;for(;p<A2&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((o=l==null?void 0:l.headers)===null||o===void 0)&&o[js]));)p++,await F2(h),h=h*M2;if(s+=c,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[js])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function D2(e){return{size:e.size,type:e.type}}function F2(e){return new Promise(t=>setTimeout(t,e))}class L2{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await P2(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await k2(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await D2(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2{create(t,n,o){return new V2(t,n,o)}}class V2{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uh="x-goog-api-key";class b2{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Uh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Uh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H2="gl-node/";class G2{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=mI(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new b2(this.apiKey);this.apiClient=new hk({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:H2+"web",uploader:new L2,downloader:new N2}),this.models=new Dk(this.apiClient),this.live=new Ik(this.apiClient,r,new U2),this.batches=new qA(this.apiClient),this.chats=new TR(this.models,this.apiClient),this.caches=new _R(this.apiClient),this.files=new LR(this.apiClient),this.operations=new Fk(this.apiClient),this.authTokens=new Xk(this.apiClient),this.tunings=new T2(this.apiClient),this.fileSearchStores=new r2(this.apiClient)}}const uv=new G2({apiKey:"AIzaSyCvtC7ZXSEtuJmRALaVuww8ZxFdho5VRGw"}),B2=async(e,t,n)=>{const r={nodes:e.filter(s=>s.type!=="group").map(s=>({id:s.id,type:s.type,label:s.data.label,description:s.data.description||"",code:s.data.code||"",duration:s.data.duration})),edges:t.map(s=>({source:s.source,target:s.target,label:s.label||(s.sourceHandle==="true"?"Yes":s.sourceHandle==="false"?"No":"Next")})),initialVariables:n.reduce((s,l)=>({...s,[l.name]:l.value}),{})},i=`
    You are a sophisticated flowchart execution engine with C# code simulation capabilities.
    I will provide you with a JSON representation of a flowchart and initial variable states.
    
    Your task is to simulate the execution of this flowchart step-by-step.
    
    Rules:
    1. Start at the 'start' node.
    2. Follow edges to the next node.
    3. **Variables**: Maintain the state of variables defined in 'initialVariables'. Update them as needed.
       - **Syntax**: Text fields might contain variables in format '{varName}'. Replace them with actual values during execution logging.
    4. **'code' Nodes**: Simulate the execution of the provided C# code. 
       - If the code modifies a variable (e.g., 'count++'), update the variable state.
       - Assume standard C# syntax. 
    5. **'delay' Nodes**: Log a message like "Waiting for X ms..." but continue execution.
    6. **'decision' Nodes**: logical evaluation based on variable values (e.g., "{count} > 5").
       - Substitute {variables} before evaluation.
       - If condition is true, follow 'Yes'/'true' edge.
       - If false, follow 'No'/'false' edge.
    7. **Concurrent Branching / Parallel Execution**: 
       - If a non-decision node has multiple outgoing edges, consider this a parallel fork.
       - Execute all following branches. You can interleave the logs of these branches or execute them sequentially.
    8. **'aiTask' Nodes**: Perform the generative task.
    9. **'log' Nodes**: Output the message. Replace {varName} with values.
    
    Graph Data:
    ${JSON.stringify(r,null,2)}
    
    Return JSON format adhering to this schema.
    - 'logs': Array of steps. 'status' must be 'info', 'success', 'warning', or 'error'.
    - 'finalOutput': Result of the last operation.
    - 'finalVariables': Array of objects { name, value, type } representing the final state of all variables.
    
    IMPORTANT: The 'message' in logs should be in Chinese (Simplified).
  `;try{let l=(await uv.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:re.OBJECT,properties:{logs:{type:re.ARRAY,items:{type:re.OBJECT,properties:{step:{type:re.INTEGER},nodeId:{type:re.STRING},nodeLabel:{type:re.STRING},message:{type:re.STRING},status:{type:re.STRING,enum:["info","success","warning","error"]},timestamp:{type:re.STRING}}}},finalOutput:{type:re.STRING},finalVariables:{type:re.ARRAY,items:{type:re.OBJECT,properties:{name:{type:re.STRING},value:{type:re.STRING},type:{type:re.STRING}}}},success:{type:re.BOOLEAN}}}}})).text||"{}";l.includes("```")&&(l=l.replace(/```json/g,"").replace(/```/g,"").trim());let u={};try{u=JSON.parse(l)}catch(p){return console.warn("Failed to parse Gemini response:",p),{success:!1,logs:[{step:0,nodeId:"system",nodeLabel:"System Error",message:" AI ",status:"error",timestamp:new Date().toISOString()}],finalOutput:void 0}}const c=[];u.logs&&Array.isArray(u.logs)&&u.logs.forEach((p,h)=>{p&&typeof p=="object"&&c.push({step:typeof p.step=="number"?p.step:h+1,nodeId:p.nodeId||"unknown",nodeLabel:p.nodeLabel||"",message:p.message||"",status:["info","success","warning","error"].includes(p.status)?p.status:"info",timestamp:p.timestamp||new Date().toISOString()})});const f={};return u.finalVariables&&Array.isArray(u.finalVariables)&&u.finalVariables.forEach(p=>{p&&p.name&&(f[p.name]=p.value)}),{success:u.success??!1,logs:c,finalOutput:u.finalOutput,finalVariables:f}}catch(s){return console.error("Gemini Execution Error:",s),{success:!1,logs:[{step:0,nodeId:"system",nodeLabel:"System Error",message:`: ${s instanceof Error?s.message:""}`,status:"error",timestamp:new Date().toISOString()}]}}},z2=async(e,t,n)=>{const o=`
    You are an AI programming assistant for a visual flow builder.
    User Request: "${e}"
    
    Task:
    ${n?`Create a sequence of nodes to APPEND after the node with ID "${n}".`:"Create a complete new flowchart based on the description."}
    
    **CRITICAL NODE SELECTION RULES (Follow these priority):**
    1. **PRIORITIZE VISUAL NODES**: Use the following node types whenever possible to represent logic:
       - **'decision'**: For ANY "if/else", "check", "verify", "validate" logic. (e.g., "Is count > 10?", "Is user active?").
       - **'delay'**: For waiting or pausing. (e.g., "Wait 5 seconds").
       - **'log'**: For printing messages, debugging, or showing status. (e.g., "Print success message").
       - **'aiTask'**: For generating content, summarizing, or complex reasoning tasks.
       - **'process'**: For generic actions or API calls (conceptual).
    
    2. **MINIMIZE 'code' NODES**: Only use 'code' nodes (C#) for:
       - Complex arithmetic (e.g., calculating interest rates).
       - String manipulation that 'decision' or 'log' nodes can't handle.
       - Data transformation.
       - **DO NOT** use 'code' for simple logic flow like "if x > y then go here". Use a 'decision' node instead.

    Requirements:
    1. **Nodes**: Generate a list of nodes with unique IDs (e.g., 'gen-[type]-[random]').
    2. **Edges**: Generate edges to connect these nodes logically.
       - 'decision' nodes MUST have 'true' and 'false' edges if both paths are needed, or at least one labeled edge.
    3. **Variables**: Define any new variables required (e.g., 'loopCount', 'userInput').
    
    Context:
    - Existing Nodes: ${t.length}
    - Mode: ${n?"Append Mode":"New Flow Mode"}
    
    Return JSON with 'nodes', 'edges', and 'variables'.
  `;try{const i=(await uv.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:re.OBJECT,properties:{nodes:{type:re.ARRAY,items:{type:re.OBJECT,properties:{id:{type:re.STRING},type:{type:re.STRING},label:{type:re.STRING},description:{type:re.STRING},code:{type:re.STRING},duration:{type:re.INTEGER}}}},edges:{type:re.ARRAY,items:{type:re.OBJECT,properties:{source:{type:re.STRING},target:{type:re.STRING},label:{type:re.STRING},sourceHandle:{type:re.STRING}}}},variables:{type:re.ARRAY,items:{type:re.OBJECT,properties:{name:{type:re.STRING},type:{type:re.STRING,enum:["string","number","boolean"]},value:{type:re.STRING}}}}}}}})).text||"{}",s=JSON.parse(i),l=(s.nodes||[]).map(f=>({id:f.id,type:f.type,position:{x:0,y:0},data:{label:f.label,description:f.description,code:f.code,duration:f.duration}})),u=(s.edges||[]).map(f=>({id:`e-${f.source}-${f.target}-${Math.random().toString(36).substr(2,5)}`,source:f.source,target:f.target,label:f.label,sourceHandle:f.sourceHandle})),c=(s.variables||[]).map(f=>({id:`v-${Math.random().toString(36).substr(2,9)}`,name:f.name,type:f.type,value:f.value||""}));return{nodes:l,edges:u,variables:c}}catch(r){return console.error("AI Copilot Error:",r),{nodes:[],edges:[],variables:[]}}},$2=({isOpen:e,onClose:t,currentNodes:n,onApplyFlow:o,selectedNodeId:r,zIndex:i,onInteract:s,initialPosition:l,variables:u=[]})=>{const[c,f]=R.useState(""),[p,h]=R.useState(!1);if(!e)return null;const m=async()=>{if(!c.trim())return;h(!0);const v=await z2(c,n,r);h(!1),v.nodes.length>0&&(o(v),f(""))};return S.jsx(Qc,{title:"AI ",icon:Ty,initialPosition:l||{x:window.innerWidth/2-250,y:100},initialSize:{width:500,height:450},onClose:t,headerColor:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",zIndex:i,onInteract:s,children:S.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[S.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[r?S.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-lg p-3 mb-4 text-xs text-indigo-700 flex items-center gap-2",children:[S.jsx(Ks,{className:"w-3 h-3"}),S.jsxs("span",{children:[": ",S.jsx("strong",{children:""})," ( ID: ",r," )"]})]}):S.jsxs("div",{className:"bg-slate-100 border border-slate-200 rounded-lg p-3 mb-4 text-xs text-slate-600 flex items-center gap-2",children:[S.jsx(Ks,{className:"w-3 h-3"}),S.jsxs("span",{children:[": ",S.jsx("strong",{children:""})," ()"]})]}),S.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:":"}),S.jsx(Tu,{value:c,onChange:f,variables:u,isTextArea:!0,placeholder:r?":  {userAge} 18...":": ...",className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none resize-none shadow-sm mb-4"}),S.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[":  ",S.jsx("code",{children:"{"}),"  ",S.jsx("code",{children:"@"})," "]})]}),S.jsxs("div",{className:"p-4 bg-white border-t border-slate-100 shrink-0 flex items-center justify-between",children:[S.jsx("span",{className:"text-[10px] text-slate-400",children:"Powered by Gemini 2.5"}),S.jsx("button",{onClick:m,disabled:p||!c.trim(),className:`
              flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all
              ${p||!c.trim()?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg active:scale-95"}
            `,children:p?S.jsxs(S.Fragment,{children:[S.jsx(GN,{className:"w-4 h-4 animate-spin"}),"..."]}):S.jsxs(S.Fragment,{children:[S.jsx($N,{className:"w-4 h-4"}),""]})})]})]})})},On=({children:e,title:t,colorClass:n,icon:o,selected:r,isActive:i,error:s,minWidth:l="min-w-[160px]"})=>S.jsxs("div",{className:`
    shadow-lg rounded-lg border-2 bg-white ${l} transition-all duration-300 relative
    ${s?"border-red-500 ring-2 ring-red-200":i?"border-emerald-500 ring-4 ring-emerald-200 shadow-[0_0_15px_rgba(16,185,129,0.4)] scale-105 z-50":r?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"} 
    ${!s&&n}
  `,children:[s&&S.jsx("div",{className:"absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1 shadow-md z-50",title:s,children:S.jsx(AN,{className:"w-4 h-4"})}),S.jsxs("div",{className:`flex items-center px-3 py-2 border-b border-gray-100 rounded-t-lg ${s?"bg-red-50":i?"bg-emerald-50":"bg-gray-50/50"}`,children:[S.jsx(o,{className:`w-4 h-4 mr-2 ${s?"text-red-500":i?"text-emerald-600 animate-pulse":"opacity-70"}`}),S.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${s?"text-red-700":i?"text-emerald-700":""}`,children:t}),i&&S.jsxs("span",{className:"ml-auto flex h-2 w-2 relative",children:[S.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),S.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})]}),S.jsx("div",{className:"p-3",children:e})]}),q2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-emerald-500",icon:Kc,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx("div",{className:"text-sm font-medium text-slate-700 text-center",children:e.label}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-emerald-500 !w-3 !h-3",title:": "})]})),O2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-red-500",icon:Fy,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx("div",{className:"text-sm font-medium text-slate-700 text-center",children:e.label}),S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-red-500 !w-3 !h-3",title:": "})]})),J2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-blue-500",icon:Dy,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-blue-300 !w-3 !h-3",title:": "}),S.jsx("div",{className:"text-sm text-slate-800",children:e.label}),e.description&&S.jsx("div",{className:"text-xs text-slate-500 mt-1 truncate max-w-[140px]",children:e.description}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-blue-500 !w-3 !h-3",title:": "})]})),Y2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"AI ",colorClass:"border-l-4 border-l-purple-500",icon:Ks,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-purple-300 !w-3 !h-3",title:": AI"}),S.jsx("div",{className:"text-sm text-slate-800 font-medium bg-purple-50 p-2 rounded border border-purple-100 mb-1",children:e.label}),S.jsx("div",{className:"text-xs text-slate-500 italic",children:"Gemini 2.5 Flash"}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-purple-500 !w-3 !h-3",title:": "})]})),W2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-amber-500",icon:My,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-amber-300 !w-3 !h-3",title:": "}),S.jsx("div",{className:"text-sm font-medium text-center my-2",children:e.label}),S.jsxs("div",{className:"flex justify-between w-full mt-3 px-1 gap-4",children:[S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute -bottom-6 -left-1 text-[10px] font-bold text-green-600",children:""}),S.jsx(Pe,{type:"source",position:Q.Bottom,id:"true",className:"!bg-green-500 !w-3 !h-3 !left-2",title:":  (True)"})]}),S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute -bottom-6 -right-1 text-[10px] font-bold text-red-600",children:""}),S.jsx(Pe,{type:"source",position:Q.Bottom,id:"false",className:"!bg-red-500 !w-3 !h-3 !left-auto !right-2",title:":  (False)"})]})]})]})),K2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"C# ",colorClass:"border-l-4 border-l-slate-700",icon:Ry,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-slate-500 !w-3 !h-3",title:": "}),S.jsx("div",{className:"text-sm text-slate-800 font-mono",children:e.label}),S.jsx("div",{className:"text-[10px] text-slate-400 mt-1 font-mono bg-slate-100 p-1 rounded overflow-hidden h-6 whitespace-nowrap",children:e.code||"// ..."}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-slate-700 !w-3 !h-3",title:": "})]})),X2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-orange-400",icon:Ay,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-orange-300 !w-3 !h-3",title:": "}),S.jsx("div",{className:"text-sm text-slate-800 text-center",children:e.label}),S.jsxs("div",{className:"text-xs text-orange-600 font-bold text-center mt-1",children:[e.duration||1e3," ms"]}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-orange-500 !w-3 !h-3",title:": "})]})),Q2=R.memo(({data:e,selected:t})=>S.jsxs(On,{title:"",colorClass:"border-l-4 border-l-gray-500",icon:Xc,selected:t,isActive:e.isActive,error:e.error,children:[S.jsx(Pe,{type:"target",position:Q.Top,className:"!bg-gray-400 !w-3 !h-3",title:": "}),S.jsx("div",{className:"text-sm text-slate-800",children:e.label}),S.jsx("div",{className:"text-xs text-gray-500 mt-1 italic",children:""}),S.jsx(Pe,{type:"source",position:Q.Bottom,className:"!bg-gray-600 !w-3 !h-3",title:": "})]})),Z2=R.memo(({data:e,selected:t,id:n})=>S.jsxs("div",{className:`rounded-lg border-2 border-dashed bg-slate-50/50 w-full h-full transition-colors duration-200 ${t?"border-indigo-400 bg-indigo-50/30":"border-slate-300"}`,children:[S.jsx(TN,{minWidth:200,minHeight:100,isVisible:t,lineClassName:"border-indigo-400",handleClassName:"h-3 w-3 bg-indigo-500 border border-white rounded"}),S.jsxs("div",{className:"absolute -top-3 left-4 px-2 bg-slate-100 text-xs font-bold text-slate-500 uppercase tracking-wider rounded border border-slate-300 flex items-center gap-1",children:[S.jsx(Ny,{className:"w-3 h-3"}),e.label]})]})),j2={[ne.START]:q2,[ne.END]:O2,[ne.PROCESS]:J2,[ne.DECISION]:W2,[ne.AI_TASK]:Y2,[ne.CODE]:K2,[ne.DELAY]:X2,[ne.LOG]:Q2,[ne.GROUP]:Z2},eD=()=>{const e=R.useRef(null),[t,n]=R.useState(nI),[o,r]=R.useState(oI),[i,s]=R.useState(tI),[l,u]=R.useState(null),[c,f]=R.useState(null),[p,h]=R.useState(!1),[m,v]=R.useState([]),[x,C]=R.useState(!1),[g,y]=R.useState(!1),[E,_]=R.useState([]),[w,T]=R.useState([]),I=R.useCallback(()=>{_(q=>[...q.slice(-10),{nodes:JSON.parse(JSON.stringify(t)),edges:JSON.parse(JSON.stringify(o))}]),T([])},[t,o]),M=R.useCallback(q=>{n(J=>ly(q,J))},[]),P=R.useCallback(q=>{r(J=>g1(q,J)),q.some(J=>J.type==="remove")&&I()},[I]),F=R.useCallback(q=>{I(),r(J=>G0(q,J))},[r,I]),V=R.useCallback(()=>{I()},[I]),G=R.useCallback(q=>{q.preventDefault(),q.dataTransfer.dropEffect="move"},[]),z=R.useCallback(q=>{if(q.preventDefault(),!e.current||!l)return;const J=q.dataTransfer.getData("application/reactflow"),X=q.dataTransfer.getData("application/label");if(typeof J>"u"||!J)return;I();const ee=l.screenToFlowPosition({x:q.clientX,y:q.clientY}),te={id:`${J}-${Date.now()}`,type:J,position:ee,data:{label:X||`${J} node`}};J===ne.GROUP&&(te.style={width:400,height:300}),n(oe=>oe.concat(te))},[l,I]),N=R.useCallback((q,J)=>{f(J)},[]),U=R.useCallback(()=>{f(null)},[]),k=(q,J)=>{I(),n(X=>X.map(ee=>ee.id===q?{...ee,data:{...ee.data,...J}}:ee)),f(X=>X?{...X,data:{...X.data,...J}}:null)},B=()=>{if(!l)return;const q=t.filter(ce=>ce.selected&&ce.type!==ne.GROUP);if(q.length<2)return;I();const J=HT(q),X=`group-${Date.now()}`,ee=20,te={id:X,type:ne.GROUP,position:{x:J.x-ee,y:J.y-ee},style:{width:J.width+ee*2,height:J.height+ee*2},data:{label:""}},oe=q.map(ce=>({...ce,parentNode:X,extent:"parent",position:{x:ce.position.x-(J.x-ee),y:ce.position.y-(J.y-ee)},selected:!1})),ae=t.filter(ce=>!ce.selected);n([...ae,te,...oe])},D=()=>{let q=!0;const J=t.map(X=>{let ee;const te=X.data;switch(X.type){case ne.DECISION:!te.description&&!te.label.includes("?")&&(!te.description||te.description.trim()==="")&&(ee="");break;case ne.CODE:(!te.code||te.code.trim()==="")&&(ee="");break;case ne.AI_TASK:(!te.description||te.description.trim()==="")&&(ee="Prompt/");break;case ne.PROCESS:(!te.label||te.label.trim()==="")&&(ee="");break}return ee&&(q=!1),{...X,data:{...X.data,error:ee}}});return q||(n(J),v(X=>[...X,{step:0,nodeId:"system",nodeLabel:"Validation",message:"",status:"error",timestamp:new Date().toISOString()}])),q},A=async()=>{if(v([]),n(J=>J.map(X=>({...X,data:{...X.data,isActive:!1,error:void 0}}))),!D())return;h(!0),v([{step:0,nodeId:"init",nodeLabel:"System",message:" Gemini ...",status:"info",timestamp:new Date().toISOString()}]);const q=await B2(t,o,i);if(q.logs&&Array.isArray(q.logs)&&q.logs.length>0){let J=0;const X=setInterval(()=>{if(!q.logs||J>=q.logs.length){clearInterval(X),h(!1),n(te=>te.map(oe=>({...oe,data:{...oe.data,isActive:!1}}))),q.finalOutput&&v(te=>[...te,{step:999,nodeId:"end",nodeLabel:"Output",message:`: ${q.finalOutput}`,status:"success",timestamp:new Date().toISOString()}]),q.finalVariables;return}const ee=q.logs[J];ee&&(v(te=>[...te,ee]),ee.nodeId&&ee.nodeId!=="unknown"&&ee.nodeId!=="system"&&n(te=>te.map(oe=>oe.id===ee.nodeId?{...oe,data:{...oe.data,isActive:!0}}:{...oe,data:{...oe.data,isActive:!1}}))),J++},800)}else h(!1),v(J=>[...J,{step:0,nodeId:"error",nodeLabel:"Result",message:"",status:"warning",timestamp:new Date().toISOString()}])},L=()=>v([]),H=()=>{if(E.length===0)return;const q=E[E.length-1],J=E.slice(0,E.length-1);T([{nodes:t,edges:o},...w]),n(q.nodes),r(q.edges),_(J)},$=()=>{if(w.length===0)return;const q=w[0],J=w.slice(1);_([...E,{nodes:t,edges:o}]),n(q.nodes),r(q.edges),T(J)},K=q=>{I();const J=[...i];q.variables.forEach(te=>{J.some(oe=>oe.name===te.name)||J.push(te)}),s(J);let X=q.nodes,ee=[...q.edges];if(c){const te=c.position.x,oe=c.position.y+180;if(X=X.map((ae,ce)=>({...ae,position:{x:te,y:oe+ce*140}})),X.length>0){const ae=X[0],ce={id:`e-auto-connect-${Date.now()}`,source:c.id,target:ae.id,label:"",animated:!0,type:"smoothstep"};c.type===ne.DECISION&&(ce.sourceHandle="true"),ee.push(ce)}n(ae=>[...ae,...X]),r(ae=>[...ae,...ee])}else{const te=100+t.length*20,oe=100+t.length*20;X=X.map((ae,ce)=>({...ae,position:{x:te+(ce%2===0?0:200),y:oe+Math.floor(ce/2)*150}})),n(ae=>[...ae,...X]),r(ae=>[...ae,...ee])}y(!1)},Y=q=>{console.log("Loading project:",q)};return S.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[S.jsx(dI,{onLoadProject:Y}),S.jsxs("div",{className:"flex-1 flex flex-col relative h-full",children:[S.jsx(jN,{onRun:A,isRunning:p,canUndo:E.length>0,canRedo:w.length>0,onUndo:H,onRedo:$,onToggleVariables:()=>C(!x),onToggleAICopilot:()=>y(!g),onGroupSelected:B}),S.jsxs("div",{className:"flex-1 relative flex flex-col overflow-hidden",children:[S.jsxs("div",{className:"flex-1 relative bg-slate-50",ref:e,children:[S.jsxs(Sy,{nodes:t,edges:o,onNodesChange:M,onEdgesChange:P,onConnect:F,onInit:u,onDrop:z,onDragOver:G,onNodeDragStart:V,onNodeClick:N,onPaneClick:U,nodeTypes:j2,fitView:!0,attributionPosition:"bottom-right",snapToGrid:!0,snapGrid:[15,15],onlyRenderVisibleElements:!0,minZoom:.1,maxZoom:2,defaultEdgeOptions:{type:"smoothstep",animated:!0},children:[S.jsx(pN,{className:"bg-white shadow-lg border border-slate-100 rounded-md p-1"}),S.jsx(EN,{color:"#cbd5e1",variant:St.Dots,gap:15,size:1})]}),S.jsx(ZN,{}),S.jsx($2,{isOpen:g,onClose:()=>y(!1),currentNodes:t,onApplyFlow:K,selectedNodeId:c==null?void 0:c.id,initialPosition:{x:300,y:80},variables:i}),S.jsx(lI,{node:c,onClose:()=>f(null),onChange:k,variables:i,initialPosition:{x:window.innerWidth-350,y:80}}),S.jsx(uI,{isOpen:x,onClose:()=>C(!1),variables:i,setVariables:s,nodes:t,initialPosition:{x:window.innerWidth-750,y:80}})]}),S.jsx(eI,{logs:m,isRunning:p,onClear:L})]})]})]})},tD=()=>S.jsx(Jc,{children:S.jsx(eD,{})}),nD=()=>S.jsx("div",{className:"h-full w-full bg-slate-50 font-sans text-slate-900",children:S.jsx(tD,{})}),cv=/ResizeObserver loop limit exceeded/,dv=/ResizeObserver loop completed with undelivered notifications/,oD=/cdn.tailwindcss.com/,rD=console.error;console.error=(...e)=>{e.length>0&&typeof e[0]=="string"&&(cv.test(e[0])||dv.test(e[0]))||rD(...e)};const iD=console.warn;console.warn=(...e)=>{e.length>0&&typeof e[0]=="string"&&oD.test(e[0])||iD(...e)};window.addEventListener("error",e=>{(cv.test(e.message)||dv.test(e.message))&&e.stopImmediatePropagation()});const fv=document.getElementById("root");if(!fv)throw new Error("Could not find root element to mount to");const sD=ha.createRoot(fv);sD.render(S.jsx(b.StrictMode,{children:S.jsx(nD,{})}));
